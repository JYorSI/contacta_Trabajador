if (self.CavalryLogger) { CavalryLogger.start_js(["gMgrs"]); }

__d("RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"server_session_id",type:"String!",defaultValue:null},{kind:"LocalArgument",name:"guest_id",type:"ID",defaultValue:null}],b=[{kind:"Variable",name:"server_session_id",variableName:"server_session_id"}],c=[{kind:"Variable",name:"find",variableName:"guest_id"}],d={kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:null,name:"short_name",args:null,storageKey:null}]},e={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},f={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_query",storageKey:null,args:b,concreteType:"MessengerCall",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"connected_participants",storageKey:null,args:c,concreteType:"MessengerCallToConnectedParticipantsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessengerCallToConnectedParticipantsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"joining_context",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"MessengerCallInviteLink",selections:[{kind:"LinkedField",alias:null,name:"link_owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d]}]}]}]}]}]}]},operation:{kind:"Operation",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"messenger_call_query",storageKey:null,args:b,concreteType:"MessengerCall",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"connected_participants",storageKey:null,args:c,concreteType:"MessengerCallToConnectedParticipantsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessengerCallToConnectedParticipantsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"joining_context",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,f,{kind:"InlineFragment",type:"MessengerCallInviteLink",selections:[{kind:"LinkedField",alias:null,name:"link_owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[e,f,d]}]}]}]}]},f]}]},params:{operationKind:"query",name:"RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery",id:"1824858160953429",text:null,metadata:{}}}}();e.exports=a}),null);
__d("CreateMessengerCallInviteLinkMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"CreateMessengerCallInviteLinkData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"link_url",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"CreateMessengerCallInviteLinkMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"create_messenger_call_invite_link",storageKey:null,args:b,concreteType:"CreateMessengerCallInviteLinkResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messenger_call_invite_link",storageKey:null,args:null,concreteType:"MessengerCallInviteLink",plural:!1,selections:[d]}]}]},operation:{kind:"Operation",name:"CreateMessengerCallInviteLinkMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"create_messenger_call_invite_link",storageKey:null,args:b,concreteType:"CreateMessengerCallInviteLinkResponsePayload",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messenger_call_invite_link",storageKey:null,args:null,concreteType:"MessengerCallInviteLink",plural:!1,selections:[d,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"CreateMessengerCallInviteLinkMutation",id:"1879632448805157",text:null,metadata:{}}}}();e.exports=a}),null);
__d("RevokeMessengerCallInviteLinksForThreadMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"RevokeMessengerCallInviteLinksForThreadData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"revoke_messenger_call_invite_links_for_thread",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"RevokeMessengerCallInviteLinksForThreadResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_mutation_id",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"RevokeMessengerCallInviteLinksForThreadMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"RevokeMessengerCallInviteLinksForThreadMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"RevokeMessengerCallInviteLinksForThreadMutation",id:"2525319784152965",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MessengerCollisionContextQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"conference_name",type:"String!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"messenger_collision_context_query",storageKey:null,args:[{kind:"Variable",name:"conference_name",variableName:"conference_name"}],concreteType:"RTCCollisionContext",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"group_thread_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"peer_id",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerCollisionContextQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"MessengerCollisionContextQuery",argumentDefinitions:a,selections:b},params:{operationKind:"query",name:"MessengerCollisionContextQuery",id:"2839537846086423",text:null,metadata:{}}}}();e.exports=a}),null);
__d("AbstractTextArea.react",["cx","AbstractTextField.react","React","TextAreaControl"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").Component;c=b("React").PropTypes;d=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidUpdate=function(){this.$2&&this.$2.onupdate()};d.componentWillUnmount=function(){this.$2=null};d.render=function(){var a=this;return b("React").jsx(b("AbstractTextField.react"),babelHelpers["extends"]({},this.props,{children:b("React").jsx("textarea",{className:"_58an",onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onKeyUp:this.props.onKeyUp,rows:this.props.rows,tabIndex:this.props.tabIndex,ref:function(b){a.$1=b,a.$3()}})}))};d.$3=function(){if(this.$1&&this.props.autoGrow&&!this.$2){var a=new(b("TextAreaControl"))(this.$1);a.setAutogrow(!0);a.onupdate();this.$2=a}};d.focusInput=function(){this.$1&&this.$1.focus()};d.blurInput=function(){this.$1&&this.$1.blur()};d.getTextFieldDOM=function(){return this.$1};d.getValue=function(){return this.$1?this.$1.value:""};return c}(a);d.propTypes=babelHelpers["extends"]({},b("AbstractTextField.react").propTypes,{autoGrow:c.bool});e.exports=d}),null);
__d("FBRTCUtils",["AsyncRequest","FBIDCheck","FBRTCConfig","RTCConfig","RTWebUserActionLogger","assignMediaStream","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3,h="setSinkId"in window.HTMLMediaElement.prototype;a={attachMediaStream:function(a,c){if(a==null)return;b("assignMediaStream")(a,c);if(c){c=a.play();c!==void 0&&c["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"autoplay was prevented",errorType:a.toString()})})}},aboutEqual:function(a,b){return a-b<.01&&b-a<.01},sendServerRequest:function(a,c,d,e,f,h){c===void 0&&(c=b("emptyFunction"));d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=g);h===void 0&&(h={});a=new(b("AsyncRequest"))().setURI(a).setData(h).setAllowCrossPageTransition(!0).setHandler(c).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()},supportsSetSink:function(){return h},isPeerVCEndpoint:function(a){var c=b("FBRTCConfig").isVCEndpointCall();return c!==void 0?c:!!a&&!b("FBIDCheck").isUser_deprecated(a)&&b("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function(a){return a==="quickdial"||a==="meeting_room_page_profile"}};e.exports=a}),null);
__d("FBRTCAdminMessage",["FBRTCCallConstants","FBRTCConstants","FBRTCLogger","FBRTCUtils","RTWebUserActionLogger","XVideoCallAdminMessageController","emptyFunction","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,this.$3=Date.now(),this.$4=null,this.$5=null}var c=a.prototype;c.getPeerID=function(){return this.$1};c.getCallID=function(){return this.$2};c.getStartTimestamp=function(){return this.$3};c.getConnectedTime=function(){return this.$4};c.getEndTime=function(){return this.$5};c.onCallConnected=function(){this.$4||(this.$4=b("performanceNow")())};c.onCallEnded=function(){this.$5||(this.$5=b("performanceNow")())};c.submit=function(a,c,d){this.$5||this.onCallEnded();var e=0,f=b("FBRTCCallConstants").FBRTCCallConnectionType.MISSED_CALL;this.$4&&this.$5&&(e=Math.ceil(this.$5-this.$4),f=b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL);c=f===b("FBRTCCallConstants").FBRTCCallConnectionType.CONNECTED_CALL||c===b("FBRTCConstants").CallEndReason.IGNORE_CALL;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"admin_message_"+f});this.$6({peer_id:this.$1,call_id:this.$2,start_time:this.$3,call_duration:e,message_type:f,call_category:a,call_acknowledged:c,conference_name:d})};c.$6=function(a){var c=b("XVideoCallAdminMessageController").getURIBuilder().getURI();b("FBRTCUtils").sendServerRequest(c,b("emptyFunction"),this.$7.bind(this,a.peer_id,a.call_id),!1,void 0,a)};c.$7=function(a,c,d){d?d="Fail to log admin message, error "+d.error:d="Server timed out on logging admin message";b("FBRTCLogger").getInstance().logError(a,c,d)};return a}();e.exports=a}),null);
__d("FBRTCIceCache",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new Map()}var b=a.prototype;b.getCache=function(){__p&&__p();var a={};for(var b=this.$1,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];a[f]={};for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];a[f][j]=i}}return a};b.reset=function(a,b){var c=this.$1.get(a);c||(c=new Map(),this.$1.set(a,c));c.set(b,[])};b.cacheCandidate=function(a,b,c){var d=this.$1.get(a);d||(d=new Map(),this.$1.set(a,d));a=d.get(b);a||(a=[],d.set(b,a));a.unshift(c)};b.drainCandidates=function(a,b,c){a=this.$1.get(a);if(a){a=a.get(b)||[];while(a.length>0){b=a.pop();c(b)}}};return a}();e.exports=a}),null);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCSupport","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isVCCallOrWorkUser:function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()},canCallMWeb:function(){return b("gkx")("797400")},shouldShowEndCallQPs:function(){return b("gkx")("867914")},shouldShowCreateVCLButton:function(){return b("gkx")("947293")},addScreenContentTypeInSDP:function(){return!1},draggableSelfView:function(){return b("FBRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return!this.isVCCallOrWorkUser()},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("FBRTCExperiment").gen("rtc_www_video_chat_filters").getBool("use_filters_mw",!1)},isChatEnabled:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;return b("CurrentUser").isWorkUser()&&!b("gkx")("1020560")?!1:!0},isGroupChatEnabled:function(){return!1},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("FBRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return b("gkx")("678348")},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return!this.isVCCallOrWorkUser()},disableOpusStereo:function(){return b("gkx")("678351")},shouldApplySdpMidTranslation:function(){return b("gkx")("700608")},preserveFirefoxInactiveDataChannelBlock:function(){return b("gkx")("724606")},showMojavePermissionsWarning:function(){return navigator.userAgent.indexOf("Intel Mac OS X 10_14")!==-1},alwaysOpenChatTab:function(){return b("FBRTCExperiment").gen("rt_web_fb_profile_rtc_buttons").getBool("open_chat_tab",!1)},shouldAlwaysShowStarRating:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("FBRTCExperiment").gen("rtc_www_p2p_end_call_screen").getBool("persist_star_rating",!0)},shouldShowNetworkQualityIndicator:function(){return this.isVCCallOrWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("show_network_indicator",!1)},shouldMonitorNetworkQuality:function(){return this.isVCCallOrWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("monitor_network_quality",!1)},preferIsacForGroupCalls:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("gkx")("717703")}};e.exports=a}),null);
__d("FBRTCSdpUtils",["FBLogger","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f){__p&&__p();var g="a=x-fb-feature:",h="\r\n",i="m=video 0";f=["audio","video"].map(function(a){return new RegExp("m="+a+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")});var j=f[0],k=f[1],l=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],m=function(a){return a.match(/^a=rtpmap:(\d+)\s/)[1]},n=function(a,b,c){var d=m(a[b]);o(a,c,[d]);a.splice(b,1)},o=function(a,b,c){var d=a[b].split("RTP/SAVPF"),e=d[1].split(/\s+/);for(var f=0;f<c.length;f++){var g=e.indexOf(c[f]);g>=0&&e.splice(g,1)}d[1]=e.join(" ");a[b]=d.join("RTP/SAVPF")},p=function(a,b,c){__p&&__p();var d=m(a[b]);n(a,b,c);var e=new RegExp("^a=(rtcp-fb|fmtp):"+d+" ");a=a.filter(function(a,b){return!(e.test(a)&&b>=c)});var f=new RegExp("^a=fmtp:(\\d+)\\s+apt="+d+"($|;)");b=a.reduce(function(a,b,c){c=b.match(f);return c?[].concat(a,[c[1]]):a},[]);d=b.join("|");o(a,c,b);var g=new RegExp("^a=rtpmap:("+d+")\\s+rtx/|^a=fmtp:("+d+")\\s+apt=");return a.filter(function(a){return!g.test(a)})};f={RX_SDP_MEDIA_AUDIO:j,RX_SDP_MEDIA_VIDEO:k,replaceRTPSAVPFProfile:function(a){var b="UDP/TLS/RTP/SAVPF",c="RTP/SAVPF";while(a.indexOf(b)>=0)a=a.replace(b,c);return a},addIceOptionToSdp:function(a,b){"use strict";__p&&__p();var c="a=ice-options:",d=a.indexOf(c);if(d>=0)return a.split(h).map(function(a){return a.startsWith(c)?a+" "+b:a}).join(h);d=c+b;var e=a.split(h),f=!1,g=-1;for(var i=0;i<e.length;i++){var j=e[i].slice(0,2);if(j=="s="){f=!0;continue}if(f&&j=="a="){g=i;break}}if(g>=0){e.splice(g,0,d);return e.join(h)}return[a,d,h].join("")},preferIsac:function(a){__p&&__p();a=a.split(h);var b=-1,c=-1,d=-1;for(var e=0;e<a.length;e++){var f=a[e];f.match(j)&&(b=e);d===-1&&b>-1&&f.match(/^a=rtpmap:/)&&(d=e);f.match(/^a=rtpmap:\d+\s+ISAC\/16000/)&&(c=e)}if(b===-1||c===-1||d===-1||a[b].indexOf("RTP/SAVPF")===-1)return a.join(h);f=a[c];n(a,c,b);a.splice(d,0,f);a[b]=a[b].replace("RTP/SAVPF","RTP/SAVPF "+m(f));return a.join(h)},preferCodec:function(a,b,c){__p&&__p();a=a.split(h);var d=c?k:j,e=a.findIndex(function(a){return d.test(a)});if(e!==-1&&a[e].indexOf("RTP/SAVPF")!==-1){var f=new RegExp("^a=rtpmap:\\d+\\s+"+b);c=a.findIndex(function(a){return f.test(a)});var g=/^a=rtpmap:/;b=a.findIndex(function(a,b){return b>e&&g.test(a)});if(c!==-1&&b!==-1){var i=a[c];n(a,c,e);a.splice(b,0,i);a[e]=a[e].replace("RTP/SAVPF","RTP/SAVPF "+m(i))}}return a.join(h)},disableVideo:function(a){var c=/m=video\s+\S+/;a=a.replace(c,i);b("UserAgent").isBrowser("Firefox <= 37")&&(a=this._makeDisabledVideoReceiveOnly(a));return a},_makeDisabledVideoReceiveOnly:function(a){if(a.indexOf(i)>-1){var b=a.split(i);b[1]=b[1].replace(/send(recv|only)/,"recvonly");a=b.join(i)}return a},fixMobileIceSdp:function(a){__p&&__p();a=a.replace(/^a=/,"");a=a.split(/\s+username\s+.+password.+/)[0];var b=a.match(/\s+relay\s+|\s+srflx\s+/),c=a.match(/raddr.+rport.+/);if(b&&!c){b=b[0];c=a.split(b);var d=c[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),e,f;d?(e=d[1],f=d[2],c[1]=c[1].replace(d[0],"")):(d=c[0].split(/\s+/),e=d[4],f=d[5]);a=""+c[0]+b+"raddr "+e+" rport "+f+" "+c[1]}return a},addAudioNack:function(a){var b=this,c=[];a=a.split(h).map(function(a){var d="";c.length>0&&(/^a=rtpmap:(\d+)/.test(a)||/^a=ssrc/.test(a)||/^m=/.test(a))&&(d+=b._getrtcpFeedbackLinesFromAudioFMTs(c)+h,c=[]);/^m=audio/.test(a)&&(c=a.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" "));return d+a}).join(h);c.length>0&&(a+=h+this._getrtcpFeedbackLinesFromAudioFMTs(c));return a},addSetup:function(a){if(a.indexOf("a=setup:")>=0)return a;a=a.split(h);var b=a.findIndex(function(a){return a.startsWith("s=")}),c=a.findIndex(function(a,c){return c>b&&a.startsWith("a=")});a.splice(c,0,"a=setup:actpass");return a.join(h)},_replaceFmtp:function(a,b,c,d){a=a==b?[]:a.substr(b.length).split(";");var e=a.findIndex(function(a){return a.startsWith(c+"=")});d=c+"="+d;e<0?a.push(d):a[e]=d;return""+b+a.join(";")},_addFmtpToMediaSection:function(a,b,c,d){__p&&__p();var e=new RegExp("^a=rtpmap:(\\d+)\\s"+b);b=a.findIndex(function(a){return a.match(e)});if(b<0)return a;var f=a[b].match(e);f=f[1];var g="a=fmtp:"+f+" ";f=a.findIndex(function(a){return a.startsWith(g)});f===-1&&(f=b+1,a.splice(f,0,g));a[f]=this._replaceFmtp(a[f],g,c,d);return a},addFmtp:function(a,b,c,d){__p&&__p();a=a.split(h);var e=-1;for(var f=0;f<=a.length;f++)if(f===a.length||a[f].startsWith("m=")){if(e!==-1){var g=a.splice(e,f-e);g=this._addFmtpToMediaSection(g,b,c,d);a.splice.apply(a,[e,0].concat(g));f=e+1+g.length}e=f}return a.join(h)},_getrtcpFeedbackLinesFromAudioFMTs:function(a){return a.map(function(a){return"a=rtcp-fb:"+a+" nack"}).join(h)},_removeCodec:function(a,b){__p&&__p();var c=a;a=function(){var a=c.split(h),d=new RegExp("^a=rtpmap:\\d+\\s+"+b+"\\/"),e=a.findIndex(function(a){return d.test(a)}),f=a.findIndex(function(a){return/^m=video/.test(a)});if(e==-1||f==-1)return"break";c=p(a,e,f).join(h)};do{var d=a();if(d==="break")break}while(!0);return c},removeRED:function(a){return this._removeCodec(a,"red")},removeH264:function(a){return this._removeCodec(a,"H264")},removeVP9:function(a){return this._removeCodec(a,"VP9")},removeUnknownRtpHeaderExtensions:function(a){a=a.split(h);a=a.filter(function(a){return!a.match(/^a=extmap:/)||l.some(function(b){return a.includes(b)})});return a.join(h)},isVideoSupported:function(a){return!!a&&a.indexOf("m=video")!==-1&&a.indexOf(i)===-1},setDtlsRole:function(a,b){if(!a.match(/setup:(active|passive|actpass)/))return a.replace(/(a=fingerprint:.+)/g,"$1"+h+"a=setup:"+b);else return a.replace(/setup:actpass/g,"setup:"+b)},setVideoBitrateConstraint:function(a){var c=b("UserAgent").isBrowser("Firefox"),d=c?"TIAS":"AS";c=c?72e4:720;var e=new RegExp("^b="+d+":","m");if(a.match(e))return a;a=a.replace(/^a=mid:video\r\n/m,"a=mid:video"+h+"b="+d+":"+c+h);return a},removeSdparta:function(a){__p&&__p();if(b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;a=a.split(h);var c="audio",d=!1,e=-1;for(var f=0;f<a.length;f++){var g=a[f];g.indexOf("m=audio")===0&&(c="audio");g.indexOf("m=video")===0&&(d=!0,c="video");g.indexOf("a=mid:sdparta_")===0&&(a[f]="a=mid:"+c);g.indexOf("a=group:BUNDLE sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio sdparta_")===0&&(e=f);g.indexOf("a=group:BUNDLE audio video sdparta_")===0&&b("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}e>-1&&(d?a[e]="a=group:BUNDLE audio video":a[e]="a=group:BUNDLE audio");return a.join(h)},constructMidMap:function(a){if(!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return{answerSdpMap:null,offerSdpMap:null};a=a.split(h);var c={},d={},e=null;a.forEach(function(b){b.startsWith("m=audio")?e="audio":b.startsWith("m=video")?e="video":b.startsWith("m=")?e=null:b.startsWith("a=mid:")&&e&&(a=b.split("a=mid:")[1],a!==e&&(c[a]=e,d[e]||(d[e]=a)))});return{offerSdpMap:Object.keys(c).length?c:null,answerSdpMap:Object.keys(d).length?d:null}},transformSdpMids:function(a,c){__p&&__p();if(c==null||!b("RTWebClientFeatureGating").shouldApplySdpMidTranslation())return a;var d=c,e=a.split(h);c=-1;e.forEach(function(b,f){if(b.startsWith("a=group:BUNDLE"))c=f;else if(b.startsWith("a=mid:")){a=b.split("a=mid:")[1];b=d[a]||a;e[f]="a=mid:"+b}});if(c>-1){var f=e[c].split("a=group:BUNDLE ")[1].split(" ");f=f.map(function(a){return d[a]||a});e[c]="a=group:BUNDLE "+f.join(" ")}return e.join(h)},useDTLSOverCrypto:function(a){if(!(b("UserAgent").isBrowser("Chrome >= 57")||b("UserAgent").isBrowser("Opera >= 44")))return a;return!/^a=fingerprint:/m.test(a)?a:a.split(h).filter(function(a){return a.indexOf("a=crypto:")!==0}).join(h)},validateOfferSdp:function(a,b){__p&&__p();if(a.split(":")[0]==="LIVE"){a=/^m=/;var c=/^m=audio/,d=/^m=video/,e=/^a=ssrc:/;b=b.split(h);var f=[];for(var g=b.length-1;g>=0;g--)a.test(b[g])&&f.push(b.splice(g));var i=!1,j=!1;f.forEach(function(a){c.test(a[0])&&!i?i=a.some(function(a){return e.test(a)}):d.test(a[0])&&!j&&(j=a.some(function(a){return e.test(a)}))});return i&&j}return!0},_removeCodecID:function(a,b){var c=a.findIndex(function(a){a=a.match(/^a=rtpmap:(\S+)\s/);return a&&a[1]===b?!0:!1}),d=a.findIndex(function(a){return/^m=video/.test(a)});return c===-1||d===-1?a:p(a,c,d)},_getAllCodecIds:function(a,b){__p&&__p();var c=a.findIndex(function(a){return/^m=video/.test(a)});if(c===-1)return[];var d=new RegExp("^a=rtpmap:\\S+\\s+"+b+"\\/"),e=[];a.forEach(function(b,f){if(d.test(b)){b=m(a[f]);a[c].indexOf(b)>0&&e.push(b)}});return e},_getCodecIDMatchingH264Profile:function(a,b){var c=b.levelAsymmetryAllowed?"1":"0",d=b.packetizationMode?"1":"0";c=new RegExp("^a=fmtp:(\\S+)\\s+level-asymmetry-allowed="+c+";packetization-mode="+d+";profile-level-id="+b.profileLevelId);for(var d=0;d<a.length;d++){b=a[d].match(c);if(b)return b[1]}return null},pickSpecificH264ProfileIfExists:function(a,b){var c=this,d=a.split(h),e=this._getCodecIDMatchingH264Profile(d,b);if(!e)return a;b=this._getAllCodecIds(d,"H264");return b.reduce(function(a,b){return b!==e?c._removeCodecID(a,b):a},d).join(h)},clearFirefoxInactiveDataChannelBlock:function(a){__p&&__p();if(!b("UserAgent").isBrowser("Firefox")||b("RTWebClientFeatureGating").preserveFirefoxInactiveDataChannelBlock())return a;var c=a.split(h),d=c.findIndex(function(a){return a.startsWith("m=application")});if(d===-1)return a;var e=c.slice(d),f=e.findIndex(function(a,b){return b>0&&a.startsWith("m=")});f!==-1&&(e=e.slice(0,f));if(e[0]!=null&&e[0].endsWith("0")&&e.some(function(a){return a.startsWith("a=inactive")})){f=e.findIndex(function(a){return a.startsWith("c=")});return[].concat(c.slice(0,d+1+(f!==-1?f:0)),c.slice(d+e.length),[""]).join(h)}return a},addFBFeatures:a,getFBFeatures:c,addSSRCContentType:d};function a(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(c.length<1)return a;var e=q(a),f=e[0],i=e[1],j=f.split(h),k=r(j),l=j.filter(function(a){return!a.startsWith(g)}),m=1+l.map(function(a){return a?a.substr(0,2):""}).lastIndexOf("a=")||l.length;return[].concat(l.slice(0),s([].concat(k,c)).map(function(a){return""+g+a}),l.slice(m),[i?[i.trim(),""].join(h):""]).join(h)}function c(a){a=q(a);a=a[0];return r(a.split(h))}function q(a){if(!a)return["",""];var b=a.trim().split(h),c=0;while(c<b.length){if(b[c].startsWith("m="))break;c++}return c===b.length?[a.trim(),""]:[b.slice(0,c).join(h).trim(),b.slice(c).join(h).trim()]}function r(a){return s(a.filter(function(a){return a.startsWith(g)}).map(function(a){return a.substr(g.length)}))}function s(a){__p&&__p();var b=Object.create(null);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e&&(b[e]=!0)}return Object.keys(b).sort()}function d(a,b){__p&&__p();var c=a.split(h);b.forEach(function(a,b){__p&&__p();var d=new RegExp("^a=ssrc:\\d+ label:"+b);b=c.findIndex(function(a){return d.test(a)});if(b!==-1){var e=c[b].trim().split(" ")[0];if(/^a=ssrc:\d+$/.test(e)){e=e+" x-fb-content:"+a;c.splice(b+1,0,e)}}});return c.join(h)}e.exports=f}),null);
__d("FBRTCMessage",["FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport"],(function(a,b,c,d,e,f){__p&&__p();var g="mobile";a=function(){"use strict";__p&&__p();function a(a){__p&&__p();if(!this.$1(a))throw new Error("invalid webrtc message");this.originalMessageData=a;this.peerID=a.from;this.callID=parseInt(a.call_id,10);this.msg=JSON.parse(a.payload);this.msg.json_payload&&(this.escalationName=this.msg.sessionName,this.msg=this.msg.json_payload);this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=a.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$2();this.$3();this.$4();this.$5()}var c=a.prototype;c.$1=function(a){return a.from&&a.call_id&&a.payload};c.$2=function(){if(this.peerSupportsVideoInterop)return;this.isFromMobile()&&this.disableVideo()};c.disableVideo=function(){this.msg.sdp&&(this.msg.sdp=b("FBRTCSdpUtils").disableVideo(this.msg.sdp)),(this.msgType===b("FBRTCConstants").PayloadType.SET_VIDEO||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ANSWER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER)&&(this.msg.videoon=!1)};c.$3=function(){this.isFromMobile()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE&&(this.msg.sdp=b("FBRTCSdpUtils").removeRED(this.msg.sdp))};c.$4=function(){if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_h264");a.getBool("allow_h264",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeH264(this.msg.sdp))}};c.$5=function(){if(this.isFromMobile()&&b("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==b("FBRTCConstants").PayloadType.ICE_CANDIDATE){var a=b("FBRTCExperiment").gen("rtc_browser_use_vp9");a.getBool("allow_vp9",!1)||(this.msg.sdp=b("FBRTCSdpUtils").removeVP9(this.msg.sdp))}};c.isOffer=function(){return this.msgType===b("FBRTCConstants").PayloadType.OFFER};c.isFromMobile=function(){return this.source===g};c.isRemoteVideoSupported=function(){return!this.msg.sdp||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE?!0:b("FBRTCSdpUtils").isVideoSupported(this.msg.sdp)};c.isRetry=function(){return!!this.msg.flag};c.isForCall=function(a,c){return this.escalationName&&(this.msgType===b("FBRTCConstants").PayloadType.HANGUP||this.msgType===b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY)?c===this.escalationName:!a||a===this.callID||this.msgType===b("FBRTCConstants").PayloadType.OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===b("FBRTCConstants").PayloadType.ICE_CANDIDATE};c.getSignalingExperiments=function(){if(this.isFromMobile()){if(!this.msg.experiments)return["sdp_update"];this.msg.experiments.includes("sdp_update")||this.msg.experiments.push("sdp_update")}return this.msg.experiments};return a}();e.exports=a}),null);
__d("FBRTCMessageDedup",[],(function(a,b,c,d,e,f){var g={};a={check:function(a,b,c){g[a]||(g[a]={});g[a][b]||(g[a][b]={});if(g[a][b][c])return!1;g[a][b][c]=!0;return!0}};e.exports=a}),null);
__d("RTCAppData",["FacebookAppIDs","FBRTCExperiment","RTWebClientFeatureGating","URI","VFDesktopHelper","WorkplaceChatHelper","gkx","isFacebookURI","isMessengerDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAppID:function(){if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID();else if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return Number(b("VFDesktopHelper").getAppID());return b("FacebookAppIDs").WWW},getChannelManagerAppName:function(){switch(g.getMWAppID()){case b("FacebookAppIDs").MESSENGERDOTCOM.toString():return"messenger_dot_com";case b("FacebookAppIDs").WWW.toString():return"www";case b("FacebookAppIDs").BONFIRE_FOR_WWW.toString():return"bonfire_for_www";case b("FacebookAppIDs").WORKPLACE_DESKTOP.toString():return"workplace";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_MACOS.toString():return"desktop_video_chat";case b("FacebookAppIDs").MESSENGER_DESKTOP_ARCHON_WINDOWS.toString():return"desktop_video_chat_for_windows";default:return"desktop"}},_getWorkplaceChatDesktopAppID:function(){return b("WorkplaceChatHelper").getAppID()||b("FacebookAppIDs").WORKPLACE_DESKTOP},getMWAppID:function(){__p&&__p();if(b("VFDesktopHelper").isDesktopApp()&&b("gkx")("794738"))return b("VFDesktopHelper").getAppID();if(b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1))return b("FacebookAppIDs").MQTT_WEB.toString();if(!b("RTWebClientFeatureGating").shouldUseRealMultiwayAppID())return b("FacebookAppIDs").CHATPROXY_WEB.toString();var a=new(b("URI"))(window.location.href),c=new(b("URI"))(window.location.href).domain;if(!c)return b("FacebookAppIDs").CHATPROXY_WEB.toString();if(b("WorkplaceChatHelper").isDesktopChatApp())return this._getWorkplaceChatDesktopAppID().toString();else if(b("isFacebookURI")(a)&&(c.startsWith("www")||c.startsWith("m")))return b("FacebookAppIDs").WWW.toString();else if(b("isMessengerDotComURI")(a))return b("FacebookAppIDs").MESSENGERDOTCOM.toString();else return b("FacebookAppIDs").CHATPROXY_WEB.toString()}};e.exports=g}),null);
__d("RTCAppDispatcher",["ExplicitRegistrationDispatcher","objectValues"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.explicitlyRegisterStoresInMap=function(a){this.explicitlyRegisterStores(b("objectValues")(a))};return c}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("RTCOneVCStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({meetingID:null,meetingPassword:null,participants:[]}));e.exports=a}),null);
__d("RTCOneVCStore",["invariant","FBRTCConfig","FluxReduceStore","RTCAppDispatcher","RTCOneVCStoreState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("RTCAppDispatcher"))||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCOneVCStoreState"))()};d.reduce=function(a,b){switch(b.type){case"SET_MEETING_ID":return a.set("meetingID",b.meetingID);case"SET_MEETING_PASSWORD":return a.set("meetingPassword",b.meetingPassword);case"STORE_PARTICIPANTS":b=h(b.participants);return a.set("participants",b);default:return a}};d.getParticipantsSummary=function(){var a=this.getState().participants;return a.length===0?{audioParticipants:0,videoParticipants:0}:a.reduce(function(a,b){b=b.video_mute.some(function(a){return a!==!1});return b?{audioParticipants:a.audioParticipants+1,videoParticipants:a.videoParticipants}:{audioParticipants:a.audioParticipants,videoParticipants:a.videoParticipants+1}},{audioParticipants:0,videoParticipants:0})};d.getParticipants=function(){return this.getState().participants};return c}(b("FluxReduceStore"));a.__moduleID=e.id;function h(a){var c=b("FBRTCConfig").getMeetingID();c!=null||g(0,11961);var d="Facebook (Meeting ID: "+c+")";return a.filter(function(a){return!a.peer_name.includes(d)})}e.exports=new a()}),null);
__d("FBRTCVersionDetection",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f){__p&&__p();a={isChrome:function(){return b("UserAgent").isBrowser("Chrome")},isFirefox:function(){return b("UserAgent").isBrowser("Firefox")},isChromium:function(){return!!navigator.webkitGetUserMedia},webrtcVersion:function(){if(this.isFirefox()||this.isChrome())return b("UserAgentData").browserVersion||0;if(this.isChromium()){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}};e.exports=a}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("RTCEndCallReason",["FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode","RTWebStrings"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").CallEndReason,h=b("FBRTCConstants").CollabCallEndSubreason;a=function(){__p&&__p();function a(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("FBRTCConstants").endCallReasonFromString(a):this.$1=a}var c=a.prototype;c.setSubreason=function(a){this.$2=a;return this};c.getSubreason=function(){return this.$2};c.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};c.getRemoteEnded=function(){return this.$3==="remote"};c.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};c.$4=function(){return b("FBRTCConstants").callEndReasonString(this.$1)};c.getReasonID=function(){return this.$1};c.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};c.$5=function(a){__p&&__p();switch(this.$1){case g.NO_ANSWER_TIMEOUT:case g.IGNORE_CALL:return b("RTWebStrings").noAnswer;case g.OTHER_NOT_CAPABLE:if(this.$2===h.MCU_INVALID_STREAM_CONFIGURATION)return b("RTWebStrings").invalidStreamConfiguration;case g.INCOMING_TIMEOUT:case g.NO_PERMISSION:case g.OTHER_CARRIER_BLOCKED:return b("RTWebStrings").unreachable;case g.SIGNALING_MESSAGE_FAILED:case g.WEBRTC_ERROR:case g.NO_UI_ERROR:case g.CALLER_NOT_VISIBLE:case g.CLIENT_ERROR:return b("RTWebStrings").callFailed;case g.UNSUPPORTED_VERSION:return b("RTWebStrings").cannotConnect;case g.IN_ANOTHER_CALL:return b("RTWebStrings").inAnotherCall;case g.CARRIER_BLOCKED:return b("RTWebStrings").switchToWiFi;case g.CLIENT_INTERRUPTED:return b("RTWebStrings").callInterrupted;case g.HANGUP_CALL:case g.ACCEPT_AFTER_HANGUP:return a?"":b("RTWebStrings").callEnded;case g.CONNECTION_DROPPED:return b("RTWebStrings").connectionLost;case g.OTHER_INSTANCE_HANDLED:return null;case g.CLIENT_ENCRYPTION_ERROR:return b("RTWebStrings").clientEncryptionError;case g.INACTIVE_TIMEOUT:return b("RTWebStrings").inactive;default:return null}};c.$6=function(){__p&&__p();var a;if(this.$1!==g.OTHER_NOT_CAPABLE&&this.$1!==g.SIGNALING_MESSAGE_FAILED&&this.$1!==g.HANGUP_CALL&&this.$1!==g.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case h.REMOTE_PEER_HANGUP:return"Call ended";case h.REMOTE_PEER_REJECT:return"Call declined";case h.CLOSED_BY_MCU:return"Call expired";case h.CLOSED_AS_STALE:return"Server failed, call is stale";case h.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case h.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case h.LOST_MCU_CONNECTION:return"MCU Media connection failed";case h.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case h.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case h.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case h.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case h.INVALID_MEETING_ID:return"Invalid meeting ID";case h.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};a.fromHangupReason=function(c){switch(c){case b("FBRTCHangupReason").IGNORE_CALL:return new a(g.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new a(g.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new a(g.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new a(g.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new a(g.CLIENT_INTERRUPTED);default:return new a(g.HANGUP_CALL)}};a.subreasonFromDismissRequest=function(a){if(!a)return null;switch(a.reason){case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return"REMOVED_BY_PARTICIPANT";default:return null}};a.fromDismissRequest=function(c){__p&&__p();if(!c)return new a(g.HANGUP_CALL);switch(c.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new a(g.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new a(g.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new a(g.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new a(g.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new a(g.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new a(g.SIGNALING_MESSAGE_FAILED);default:return new a(g.HANGUP_CALL)}};a.fromResponseStatusCode=function(c){switch(c){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new a(g.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new a(g.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new a(g.CLIENT_ERROR);default:return new a(g.HANGUP_CALL)}};return a}();e.exports=a}),null);
__d("RTCMediaDevices",["invariant","Promise","RTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("RTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("RTCOnDeviceChangePoller",["Promise","FBRTCLogger","RTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();a.isNeeded=function(){var a=navigator;a=a.mediaDevices;return!b("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){__p&&__p();var c=this;this.$1=[];this.$2="";this.$4=null;this.$7=function(){__p&&__p();b("RTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===c.$2)return;c.$2=a;for(var a=c.$1,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e()}catch(a){}}})["catch"](function(a){return b("Promise").resolve()}).then(function(){c.$4=window.setTimeout(c.$7,c.$3)})["catch"](function(a){})};this.$3=a}var c=a.prototype;c.add=function(a){this.$1.push(a),this.$5()};c.remove=function(a){this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};c.$5=function(){if(this.$4!==null)return;this.$4=window.setTimeout(this.$7,0)};c.$6=function(){if(this.$1.length>0)return;this.$4!==null&&(window.clearTimeout(this.$4),this.$4=null)};return a}();e.exports=a}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){window.clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=window.setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return window.setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("RTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("RTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","FBRTCSupport","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("FBRTCConstants").RTCConstraints;var g=b("FBRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);if(b("FBRTCSupport").isMobileDevice())return{facingMode:{ideal:"user"}};d=n(a);a=m(a)?k:p(d);return babelHelpers["extends"]({width:o(d,"width",a),height:o(d,"height",a),frameRate:o(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!s(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==void 0)if(Number.isFinite(i)){var k;d.push((k={},k[r(h,"min")]=i,k),(k={},k[r(h,"max")]=i,k))}else{d.push((k={},k[r(h)]=i,k))}if(!b)if(j!==void 0&&!Number.isFinite(j))c[r(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[r(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){return a===g.HD_IDEAL_LQ_REQUIRED_VIDEO||a===g.FHD_IDEAL_LQ_REQUIRED_VIDEO}function n(a){switch(a){case g.FHD_VIDEO:case g.FHD_IDEAL_LQ_REQUIRED_VIDEO:return h;case g.HD_VIDEO:case g.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function o(a,b,c){c===void 0&&(c=p(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(q(a)[b],d),ideal:d}}function p(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function q(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function r(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function s(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("generateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCUtils","RTCAudioTrackNoiseDetector","RTCConfig","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoTrackActivityDetector","RTWebClientFeatureGating","RTWebUserActionLogger","URI","UserAgent","UserMediaRequestError","generateRTCTransactionID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,i=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR,j={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isRoomCall:function(a){return a.split(":")[0]==="ROOM"},isPeerCall:function(a){return a.split(":")[0]==="PEER"},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return j.isGroupCall(a)||j.isMessengerCall(a)||j.isRoomCall(a)||j.isAlohaCall(a)||j.isWatchPartyCall(a)},getPeerID:function(a){if(j.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!j.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!j.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,c,d,e,f){__p&&__p();a={type:a,transactionId:b("generateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);if(b("RTWebClientFeatureGating").canUseMultiwaySandbox()){e=window.location.href;d=j.getSandboxingTierFromURIOrEmpty(e,"multiway_www_tier");f=j.getSandboxingTierFromURIOrEmpty(e,"multiway_core_tier");d&&(c.multiwayWwwTier=d);f&&(c.multiwayCoreTier=f)}a.extensions=c;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(c){if(c.some(function(a){return a.kind==="videoinput"})){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] At least one device has videoinput.  Keeping constraints "+JSON.stringify(a)});return a}b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[maybeRemoveVideoConstraint] No devices capable of videoinput.",errorDomain:"GetUserMedia",errorType:"Removing video stream by setting video constraint to false."});return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,c){__p&&__p();return a.video?j.maybeRemoveVideoConstraint(a).then(function(a){return j.getUserMedia(a,c)})["catch"](function(c){__p&&__p();if(a.video){if(c.name==="NotFoundError"||c.name==="StreamFailedToStart"){var d="Audio Fallback Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video stream",errorDomain:"GetUserMedia",errorType:d});return j.getUserMedia({video:!1,audio:a.audio})}if(c.name==="OverconstrainedError"){d="Video Constraints Error Recovery: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Retrying getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:d});return j.getUserMedia({video:!0,audio:a.audio})}}d="Error: "+JSON.stringify(c)+" constraints: "+JSON.stringify(a);b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithAudioFallback] Throwing other error",errorDomain:"GetUserMedia",errorType:d});throw c}):j.getUserMedia(a,c)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,c){return j.getUserMedia(a,c)["catch"](function(c){if(a.video&&c.name==="OverconstrainedError"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMediaWithFallbackToEmptyVideoConstraints] Fallback getUserMedia with no video constraints",errorDomain:"GetUserMedia",errorType:"Original Constraints: "+JSON.stringify(a)});return j.getUserMedia(babelHelpers["extends"]({},a,{video:!0}))}throw c})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,"unknown")}d=c&&c.optionalConstraintsOnly&&a.video;var f=j._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,d){e&&typeof e.getUserMedia==="function"?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Newer version"}),a(e.getUserMedia(f).then(function(a){return j._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))}))):g?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Backwards compatible version"}),g.call(navigator,f,a,d)):(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"[getUserMedia] Not supported"}),d("getUserMedia not supported"))})["catch"](function(a){var c=a.message,d=a.name,e=a.constraint;b("RTWebUserActionLogger").logError({errorDomain:"GetUserMedia",errorType:(d?d:"unknown GetUserMedia error")+":"+(c?" "+c:"")+(e?" "+e:"")});throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==void 0&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!==void 0&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,b){return a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var k=function d(k){j.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===h||a.message===i)f({stream:d,err:a});else{j.stopMediaStream(d);throw a}})},g)["catch"](function(a){k>0?d(k-1):g(a)})};k(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){j.isFullScreen()?j.exitFullScreen():j.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallSubreasonFromDismissRequest:function(a){return b("RTCEndCallReason").subreasonFromDismissRequest(a)},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&(a.stop(),a.dispatchEvent(new Event("ended")))})},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]},isDevicePresent:function(a,b){return a==null?!1:a.some(function(a){return a.deviceId===b})}};e.exports=j}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","VFDesktopHelper","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SCREEN_SHARING_NOT_SUPPORTED",h="UNEXPECTED_ERROR",i={SCREEN_SHARING_NOT_SUPPORTED:g,getUserMedia:function(a,c,d){__p&&__p();if(b("UserAgent").isBrowser("Chrome")){var e;b("WorkplaceChatHelper").isDesktopChatApp()?e=b("WorkplaceChatHelper").getScreenSharingSourceID():b("VFDesktopHelper").isDesktopApp()?e=b("VFDesktopHelper").getScreenSharingSourceID():e=b("CollabRTCChromeScreenSharing").getSourceID(d,c);return e.then(function(c){return b("RTCUtils").getUserMedia(b("RTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return window.setTimeout(function(){a.active||i.stop()})})}return a})}else if(b("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(g)}));return b("Promise").reject(new Error(g))},stop:function(){if(b("UserAgent").isBrowser("Chrome")){if(b("WorkplaceChatHelper").isDesktopChatApp())return b("WorkplaceChatHelper").stopScreenSharing();return b("VFDesktopHelper").isDesktopApp()?b("VFDesktopHelper").stopScreenSharing():b("CollabRTCChromeScreenSharing").stop()}return b("Promise").reject(new Error(h))}};e.exports=i}),null);
__d("FBRTCScreenSharingUtils",["FBRTCExperiment","FBRTCSupport","FBRTCVersionDetection","RTCConfig","RTCUtils"],(function(a,b,c,d,e,f){"use strict";a={isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("FBRTCSupport").isMobileDevice()&&(b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()>=34||b("RTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;return!a.remoteSupport("www")&&!a.remoteSupport("mweb")?b("RTCConfig").ScreenSharingToMobileGK?!0:b("FBRTCExperiment").gen("webrtc_enable_screen_sharing").getBool("can_share_to_mobile",!1):!1}};e.exports=a}),null);
__d("RTCSignalingExperiments",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCScreenSharingUtils","FBRTCSupport","FBRTCVersionDetection","UserAgent","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(b){this.$2=new Set(),this.$1=new Set(a.getLocal()),b&&(this.$2=new Set(b))}var c=a.prototype;c.getLocal=function(){return Array.from(this.$1)};c.setRemote=function(b){return!b?this:new a(b)};c.getRemote=function(){return Array.from(this.$2)};c.support=function(a){return this.localSupport(a)&&this.remoteSupport(a)};c.localSupport=function(a){return this.$1.has(a)};c.remoteSupport=function(a){return this.$2.has(a)};a.getLocal=function(){var a=[];(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Firefox >= 38"))&&a.push("sdp_update");g()&&a.push("multiple_streams_plan_b");b("FBRTCScreenSharingUtils").canUserReceiveScreenSharing()&&a.push("screen_sharing");h()&&a.push("multiple_streams_unified");b("FBRTCSupport").isMobileDevice()?a.push("mweb"):a.push("www");b("FBRTCSupport").videoEscalationByUnmuteWorkaround()&&a.push("video_escalation_by_unmute");return a};a.shouldCapMWBitrate=function(){return b("FBRTCExperiment").gen("rtc_www_mw_video_quality").getBool("cap_bitrate",!1)};a.shouldCapAudioBitrate=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("use_audio_bitrate_cap",!1)};a.shouldPreferIsac=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!0:b("FBRTCExperiment").getMediaQualityExperiments().getBool("prefer_isac",!0)};a.shouldAlwaysSetMWDescriptionsOnSMU=function(){return!Boolean(b("qex")._("897144"))};a.shouldEnableAudioNack=function(){return b("FBRTCConfig").isVCEndpointCall()||b("CurrentUser").isWorkUser()?!1:b("FBRTCExperiment").getMediaQualityExperiments().getBool("enable_audio_nack",!1)};return a}();function g(){return(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))&&b("FBRTCVersionDetection").webrtcVersion()>=34}function h(){return b("UserAgent").isBrowser("Firefox")&&b("FBRTCVersionDetection").webrtcVersion()>=40}e.exports=a}),null);
__d("generateRTCSignalingMessageID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("FBRTCMessageSender",["errorCode","CurrentUser","FBRTCConstants","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCSupport","FBRTCUtils","PresenceProperties","RTCAppData","RTCOneVCStore","RTCSignalingExperiments","SiteData","XCollabCallSendMessageController","XVideoCallSendMessageController","generateRTCSignalingMessageID"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;a=function(){"use strict";__p&&__p();function a(){this.onSendFailure=null,this.$1=b("FBRTCLogger").getInstance()}var c=a.prototype;c.sendOffer=function(a,c,d,e,f,g){return this.$2(b("FBRTCConstants").PayloadType.OFFER,a,c,d,e,f,null,g)};c.sendAnswer=function(a,c,d,e,f,g){return this.$2(b("FBRTCConstants").PayloadType.ANSWER,a,c,d,e,f,g)};c.sendPCRestartOffer=function(a,c,d,e,f){return this.$2(b("FBRTCConstants").PayloadType.PCRESTART_OFFER,a,c,d,e,f)};c.sendSdpUpdate=function(a,c,d,e,f){return this.$2(b("FBRTCConstants").PayloadType.SDP_UPDATE,a,c,d,e,f)};c.resendSdpMessage=function(a,b){b.flag=1,this.$3(a,b)};c.resendPayload=function(a,b){b.flag=1,this.$4(a,b)};c.$2=function(a,c,d,e,f,g,h,i){__p&&__p();d=this.$5(d,a);d.sdp=e;a===b("FBRTCConstants").PayloadType.OFFER&&(d.browser_supports_escalation=b("FBRTCSupport").isGroupCallWebtrcSupported(),d.handlescollision=!0,d.pranswer=!1,i&&(d.call_trigger=i));a===b("FBRTCConstants").PayloadType.ANSWER&&h&&(d.escalation_conference_name=h.escalationConferenceName,d.negotiated_escalation_support=h.negotiatedEscalationSupport);(a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER)&&(d.icerestart=!1,d.experiments=b("RTCSignalingExperiments").getLocal());d.videoon=f;d.attributes=g;d.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());this.$3(c,d);return d};c.sendIceCandidate=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.ICE_CANDIDATE);c.sdp_mid=d.sdpMid;c.label=d.sdpMLineIndex;c.sdp=d.candidate;this.$4(a,c)};c.sendHangup=function(a,c,d,e,f){c=this.$5(c,b("FBRTCConstants").PayloadType.HANGUP);c.reason=b("FBRTCConstants").callEndReasonString(d);c.subreason=f||"";this.$4(a,c,e,!0)};c.sendOtherDismiss=function(a){a=this.$5(a,b("FBRTCConstants").PayloadType.OTHER_DISMISS);this.$4(b("CurrentUser").getID(),a)};c.sendOfferAck=function(a,c,d,e){e===void 0&&(e=new Map()),this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_ACK,e)};c.sendOfferNack=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.OFFER_NACK,new Map([["error_code",1356043]]))};c.sendAnswerAck=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.ANSWER_ACK)};c.sendAck=function(a,c,d){this.$6(a,c,d,b("FBRTCConstants").PayloadType.ACK,new Map([["ack_type",d.type]]))};c.sendMuteStateUpdate=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.SET_VIDEO);c.videoon=d;this.$4(a,c)};c.sendClientReportedEvent=function(a,c,d){c=this.$5(c,b("FBRTCConstants").PayloadType.CLIENT_REPORTED_EVENT);c.event_type=d;this.$4(a,c)};c.sendVideoEscalationRequest=function(a,b,c){return this.sendVideoRequestResponse(a,b,0,c)};c.sendVideoRequestResponse=function(a,c,d,e){c=this.$5(c,b("FBRTCConstants").PayloadType.VIDEO_REQUEST);c.ack_id=d;c.videoon=e;c.capability=b("PresenceProperties").getProperties();this.$4(a,c);return c};c.sendMsgAck=function(){};c.sendOk=function(){};c.sendPranswer=function(){};c.sendIcerestartAnswer=function(){};c.$5=function(a,c){var d=b("generateRTCSignalingMessageID")();a={version:h,type:c,call_id:a,msg_id:d};this.$7(c)&&(a.supports_video_interop=!0);return a};c.$7=function(a){return a===b("FBRTCConstants").PayloadType.OFFER||a===b("FBRTCConstants").PayloadType.ANSWER||a===b("FBRTCConstants").PayloadType.PRANSWER||a===b("FBRTCConstants").PayloadType.ICERESTART_OFFER||a===b("FBRTCConstants").PayloadType.ICERESTART_ANSWER||a===b("FBRTCConstants").PayloadType.PCRESTART_OFFER||a===b("FBRTCConstants").PayloadType.PCRESTART_ANSWER||a===b("FBRTCConstants").PayloadType.SDP_UPDATE||a===b("FBRTCConstants").PayloadType.SET_VIDEO||a===b("FBRTCConstants").PayloadType.VIDEO_REQUEST};c.$3=function(a,b){this.$4(a,b,!1,!0,!0)};c.$6=function(a,c,d,e){var f=(arguments.length<=4?void 0:arguments[4])||new Map(),g=this.$5(c,e);g.ack_id=d.msg_id;d.flag===1&&(g.flag=1);g.ull=b("FBRTCConstants").convertFromUploadLogLevel(b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel());f.forEach(function(a,b,c){g[b]=a});this.$4(a,g)};c.$4=function(a,c,d,e,f){__p&&__p();var g=c.msg_id,h={peer_id:a,call_id:c.call_id,msg_id:g,msg_type:c.type},i=b("FBRTCUtils").isPeerVCEndpoint(a);if(i){var j=b("RTCOneVCStore").getState(),k=j.meetingID;j=j.meetingPassword;k!=null&&(c.meeting_id=k);j!=null&&(c.meeting_pass=j)}k=(i?b("XCollabCallSendMessageController"):b("XVideoCallSendMessageController")).getURIBuilder().setInt("recipient_id",a).setInt("msg_id",g).setString("message_info",JSON.stringify(c)).getURI();j=null;e&&(j=this.$4.bind(this,a,c,d,!1,f));i=this.$8.bind(this,h);g=this.$9.bind(this,h,j,f);b("FBRTCUtils").sendServerRequest(k,i,g,d);this.onMessageSent&&this.onMessageSent(a,c);this.$1.logSentMessage(a,c.call_id,c)};c.$8=function(a){this.$1.logSentMessageSuccess(a.peer_id,a.call_id,a.msg_type,a.msg_id)};c.$9=function(a,c,d,e){__p&&__p();var f="UNKNOWN_ERROR";e&&(f=e.getError?e.getError():e);this.$1.logSentMessageFailure(a.peer_id,a.call_id,a.msg_type,a.msg_id,f);e=null;f===1356001||f===1356049?e=b("FBRTCConstants").CallEndReason.NO_PERMISSION:f===1356046||f===1356045?e=b("FBRTCConstants").CallEndReason.CALLER_NOT_VISIBLE:(f===1356003||f===1356002||f===1356044)&&(e=b("FBRTCConstants").CallEndReason.OTHER_NOT_CAPABLE);if(!e&&c){c();return}d&&this.onSendFailure&&(e||(e=b("FBRTCConstants").CallEndReason.SIGNALING_MESSAGE_FAILED),this.onSendFailure(e,f,a.msg_type))};return a}();e.exports=a}),null);
__d("FBRTCPCConfig",["FBRTCConfig","FBRTCVersionDetection"],(function(a,b,c,d,e,f){__p&&__p();var g="stun:stun.fbsbx.com:3478";function h(a,c,d){if(b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34){var e={urls:a};c!==void 0&&d!==void 0&&(e.username=c,e.credential=d);return[e]}e=[];for(var f=0;f<a.length;f++)c!==void 0&&d!==void 0?e.push({url:a[f],username:c,credential:d}):e.push({url:a[f]});return e}a=function(){"use strict";__p&&__p();function a(){this.sslPort="",this.tcpPort="",this.turnIP="",this.turnPassword="",this.turnUsername="",this.udpPort=""}var c=a.prototype;c.setTurnCredentials=function(a){this.turnIP=a.ip,this.udpPort=a.udp_port,this.tcpPort=a.tcp_port,this.sslPort=a.ssl_tcp_port,this.turnUsername=a.username,this.turnPassword=a.password};c.getConfig=function(){if(b("FBRTCConfig").isVCEndpointCall())return{iceServers:[]};var a=h([g]).concat(h(this.$1(),this.turnUsername,this.turnPassword));return{iceServers:a}};c.getConstraints=function(a){a===void 0&&(a=!1);var c=!0;b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()<57&&a&&(c=!1);return{mandatory:{},optional:[{DtlsSrtpKeyAgreement:c}]}};c.$2=function(a){__p&&__p();var b=this;a=function(a){switch(a){case"tcp":return{ip:b.turnIP,port:b.tcpPort,transport:a};case"udp":return{ip:b.turnIP,port:b.udpPort,transport:a};case"ssl":return{ip:b.turnIP,port:b.sslPort,transport:"tcp"};default:return{ip:b.turnIP,port:b.udpPort,transport:null}}}(a);var c=a.ip,d=a.port;a=a.transport;return!((c==null?void 0:c.length)&&(d==null?void 0:d.length))?null:a!=null&&a.length>0?"turn:"+c+":"+d+"?transport="+a:"turn:"+c+":"+d};c.$1=function(){if(b("FBRTCVersionDetection").isFirefox()&&b("FBRTCVersionDetection").webrtcVersion()<27)return[this.$2()].filter(Boolean);else return[this.$2("udp"),this.$2("tcp"),this.$2("ssl")].filter(Boolean)};return a}();e.exports=new a()}),null);
__d("FBRTCPeerConnectionHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={resetLocalStreams:function(a,b){var c=!1,d=a.getLocalStreams(),e=d.filter(function(a){return!b.includes(a)}),f=b.filter(function(a){return!d.includes(a)});(e.length>0||f.length>0)&&(c=!0);e.forEach(function(b){return a.removeStream(b)});f.forEach(function(b){return a.addStream(b)});return c},resetLocalStreamWithTrackAPI:function(a,b,c){__p&&__p();var d=!1,e=b.getVideoTracks().length>0?b.getVideoTracks()[0]:null,f=b.getAudioTracks().length>0?b.getAudioTracks()[0]:null,g=a.getSenders(),h=g.filter(function(a){return a.track&&a.track.kind==="video"}),i=g.filter(function(a){return a.track&&a.track.kind==="audio"});h=h.length===(e===null?0:1)&&i.length===(f===null?0:1);if(c||!h){g.filter(function(a){return a.track!==e&&a.track!==e}).forEach(function(b){d=!0,a.removeTrack(b)});f&&!g.some(function(a){return a.track===f})&&(d=!0,a.addTrack(f,b));e&&!g.some(function(a){return a.track===e})&&(d=!0,a.addTrack(e,b));return d}a.getSenders().forEach(function(a){a.track&&a.track.kind==="video"&&e!==a.track?a.replaceTrack(e):a.track&&a.track.kind==="audio"&&f!==a.track&&a.replaceTrack(f)});return d}};e.exports=a}),null);
__d("FBRTCRetriableMessage",["FBRTCConstants","clearTimeout","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();var g=1e4,h=7e3;a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=g,this.$3=2,this.$6=null}var c=a.prototype;c.sendMessage=function(a,c,d,e){__p&&__p();var f=e.sdp,g=e.hasVideo,i=e.attributes,j=e.multiwayInfo;e=e.callTrigger;this.$4=c;switch(a){case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.$5=this.$1.sendPCRestartOffer(c,d,f,g,i);break;case b("FBRTCConstants").PayloadType.OFFER:this.$5=this.$1.sendOffer(c,d,f,g,i,e);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$2=h;this.$5=this.$1.sendAnswer(c,d,f,g,i,j);break}this.$7()};c.isAckMsg=function(a){return this.$5&&this.$5.msg_id===a.ack_id};c.stopRetrying=function(){this.$6&&(b("clearTimeout")(this.$6),this.$4=null,this.$5=null,this.$6=null)};c.$7=function(){this.$6=b("setTimeout")(this.$8.bind(this),this.$2)};c.$8=function(){this.$3<1?this.emit("timeoutFailure"):(this.emit("sendingRetry"),this.$1.resendSdpMessage(this.$4,this.$5),this.$7(),this.$3-=1)};return a}();b("mixInEventEmitter")(a,{sendingRetry:!0,timeoutFailure:!0});e.exports=a}),null);
__d("FBRTCSoundController",["RTCConfig","RTWebUserActionLogger","Sound"],(function(a,b,c,d,e,f){__p&&__p();var g=[b("RTCConfig").ringtone_mp3_url,b("RTCConfig").ringtone_ogg_url],h=[b("RTCConfig").ringback_mp3_url,b("RTCConfig").ringback_ogg_url];a={playIncomingRingtone:function(a,c,d){var e=d.loop,f=d.isP2P;d=d.isUnsupportedDialog;d=d===void 0?!1:d;c=["incoming_ringtone",a.toString(),c].join("_");b("Sound").play(g,c,e);b("RTWebUserActionLogger").logEvent({callID:a.toString(),callType:f?"p2p":"mw",component:"incoming_ring_tone",eventName:"ring_tone_played",surface:d?"missed_call_dialog":"incoming_call_dialog"})},stopIncomingRingtone:function(){b("Sound").stop(g)},playRingbackTone:function(){b("Sound").play(h,null,!0)},stopRingbackTone:function(){b("Sound").stop(h)}};e.exports=a}),null);
__d("FBRTCStreamWrapper",["FBRTCUtils","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=100,h=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i;a=function(){"use strict";__p&&__p();function a(){this.$1=!0,this.$2=!0,this.$3=null,this.$4=null}var c=a.prototype;c.setStream=function(a,b){b===void 0&&(b=!0);var c=this.hasStream();this.stop();this.$5();this.$6();b&&(a.onaddtrack=this.$7.bind(this),a.onremovetrack=this.$7.bind(this),a.onended=this.$8.bind(this),c&&this.emit("tracksChanged"));this.$3=a};c.getStreamId=function(){return this.$3!=null?this.$3.id:null};c.getStream=function(){return this.$3};c.hasStream=function(){return!!this.$3};c.stop=function(){this.$3&&(a.stopStream(this.$3),this.$3=null)};c.hasVideoTracks=function(){return this.$3&&this.$3.getVideoTracks?this.$3.getVideoTracks().length>0:!0};c.hasVideo=function(){return this.$2&&this.hasVideoTracks()};c.hasAudioTracks=function(){return this.$3&&this.$3.getAudioTracks?this.$3.getAudioTracks().length>0:!0};c.hasAudio=function(){return this.$1&&this.hasAudioTracks()};c.attachToVideoTag=function(a){this.$3&&(a instanceof HTMLVideoElement&&(this.$4=a,b("FBRTCUtils").attachMediaStream(a,this.$3),this.$9(a)))};c.getAudioAnalyser=function(){if(this.$3){var a=this.$10(),b=a.createMediaStreamSource(this.$3);a=a.createAnalyser();a.fftSize=2048;b.connect(a);return a}return null};c.$10=function(){i||(i=new h());return i};c.toggleMuteAudio=function(){if(!this.hasAudioTracks())return;this.$1=!this.$1;this.$5()};c.$5=function(){if(this.$3){var a=this.$3.getAudioTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$1}};c.toggleMuteVideo=function(){this.$2=!this.$2,this.$2?this.$6():setTimeout(this.$6.bind(this),500),this.$7()};c.$6=function(){if(this.$3){var a=this.$3.getVideoTracks();for(var b=0;b<a.length;b++)a[b].enabled=this.$2}};c.setVideoEnabled=function(a){this.$2=a,this.$6(),this.$7()};c.$9=function(a){!this.hasVideo()||a.currentTime>0?this.$11(a):setTimeout(this.$9.bind(this,a),g)};c.$11=function(a){this.emit("streamStarted")};c.$8=function(){this.emit("streamEnded")};c.$7=function(a){this.$12(a)&&(this.$4!=null&&this.attachToVideoTag(this.$4)),this.emit("tracksChanged")};c.$12=function(a){return this.$4!=null&&a!=null&&a.type==="addtrack"&&a.track.kind==="video"};a.stopStream=function(a){a.active!=null&&a.active?a.getTracks().forEach(function(a){a.stop()}):a.stop!=null&&typeof a.stop==="function"&&a.stop()};return a}();b("mixInEventEmitter")(a,{streamStarted:!0,streamEnded:!0,tracksChanged:!0});e.exports=a}),null);
__d("FBRTCTurnDiscovery",["Promise","FBRTCLogger","FBRTCUtils","XVideoCallTurnDiscoveryController"],(function(a,b,c,d,e,f){__p&&__p();var g=3,h=null;a={requestTurnCreds:function(a,c,d){__p&&__p();d===void 0&&(d=g);if(h)return h;var e=1,f=b("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",e).setString("call_id",a).getURI();h=new(b("Promise"))(function(e,g){h(d);function h(d){b("FBRTCUtils").sendServerRequest(f,function(a){a=a.payload;return e(a)},function(){d>0?(b("FBRTCLogger").getInstance().logError(c,a,"Failed turn; going to retry"),h(d-1)):g(new Error("failed"))})}});return h}};e.exports=a}),null);
__d("XVideoCallSigningController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/init/",{peer_id:{type:"FBID",required:!0},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:!1},audio_only:{type:"Bool",defaultValue:!1},nonce:{type:"String"},meeting_id:{type:"Int"},meeting_pass:{type:"String"},initialize_video:{type:"Bool",defaultValue:!0}})}),null);
__d("FBRTCUrlManager",["invariant","Promise","regeneratorRuntime","CurrentUser","FBRTCConfig","FBRTCLogger","FBRTCSupport","FBRTCUtils","RTWebUserActionLogger","URI","XGroupCallController","XGroupCallSigningController","XVideoCallController","XVideoCallSigningController","XWirelessScreenSharingController","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){b("FBRTCLogger").getInstance().logCallAction(a,void 0,b("FBRTCLogger").CallAction.OLD_URI);return b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).getURI()}function i(a){if(b("CurrentUser").isEmployee()){var c=a.setSubdomain(b("CurrentUser").hasWorkUser()||b("CurrentUser").isWorkUser()?"fb":"www"),d="/intern/";return b("URI").getRequestURI().getPath().substr(0,d.length)!==d?c:c.setDomain(c.getDomain().toString().replace(/\.(intern|internmc|cstools)\./,"."))}return a}function j(a,c,d,e,f,g,h){a=b("XVideoCallController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return b("Promise").resolve(h?i(a):a)}function k(a){__p&&__p();var c,d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:c=a.callContext,d=a.callID,e=a.usersToRing,f=a.hasVideo,g=a.initializeVideo,h=a.multiwayCoreTier,i=a.multiwayWwwTier,j=a.nonce,k=a.serverInfoData;l=b("XGroupCallSigningController").getURIBuilder().setString("call_context",c).setInt("call_id",d).setFBIDSet("users_to_ring",e).setBool("has_video",f).setBool("initialize_video",g).setString("server_info_data",k).setString("nonce",j).setString("multiway_www_tier",i).setString("multiway_core_tier",h).getURI();return m.abrupt("return",new(b("Promise"))(function(a,c){b("FBRTCUtils").sendServerRequest(l,function(b){a(b.payload.uri)},function(a){c(a)})}));case 3:case"end":return m.stop()}},null,this)}var l=function(a){if(b("FBRTCConfig").disableURLManager())return;window.history.replaceState({},"",a)};function m(a){var c=b("XVideoCallController").getURIBuilder().setFBID("peer_id","0").getURI().getPath();return a.getPath()===c}function n(a,b){a&&(b&&g(0,11934))}a={onCallStarted:function(a){m(new(b("URI"))(window.location))&&l(h(a))},getGroupCallUri:function(a,c,d,e,f,g,h,i,j){__p&&__p();var l;return b("regeneratorRuntime").async(function(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:n(!e,f),l=0;case 2:if(!(l<3)){m.next=15;break}m.prev=3;m.next=6;return b("regeneratorRuntime").awrap(k({callContext:a,callID:c,usersToRing:d,hasVideo:e,initializeVideo:f,multiwayCoreTier:g,multiwayWwwTier:h,nonce:i,serverInfoData:j}));case 6:return m.abrupt("return",m.sent);case 9:m.prev=9,m.t0=m["catch"](3),b("FBRTCLogger").getInstance().logToConsole(m.t0);case 12:l++;m.next=2;break;case 15:return m.abrupt("return",b("XGroupCallController").getURIBuilder().setString("call_context",a).setInt("call_id",c).setFBIDSet("users_to_ring",d).setBool("has_video",e).setBool("initialize_video",f).setString("server_info_data",j).setString("nonce",i).setString("multiway_www_tier",h).setString("multiway_core_tier",g).getURI());case 16:case"end":return m.stop()}},null,this,[[3,9]])},getP2PCallUriWithNonce:function(a,c,d,e,f,g,h){__p&&__p();var i,k;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:h===void 0&&(h="");n(e,g);i=b("FBRTCUtils").isPeerVCEndpoint(a)||b("FBRTCUtils").isCollabTrigger(h);if(!(!i&&d&&b("FBRTCSupport").isGroupCallWebtrcSupported()&&b("gkx")("882838"))){l.next=8;break}k=b("XVideoCallSigningController").getURIBuilder().setFBID("peer_id",a).setInt("call_id",c).setBool("is_caller",d).setBool("audio_only",e).setString("nonce",f).setBool("initialize_video",g).getURI();return l.abrupt("return",new(b("Promise"))(function(h,l){b("FBRTCUtils").sendServerRequest(k,function(a){h(a.payload.uri)},function(k){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"signed_p2p_controller_rejected_response"}),h(j(a,c,d,e,f,g,i))})}));case 8:return l.abrupt("return",j(a,c,d,e,f,g,i));case 9:case"end":return l.stop()}},null,this)},getWirelessScreenSharingUri:function(a,c,d){c=b("XWirelessScreenSharingController").getURIBuilder().setFBID("peer_id",c).setInt("session_id",d).setString("nonce",a).getURI();return i(c)}};e.exports=a}),null);
__d("FBRTCUserSettings",["Promise","RTCMediaDevices","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={audioInput:"",audioOutput:"default",videoInput:"",remoteStream:null,_audioInputLabel:null,_videoInputLabel:null,isEnabled:function(){return Boolean(b("RTCMediaDevices").isSupported("enumerateDevices"))},selectAudioInputByLabel:function(a){this.audioInput||(this.audioInput=this._selectByLabel(a,this._audioInputLabel));return this.audioInput},selectVideoInputByLabel:function(a){this.videoInput||(this.videoInput=this._selectByLabel(a,this._videoInputLabel));return this.videoInput},_selectByLabel:function(a,b){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b&&b===e.label)return e.deviceId}return null},previewStart:function(){this.emit("previewStarted")},previewEnd:function(){this.emit("previewEnded")},save:function(a){var c=this,d=a.audioInput,e=a.audioOutput,f=a.videoInput;return new(b("Promise"))(function(a){var b=!!(d&&c.audioInput!==d||f&&c.videoInput!==f);c.audioInput=d;c.audioOutput=e;c.videoInput=f;c.emit("saved",b);a(b)})},updateForLocalStream:function(a){__p&&__p();if(a.videoMediaSourceId)this.videoInput=a.videoMediaSourceId;else{var b=a.getVideoTracks();b=b[0];b&&(this._videoInputLabel=b.label)}if(a.audioMediaSourceId)this.audioInput=a.audioMediaSourceId;else{b=a.getAudioTracks();a=b[0];a&&(this._audioInputLabel=a.label)}},updateForRemoteStream:function(a){this.remoteStream=a,this.emit("remoteStreamChanged")},addListener:function(){},emit:b("emptyFunction")};b("mixInEventEmitter")(a,{previewStarted:!0,previewEnded:!0,remoteStreamChanged:!0,saved:!0});e.exports=a}),null);
__d("RTCSVGIcon.react",["React"],(function(a,b,c,d,e,f){"use strict";var g=b("React").Children;a=function(a){var c=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["children"]);return b("React").cloneElement(g.only(c),babelHelpers["extends"]({preserveAspectRatio:"xMidYMid meet"},a))};e.exports=a}),null);
__d("RTCAbstractButton.react",["cx","AbstractButton.react","FBRTCSupport","React","RTCSVGIcon.react","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var b=d.props.disabled;if(b){a.preventDefault();return}d.props.shouldThrottle?d.$2():d.props.onClick()},d.$2=b("throttle")(function(){d.props.onClick()},500),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.className,e=a.disabled,f=a.highlighted,g=a.title;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","disabled","highlighted","title"]);c=b("React").jsx(b("RTCSVGIcon.react"),{className:"_4uwr",children:c});return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({"aria-disabled":e,className:b("joinClasses")(d,"_4uwq"+(!e&&f?" highlighted":"")),"data-hover":e||b("FBRTCSupport").isMobileDevice()?"none":"tooltip",image:c,label:g},a,{onClick:this.$1}))};return c}(b("React").PureComponent);a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("RTCCallControlsButton.react",["React","RTCAbstractButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.title;a=babelHelpers.objectWithoutPropertiesLoose(a,["title"]);return b("React").jsx(b("RTCAbstractButton.react"),babelHelpers["extends"]({"data-tooltip-alignh":"center","data-tooltip-content":c,label:c,labelIsHidden:this.props.labelIsHidden,title:c},a))};return c}(b("React").PureComponent);a.defaultProps={highlighted:!1,disabled:!1,shouldThrottle:!0,labelIsHidden:!0};e.exports=a}),null);
__d("RTCCallNUXActions",["FBRTCLogger","FBRTCUtils","RTCAppDispatcher","XRTCCallNUXController","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={refreshNUXState:function(){b("FBRTCUtils").sendServerRequest(b("XRTCCallNUXController").getURIBuilder().getURI(),function(a){a=a.payload;b("RTCAppDispatcher").dispatch({type:"INIT_NUX_STATE",payload:a})},function(){})},markNUXViewed:function(a){try{b("RTCAppDispatcher").dispatch({type:"MARK_NUX_VIEWED",nuxID:a})}catch(c){b("dangerouslyBypassDispatchError")(function(){return b("RTCAppDispatcher").dispatch({type:"MARK_NUX_VIEWED",nuxID:a})})}},dismissNUX:function(a){b("RTCAppDispatcher").dispatch({type:"DISMISS_NUX",nuxID:a})}};e.exports=a}),null);
__d("RTCGroupCallAddUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogHeaderReact.re").make,i=b("MessengerDialogTitleReact.re").make;a=function(a){var c=a.handleRing,d=a.onToggle,e=a.unMountParent;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,children:[b("React").jsx(h,{children:b("React").jsx(i,{children:g._("Advertencia de llamada a miembros")})}),b("React").jsx(b("MessengerDialogBody.react"),{children:g._("Est\u00e1s intentando llamar a usuarios bloqueados.")}),b("React").jsxs(b("MessengerDialogFooter.react"),{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{}),b("React").jsx(b("MessengerDialogButton.react"),{label:g._("Llamar"),onClick:function(){d(),e(),c()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallIncomingBlockedUserWarningDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogHeaderReact.re").make,i=b("MessengerDialogTitleReact.re").make;a=function(a){var c=a.leaveCall,d=a.onAddStream,e=a.onToggle;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:e,children:[b("React").jsx(h,{children:b("React").jsx(i,{children:g._("Advertencia de entrada de un usuario bloqueado")})}),b("React").jsx(b("MessengerDialogBody.react"),{children:g._("Un miembro bloqueado entrar\u00e1 en la llamada. \u00bfQuieres salir?")}),b("React").jsxs(b("MessengerDialogFooter.react"),{children:[b("React").jsx(b("MessengerDialogButton.react"),{label:g._("Salir de la llamada"),onClick:function(){e(),c()},type:"primary",use:"default"}),b("React").jsx(b("MessengerDialogButton.react"),{label:g._("No salir"),onClick:function(){e(),d()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallDialogController",["DOM","FBRTCGroupCallVideoEscalationDialog.react","React","ReactDOM","RTCGroupCallAddMembersDialog.react","RTCGroupCallAddUserWarningDialog.react","RTCGroupCallIncomingBlockedUserWarningDialog.react","RTCGroupCallRemoveGuestDialogContainer.react","RTCGroupCallRosterDialog.react","RTCVideoChatLinkDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_container:b("DOM").create("div"),_blockedContainer:b("DOM").create("div"),showVideoChatLinkDialog:function(){b("ReactDOM").render(b("React").jsx(b("RTCVideoChatLinkDialog.react"),{}),this._container)},showAddGroupMembersDialog:function(a,c,d,e,f){var g=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallAddMembersDialog.react"),{isP2P:f,onUnmount:function(){return g._onUnmount()},participantStates:c,participants:a,thread:d,viewerID:e}),this._container)},showVideoEscalationDialog:function(a,c){var d=this;b("ReactDOM").render(b("React").jsx(b("FBRTCGroupCallVideoEscalationDialog.react"),{onToggle:function(){d._onUnmount(),c()},userName:a}),this._container)},showBlockedUserWarningDialog:function(a,c){var d=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallAddUserWarningDialog.react"),{handleRing:a,onToggle:function(){d._onBlockedDialogUnmount()},unMountParent:c}),this._blockedContainer)},showIncomingBlockedUserWarningDialog:function(a,c,d,e){var f=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallIncomingBlockedUserWarningDialog.react"),{leaveCall:a,onAddStream:function(){c(d,e)},onToggle:function(){f._onUnmount()}}),this._container)},showParticipantsRoster:function(){var a=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallRosterDialog.react"),{onToggle:function(){a._onUnmount()}}),this._container)},showRemoveGuestDialog:function(a){var c=this;b("ReactDOM").render(b("React").jsx(b("RTCGroupCallRemoveGuestDialogContainer.react"),{onUnmount:function(){c._onUnmount()},user:a}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)},_onBlockedDialogUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._blockedContainer)}};e.exports=a}),null);
__d("FBRTCGuestUtils",["MercuryIDs","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isGuestFromLink:function(a,b){return a!=null&&b==null},fetchParticipantsInThread:function(a,c){var d=b("immutable").Map();a.participants.map(function(a){c.has(a)&&(d=d.set(a,c.get(a)))});return d},isAnonOrAuthGuestUser:function(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(a.FBID);return a.isGuestUser||c!=null&&!c.participants.includes(d)},fetchGuestFBIDsInCall:function(a,b){if(a===null||a===void 0)return[];a=g.fetchGuestParticipantsInCall(a,b);return Array.from(a.values()).map(function(a){return(a=a.fbid)!=null?a:""})},fetchGuestParticipantsInCall:function(a,c){if(a===null||a===void 0)return b("immutable").Map();var d=a.participants;return c.filter(function(a){return!d.includes(a.id)})}};e.exports=g}),null);
__d("RTCRosterContactItem.react",["cx","FBRTCParticipantCallState","MessengerContactImage.react","React","RTWebStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.isMessengerUser,d=a.imageSrc,e=a.name;a=a.connectedState;return b("React").jsxs("div",{className:"_4nvn",children:[b("React").jsx(b("MessengerContactImage.react"),{className:"_4nvr",isMessengerUser:c,size:32,src:d}),b("React").jsx("div",{className:"_4nvt",children:e}),a!==null?b("React").jsx("div",{className:"_1j79",children:h(a)}):null]})}function h(a){switch(a){case b("FBRTCParticipantCallState").CONTACTING:return b("RTWebStrings").contacting;case b("FBRTCParticipantCallState").RINGING:return b("RTWebStrings").ringing;case b("FBRTCParticipantCallState").IN_ANOTHER_CALL:return b("RTWebStrings").busy;case b("FBRTCParticipantCallState").NO_ANSWER:return b("RTWebStrings").noAnswer;default:return null}}e.exports=a}),null);
__d("RevokeMessengerCallInviteLinksForThreadMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","RevokeMessengerCallInviteLinksForThreadMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("RevokeMessengerCallInviteLinksForThreadMutation.graphql")};function a(a){return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{thread_id:a}},optimisticUpdater:null,onCompleted:function(a){},onError:function(a){i(a.message)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setEvent("error").setErrorType("RevokeLinkMutationError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCGroupCallRemoveGuestDialog.react",["cx","fbt","FBRTCGroupCallStore","FBRTCGuestUtils","Image.react","Link.react","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RevokeMessengerCallInviteLinksForThreadMutation","RTCCallStore","RTCMWProtocolHandler","RTCRosterContactItem.react","UserAgent","VideoChatLinksUserActionsTypedLogger","XUIText.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=b("React").PureComponent;var k=460,l=300,m=b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogState:"DEFAULT"},c.updateDialog=function(a){var b=a==="REMOVE_ONE_GUEST"?"remove_single_guest_sheet_shown":a==="REMOVE_ALL_GUESTS"?"remove_all_guests_sheet_shown":"remove_guest_sheet_shown";c.getVideoChatLinkLogger().setEvent(b).log();c.setState({dialogState:a})},c.onDismiss=function(){var a=c.props.onUnmount,b=c.state.dialogState;b=b==="REMOVE_ONE_GUEST"?"remove_single_guest_sheet_dismissed":b==="REMOVE_ALL_GUESTS"?"remove_all_guests_sheet_dismissed":"remove_guest_sheet_dismissed";c.getVideoChatLinkLogger().setEvent(b).log();a()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getVideoChatLinkLogger=function(){return new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setVideoCallLinkHashRaw(this.props.linkHash)};d.componentDidMount=function(){this.getVideoChatLinkLogger().setEvent("remove_guest_sheet_shown").log()};d.componentDidUpdate=function(){};d.render=function(){switch(this.state.dialogState){case"REMOVE_ONE_GUEST":return b("React").jsx(q,{linkHash:this.props.linkHash,logger:this.getVideoChatLinkLogger(),onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user});case"REMOVE_ALL_GUESTS":return b("React").jsx(p,{linkHash:this.props.linkHash,logger:this.getVideoChatLinkLogger(),onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user});case"DEFAULT":return b("React").jsx(o,{linkHash:this.props.linkHash,linkOwner:this.props.linkOwner,onAction:this.updateDialog,onUnmount:this.onDismiss,user:this.props.user})}};return c}(a);function n(a,c,d){var e=b("RTCCallStore").getState().callInfo,f=e.conferenceName;e=e.serverInfoData;b("promiseDone")(b("RTCMWProtocolHandler").removeParticipants(f,e,a));a=(e=(f=c)!=null?f.thread_fbid:f)!=null?e:"";b("RevokeMessengerCallInviteLinksForThreadMutation")(a);d()}var o=function(a){var c=a.linkOwner,d=a.onAction,e=a.onUnmount;a=a.user;var f=!!a.profilePictureUrl;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:e,type:"default",width:m?l:k,children:[b("React").jsx(i,{children:b("React").jsx(j,{children:h._("Eliminar invitado")})}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7gh9",children:b("React").jsx(b("Image.react"),{className:(f?"_1z3u":"")+(f?"":" _1z3t"),src:a.profilePictureUrl})}),b("React").jsx("div",{className:"_7gha",children:b("React").jsx(j,{children:h._("Eliminar a {name of user to be removed}",[h._param("name of user to be removed",a.userShortName)])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i63"),children:c!==null?h._("{name of user to be removed} se uni\u00f3 desde la invitaci\u00f3n de {Possessive,name of user who invited this guest}. Se informar\u00e1 a los miembros de este chat que se elimin\u00f3 a {name of guest user to be removed}.",[h._param("name of user to be removed",a.userShortName),h._param("Possessive,name of user who invited this guest",c),h._param("name of guest user to be removed",a.userShortName)]):h._("Se eliminar\u00e1 a {name of user to be removed} del videochat y se revocar\u00e1 el enlace a este chat. Se avisar\u00e1 a los miembros que se elimin\u00f3 {name of guest user to be removed}.",[h._param("name of user to be removed",a.userShortName),h._param("name of guest user to be removed",a.userShortName)])})]}),b("React").jsx(b("Link.react"),{onClick:function(){d("REMOVE_ONE_GUEST")},children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("Eliminar a \"{name of user to be removed}\"",[h._param("name of user to be removed",a.userShortName)])})}),b("React").jsx(b("Link.react"),{onClick:function(){d("REMOVE_ALL_GUESTS")},children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("Eliminar a todos los invitados")})}),b("React").jsx(b("Link.react"),{onClick:e,children:b("React").jsx(b("XUIText.react"),{className:"_7ghc",display:"block",children:h._("Cancelar")})})]})},p=function(a){__p&&__p();var c=a.logger,d=a.onUnmount;a.user;a=b("FBRTCGroupCallStore").getState();var e=a.participants,f=a.thread;a=b("FBRTCGuestUtils").fetchGuestParticipantsInCall(f,e);return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,type:"default",width:m?l:k,children:[b("React").jsxs(i,{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{autoFocus:!1}),b("React").jsx(j,{children:h._("Eliminar a todos los invitados")}),b("React").jsx(b("MessengerDialogButton.react"),{disabled:!1,label:h._("Eliminar"),onClick:function(){c.setEvent("remove_all_guests_selected").log();var a=b("FBRTCGuestUtils").fetchGuestFBIDsInCall(f,e);n(a,f,d)},type:"primary",use:"default"})]}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7i64",children:b("React").jsx(j,{children:h._({"*":"\u00bfSeguro que quieres eliminar a {number} invitados?","_1":"\u00bfSeguro que quieres eliminar a 1 invitado?"},[h._plural(a.size,"number")])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i65"),children:h._("Se eliminar\u00e1 a los invitados que no formen parte del grupo de Messenger. Tambi\u00e9n se revocar\u00e1 el enlace de este chat, por lo que las personas que lo tengan no podr\u00e1n usarlo para unirse.")}),b("React").jsx("div",{className:"_788l",children:h._("Se eliminar\u00e1 a:")}),Array.from(a.values()).map(function(a){return b("React").jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:a.image_src,isMessengerUser:a.is_messenger_user,name:a.name},a.fbid)})]})]})},q=function(a){var c=a.logger,d=a.onUnmount,e=a.user;a=b("FBRTCGroupCallStore").getState();var f=a.thread;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,type:"default",width:m?l:k,children:[b("React").jsxs(i,{children:[m?b("React").jsx(b("MessengerDialogButton.react"),{action:"cancel",disabled:!1,label:"X",onClick:d,type:"secondary",use:"default"}):b("React").jsx(b("MessengerDialogCancelButton.react"),{autoFocus:!1,onClick:d}),b("React").jsx(j,{children:h._("Eliminar invitado")}),b("React").jsx(b("MessengerDialogButton.react"),{disabled:!1,label:m?h._("S\u00ed"):h._("Eliminar"),onClick:function(){c.setEvent("remove_single_guest_selected").log(),n([e.FBID],f,d)},type:"primary",use:"default"})]}),b("React").jsxs(b("MessengerDialogBody.react"),{children:[b("React").jsx("div",{className:"_7i64",children:b("React").jsx(j,{children:h._("\u00bfSeguro que quieres eliminar a {name of user to be removed}?",[h._param("name of user to be removed",e.userShortName)])})}),b("React").jsx("div",{className:(m?"_8gx7":"")+" _7ghb"+(m?"":" _7i66"),children:h._("Tambi\u00e9n se revocar\u00e1 el enlace de este chat, por lo que las personas que lo tengan no podr\u00e1n usarlo para unirse.")})]})]})};e.exports=c}),null);
__d("RTCGroupCallRemoveGuestDialogContainer.react",["FBRTCGroupCallStore","React","RelayFBEnvironment","RelayModern","RTCCallStore","RTCGroupCallRemoveGuestDialog.react","RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var h=function(){return b("RTCGroupCallRemoveGuestDialogContainerFetchLinkCreatorNameForGuestQuery.graphql")};a=function(a){__p&&__p();var c=b("RTCCallStore").getState().callInfo.serverInfoData,d=b("FBRTCGroupCallStore").getState(),e=d.linkHash;d=a.user.FBID;return b("React").jsx(g,{environment:b("RelayFBEnvironment"),query:h,render:function(c){__p&&__p();c.error;c=c.props;if(c==null)return null;var d=null;c=(c=c)!=null?(c=c.messenger_call_query)!=null?(c=c.connected_participants)!=null?c.edges:c:c:c;if(c!=null&&c.length>0){d=(c=c[0])!=null?(c=c.joining_context)!=null?(c=c.link_owner)!=null?c.short_name:c:c:c}return b("React").jsx(b("RTCGroupCallRemoveGuestDialog.react"),{linkHash:e,linkOwner:d,onUnmount:a.onUnmount,user:a.user})},variables:{server_session_id:c!=null?c:"",guest_id:d}})};e.exports=a}),null);
__d("memoizeLastByArgs",["MemoizationInstrumentation","shallowArrayEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=c||a.name||"unknown",f=null;c=function(){__p&&__p();for(var c=arguments.length,g=new Array(c),h=0;h<c;h++)g[h]=arguments[h];var i=b("MemoizationInstrumentation").onFunctionCall(e.id,d),j=!0;if(!(f!=null&&b("shallowArrayEqual")(g,f.args))){j=!1;var k=a.apply(void 0,g);f==null?f={args:g,ret:k}:(f.args=g,f.ret=k)}i&&i(j);return f.ret};return c}e.exports=a}),null);
__d("RTCMobileRosterSorter",["FBRTCParticipantCallState","immutable","memoizeLastByArgs","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e={};for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;e[h.get("FBID")]=h}h=[];g=null;for(var f=a,c=Array.isArray(f),a=0,f=c?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(c){if(a>=f.length)break;i=f[a++]}else{a=f.next();if(a.done)break;i=a.value}i=i;i[0];i=i[1];var j=b("nullthrows")(i.fbid),k=e[j];k=k?k.get("participantState"):null;k={payload:i,participantState:(i=k==null?void 0:k.state)!=null?i:b("FBRTCParticipantCallState").UNKNOWN};j===d?g=k:k.participantState===b("FBRTCParticipantCallState").CONNECTED&&h.push(k)}return{activeParticipants:h,localUser:b("nullthrows")(g)}}e.exports={sort:b("memoizeLastByArgs")(a)}}),null);
__d("RTCGroupCallRosterDialog.react",["cx","fbt","FBRTCGroupCallStore","FluxContainer","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RTCCallStore","RTCMobileRosterSorter","RTCRosterContactItem.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("FBRTCGroupCallStore"),b("RTCCallStore")]};c.calculateState=function(){var a=b("FBRTCGroupCallStore").getState();a=a.participants;var c=b("RTCCallStore").getState(),d=c.callInfo.conferenceState,e=c.localUser;c=c.remoteUsers;return{conferenceState:d,roster:b("RTCMobileRosterSorter").sort(a,c,e.get("FBID"))}};var d=c.prototype;d.componentDidUpdate=function(){this.state.conferenceState==="TERMINATED"&&this.props.onToggle()};d.render=function(){var a=this.state.roster,c=a.activeParticipants;a=a.localUser;return b("React").jsx(b("MessengerDialog.react"),{onToggle:this.props.onToggle,type:"default",children:b("React").jsxs("div",{className:"_788k",children:[b("React").jsxs(i,{children:[b("React").jsx(j,{children:h._("Participantes de la llamada")}),b("React").jsx(b("MessengerDialogButton.react"),{disabled:!1,label:h._("Cerrar"),onClick:this.props.onToggle,type:"primary",use:"default"})]}),b("React").jsx("div",{className:"_788l",children:h._("En este chat")}),b("React").jsxs("div",{className:"_7dyr",children:[b("React").jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:a.payload.image_src,isMessengerUser:a.payload.is_messenger_user,name:h._("T\u00fa")},a.payload.fbid),c.map(function(a){return b("React").jsx(b("RTCRosterContactItem.react"),{connectedState:null,imageSrc:a.payload.image_src,isMessengerUser:a.payload.is_messenger_user,name:a.payload.name},a.payload.fbid)})]})]})})};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCGroupCallActions",["RTCAppDispatcher","RTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setLayout:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LAYOUT",layout:a})},setLinkHash:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LINKHASH",linkHash:a})},setDominantSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:"SET_DOMINANT_SPEAKER",dominantSpeakerFBID:a})},setPinnedSpeaker:function(a){b("RTCAppDispatcher").dispatch({type:"SET_PINNED_SPEAKER",pinnedSpeakerFBID:a})},initThread:function(a,c){b("RTCAppDispatcher").dispatch({type:"INIT_THREAD",thread:a,participants:c})},onParticipantLeft:function(a){b("RTCAppDispatcher").dispatch({type:"ON_PARTICIPANT_LEFT",participantFBID:a})},onParticipantsAdded:function(a,c){b("RTCAppDispatcher").dispatch({type:"ON_PARTICIPANTS_ADDED",participants:a,images:c})},addParticipantsToRing:function(a){b("RTCAppDispatcher").dispatch({type:"ADD_PARTICIPANTS_TO_RING",participantFBIDs:a})},toggleRemoteStream:function(a){b("RTCAppDispatcher").dispatch({type:"TOGGLE_REMOTE_STREAM",mediaStatus:a})},handleDismissRequest:function(a,c){b("RTCAppDispatcher").dispatch({type:"DISMISS",transaction:a,request:c,endCallReason:b("RTCUtils").endCallReasonFromDismissRequest(c.dismissRequest()),endCallSubreason:b("RTCUtils").endCallSubreasonFromDismissRequest(c.dismissRequest())})},handleConferenceStateRequest:function(a,c,d,e){b("RTCAppDispatcher").dispatch({type:"ON_CONFERENCE_STATE",transaction:a,request:c,conferenceStateVersion:d,resolve:e})},onJoinRequestSent:function(){b("RTCAppDispatcher").dispatch({type:"ON_JOIN_REQUEST_SENT"})},onReceivedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:"ON_RECEIVED_JOIN_RESPONSE"})},onJoinResponse:function(a){b("RTCAppDispatcher").dispatch({type:"ON_JOIN_RESPONSE",serverInfoData:a})},onProcessedJoinResponse:function(){b("RTCAppDispatcher").dispatch({type:"ON_PROCESSED_JOIN_RESPONSE"})},onServerMediaUpdateSuccess:function(){b("RTCAppDispatcher").dispatch({type:"ON_SERVER_MEDIA_UPDATE_SUCCESS"})},setLocalClientVersion:function(a){b("RTCAppDispatcher").dispatch({type:"SET_LOCAL_CLIENT_VERSION",version:a})},onClientMediaUpdateResponse:function(a,c){b("RTCAppDispatcher").dispatch({type:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",responseStatusCode:a,currentVersion:c})}};e.exports=a}),null);
__d("RTCMWSessionDescription",["Promise","FBRTCConsoleLogger","FBRTCConstants","RTCCallStore","RTCGroupCallActions","RTCSignalingExperiments"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a={_videoEnabled:{},serverMediaUpdate:function(a,c){__p&&__p();var d=a.fromVersion,e=a.toVersion,f=a.mediaUpdates,h=b("RTCCallStore").getConnection(g.MULTIWAY);if(!h)return;a=h.getLocalDescription();var i=h.getRemoteDescriptionForSMU(),j=i.sessionDescription.getVersion();if(j!==d){c(j);return}d=i.toSdp();f.forEach(function(a){i.processServerMediaUpdate(a)});var k=b("Promise").resolve(),l=b("RTCSignalingExperiments").shouldAlwaysSetMWDescriptionsOnSMU();(l||i.toSdp()!==d)&&(i.sessionDescription.setVersion(e),k=b("Promise").all([h.setLocalDescription(a),h.setRemoteDescription(i)]));k.then(function(){__p&&__p();var a;b("RTCGroupCallActions").toggleRemoteStream((a=[]).concat.apply(a,f.map(function(a){a=a.media;return a})).reduce(function(a,b){var c=b.id;b=b.enabled;c=h.getWebrtcTrackIdFromMWTrackId(c);a[c]=b;return a},{}));c(e)},function(){return c(j)})["catch"](function(a){})}};e.exports=a}),null);
__d("RTCMWThreadDeltaHandler",["Arbiter","ChannelConstants","CurrentUser","MercuryIDs","MercurySyncDeltaTypes","MessengerParticipants.bs","RTCCallInitUtils","RTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={initHandler:function(a){__p&&__p();b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("delta"),function(c,d){__p&&__p();c=d&&d.obj&&d.obj.queue;if(c&&c.toString()!==b("CurrentUser").getID())return;d=(c=d)!=null?(c=c.obj)!=null?c.delta:c:c;c=(c=d)!=null?(c=c.messageMetadata)!=null?(c=c.threadKey)!=null?c.threadFbId:c:c:c;if(!d||c!==a)return;switch(d["class"]){case b("MercurySyncDeltaTypes").ParticipantLeftGroupThread:b("RTCGroupCallActions").onParticipantLeft(d.leftParticipantFbId);break;case b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread:b("MessengerParticipants.bs").getMulti(d.addedParticipants.map(function(a){a=a.userFbId;return b("MercuryIDs").getParticipantIDFromUserID(a)}),b("RTCGroupCallActions").onParticipantsAdded);break}})},processThreadUpdateFromSignaling:function(a){__p&&__p();var c=null;a=a.appMessages;a&&a.forEach(function(a){__p&&__p();var b;b=(b=a)!=null?(b=b.body)!=null?(b=b.genericMessage)!=null?b.topic:b:b:b;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(b==="thread_id_payload"&&a!=null){b=JSON.parse(a);if(b.thread_id!==null){c=b.thread_id;return}}});c&&b("RTCCallInitUtils").initializeThreadFromCollisionContext({groupThreadID:String(c),peerID:null})}};e.exports=a}),null);
__d("FBRTCMultiwayMessage",["ChannelManager","CurrentUser","FBRTCMessageType","RTCAppData","RTCUtils"],(function(a,b,c,d,e,f){__p&&__p();b("ChannelManager").startChannelManager();a=function(){"use strict";__p&&__p();function a(a){this.$1=a}var c=a.prototype;c.isRequest=function(){return this.$1.jsonPayload.header.responseStatusCode==null};c.isType=function(a){return this.type()==a};c.transactionId=function(){return this.$1.jsonPayload.header.transactionId};c.conferenceName=function(){return this.$1.jsonPayload.header.conferenceName};c.serverInfoData=function(){return this.$1.jsonPayload.header.serverInfoData};c.message=function(){return this.$1};c.type=function(){return this.header().type};c.endpoint=function(){return this.$1.endpoint};c.header=function(){return this.$1.jsonPayload.header};c.body=function(){return this.$1.jsonPayload.body};c.incrementRetryCount=function(){this.$1.jsonPayload.header.retryCount++};c.ringRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").RING)?this.body().ringRequest:null};c.dismissRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").DISMISS)?this.body().dismissRequest:null};c.serverMediaUpdateRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").SERVER_MEDIA_UPDATE)?this.body().serverMediaUpdateRequest:null};c.conferenceStateRequest=function(){return this.isRequest()&&this.isType(b("FBRTCMessageType").CONFERENCE_STATE)?this.body().conferenceStateRequest:null};c.createResponse=function(c,d){var e=d.body;d=d.callID;c={endpoint:{appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},jsonPayload:{header:b("RTCUtils").createResponseHeader(this.header(),c,d?d:""),body:e||{}}};return new a(c)};return a}();e.exports=a}),null);
__d("RTCMessageSender",["Promise","AsyncRequest","XGroupCallSendMessageController"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.send=function(a){__p&&__p();return new(b("Promise"))(function(c,d){a.jsonPayload.header.conferenceName;var e=b("XGroupCallSendMessageController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({message:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};return a}();e.exports=a}),null);
__d("FBRTCTransactions",["Promise","FBRTCConsoleLogger","RTCMessageSender","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e4,h=Object.freeze({INIT:0,PROCESSING:1,COMPLETED:2,TERMINATED:3});a=function(){__p&&__p();function a(){this.$1=new Map()}var b=a.prototype;b.findTransaction=function(a){return this.$1.get(a)};b.addTransaction=function(a){this.$1.set(a.id,a)};b.removeTransaction=function(a){this.$1["delete"](a.id)};b.getTransaction=function(a){return this.findTransaction(a.transactionId())||new i(this,a)};return a}();var i=function(){__p&&__p();function a(a,c){this.id=c.transactionId(),this.$1=h.INIT,this.$2=c,this.$3=null,this.$4=a,this.$5=new Error("Unknown"),this.$6=null,this.$7=new(b("RTCMessageSender"))(),this.$8(),this.$4.addTransaction(this)}var c=a.prototype;c.start=function(){__p&&__p();if(this.$1==h.INIT){this.$9(h.PROCESSING);return b("Promise").resolve(this.$2)}else if(this.$1==h.PROCESSING)return b("Promise").resolve(null);else if(this.$1==h.COMPLETED){this.$10();return b("Promise").resolve(null)}return b("Promise").reject(this.$5)};c.sendResponse=function(a){var b=this;this.$3=a;this.$9(h.COMPLETED);return this.$7.send(a.message()).then(function(a){},function(a){b.$5=a,b.$9(h.TERMINATED)})};c.$10=function(){if(this.$3!=null){var a=this.$3;a.incrementRetryCount();this.sendResponse(a)}};c.$9=function(a){a!=this.$1&&(this.$1=a,this.$1!=h.TERMINATED&&this.$8(),this.$1==h.TERMINATED&&(this.$5=new Error("Terminated"),this.$4.removeTransaction(this)))};c.$8=function(){var a=this;this.$6&&(b("clearTimeout")(this.$6),this.$6=null);this.$6=b("setTimeout")(function(){a.$9(h.TERMINATED)},g)};return a}();e.exports={FBRTCTransactionOwner:a,FBRTCServerTransaction:i}}),null);
__d("RTCProxyUserActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setProxyUsers:function(a,c){b("RTCAppDispatcher").dispatch({type:"SET_PROXY_USER_MAP",proxyUserID:a,proxyingAsUserID:c})}};e.exports=a}),null);
__d("RTCProxyUserReducer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){switch(b.type){case"SET_PROXY_USER_MAP":var c=b.proxyUserID;b=b.proxyingAsUserID;if(!a.proxyUserToProxyingAs.has(c))return a.set("proxyingAsToProxyUser",a.proxyingAsToProxyUser.set(b,c)).set("proxyUserToProxyingAs",a.proxyUserToProxyingAs.set(c,b))}return a}e.exports={setProxyUsers:a}}),null);
__d("RTCProxyUserStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({proxyingAsToProxyUser:b("immutable").Map(),proxyUserToProxyingAs:b("immutable").Map()}));e.exports=a}),null);
__d("RTCProxyUserStore",["FluxReduceStore","RTCAppDispatcher","RTCProxyUserReducer","RTCProxyUserStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCProxyUserReducer").setProxyUsers];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCProxyUserStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCProxyUserUtils",["ImmutableObject","MercuryIDs","RTCProxyUserActions","RTCProxyUserStore","RTWebUserActionLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setProxyingAsUsersFromMessage:function(a){__p&&__p();a=a.appMessages;if(a){var c=new Map();a.forEach(function(a){__p&&__p();var d;d=(d=a)!=null?(d=d.body)!=null?(d=d.genericMessage)!=null?d.topic:d:d:d;a=(a=a)!=null?(a=a.body)!=null?(a=a.genericMessage)!=null?a.data:a:a:a;if(d==="aloha_proxying_as_users"&&a!=null){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"Initializing_AlohaProxyingAsUsers"});d=JSON.parse(a);for(var e in d){a=d[e][0].id.toString();a&&(b("RTCProxyUserActions").setProxyUsers(e,a),c.set(e,a))}}});return c}return null},transformProxyUserParticipantsToProxyingAs:function(a,c){__p&&__p();for(var d in a){var e=a[d].fbid;if(c.has(e)){var f=a[d];e=c.get(e);var g=b("MercuryIDs").getParticipantIDFromUserID(e);f=b("ImmutableObject").setProperty(f,"fbid",e);f=b("ImmutableObject").setProperty(f,"id",g);a[g]=f}}return a},getUserIDToFetch:function(a){var c=b("RTCProxyUserStore").getState();c=c.proxyUserToProxyingAs;return c.has(a)?c.get(a):a}};e.exports=a}),null);
__d("MultiwayParticipantFetcher",["Promise","regeneratorRuntime","ImmutableObject","MercuryIDs","MercuryParticipantsConstants","MessengerParticipants.bs","RTCProxyUserUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").Map;b("immutable").Set;function g(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getBigImageMultiWithSize(d.toArray(),function(c){a(b("immutable").fromJS(c))},c)}catch(a){e(a)}})}function h(a,c){var d=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});return new(b("Promise"))(function(a,e){try{b("MessengerParticipants.bs").getMulti(d.toArray(),function(d){c&&c.proxyingAsToProxyUser!=null&&c.proxyingAsToProxyUser!==void 0&&c.proxyingAsToProxyUser.size>0&&(d=b("RTCProxyUserUtils").transformProxyUserParticipantsToProxyingAs(d,c.proxyingAsToProxyUser)),a(b("immutable").fromJS(d))})}catch(a){e(a)}})}function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(h(a,c));case 2:d=f.sent;if(!c.profileImageSize){f.next=8;break}f.next=6;return b("regeneratorRuntime").awrap(g(a,c.profileImageSize));case 6:e=f.sent;return f.abrupt("return",d.withMutations(function(a){e.forEach(function(c,d){var e=a.get(d);if(e){e=b("ImmutableObject").setProperty(e,"big_image_src",c);a.set(d,e)}})}));case 8:return f.abrupt("return",d);case 9:case"end":return f.stop()}},null,this)}function j(a){__p&&__p();var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=b("immutable").Set([a]);d=b("MercuryIDs").getParticipantIDFromUserID(a);f.next=4;return b("regeneratorRuntime").awrap(i(c,{profileImageSize:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE}));case 4:e=f.sent;return f.abrupt("return",e.get(d));case 6:case"end":return f.stop()}},null,this)}a={fetchParticipant:function(a,c){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(j(c));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},null,this)},fetchAllParticipants:function(a,c,d){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:d===void 0&&(d={});a.next=3;return b("regeneratorRuntime").awrap(i(c,d));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},null,this)}};e.exports=a}),null);
__d("RTCCallActions",["invariant","RTCAppDispatcher","RTCUtils","RTWebUserActionLogger","emptyFunction","mixInEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={addListener:b("emptyFunction"),emit:b("emptyFunction"),initialize:function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"RTCCallActions_initialize",callID:String(a.callID),conferenceName:a.conferenceName,callType:a.protocol==="p2p"?"p2p":"mw"}),b("RTCAppDispatcher").dispatch(babelHelpers["extends"]({type:"INIT"},a))},reset:function(){b("RTCAppDispatcher").dispatch({type:"RESET"})},resetForRedial:function(a,c){b("RTCAppDispatcher").dispatch({type:"RESET_FOR_REDIAL",conferenceName:a,callID:c})},callCollision:function(a,c){b("RTCAppDispatcher").dispatch({type:"CALL_COLLISION",conferenceName:a,peerID:c})},setCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CALL_SUMMARY",callSummary:a})},call:function(a,c){b("RTCAppDispatcher").dispatch({type:"CALL",usersToRing:a,peerConnection:c})},callSuccess:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"CALL_SUCCESS",connected:a})},incomingCallSuccess:function(){b("RTCAppDispatcher").dispatch({type:"INCOMING_CALL_SUCCESS"})},callError:function(a){b("RTCAppDispatcher").dispatch({type:"CALL_ERROR",endCallReason:b("RTCUtils").endCallReasonFromResponseStatusCode(a),endCallSubreason:"Call error: "+(a||0)})},completeTransitionToMultiway:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_CLEAR_P2P_CONNECTION"})},hangupSuccess:function(){b("RTCAppDispatcher").dispatch({type:"HANGUP_SUCCESS"})},hangupError:function(){b("RTCAppDispatcher").dispatch({type:"HANGUP_ERROR"})},join:function(a){h.call([],a)},hangup:function(a,c){b("RTCAppDispatcher").dispatch({type:"HANGUP",hangupReason:a,detailedReasonString:c,endCallReason:a})},initLocalUser:function(a){b("RTCAppDispatcher").dispatch({type:"INIT_LOCAL_USER",localUser:a})},initRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:"INIT_REMOTE_USERS",remoteUsers:a})},updateRemoteUsers:function(a){b("RTCAppDispatcher").dispatch({type:"UPDATE_REMOTE_USERS",remoteUsers:a})},addLocalStream:function(a){a!=null||g(0,11208),b("RTCAppDispatcher").dispatch({type:"ADD_LOCAL_STREAM",stream:a})},removeLocalStream:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_LOCAL_STREAM",stream:a})},replaceLocalStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REPLACE_LOCAL_STREAM",oldStream:a,newStream:c})},removeAllLocalStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_LOCAL_STREAMS",stopStreams:a})},removeAllLocalScreenStreams:function(a){a===void 0&&(a=!1),b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",stopStreams:a})},addRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_STREAM",stream:a,userID:c})},removeRemoteStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_STREAM",stream:a,userID:c})},removeAllRemoteStreams:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_ALL_REMOTE_STREAMS",userID:a})},addRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_TRACK",stream:a,track:c})},removeRemoteTrack:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_TRACK",stream:a,track:c})},addLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:"ADD_LOCAL_SCREEN_STREAM",stream:a})},removeLocalScreenStream:function(a){b("RTCAppDispatcher").dispatch({type:"REMOVE_LOCAL_SCREEN_STREAM",stream:a})},replaceLocalScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REPLACE_LOCAL_SCREEN_STREAM",oldStream:a,newStream:c})},addRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"ADD_REMOTE_SCREEN_STREAM",stream:a,userID:c})},removeRemoteScreenStream:function(a,c){b("RTCAppDispatcher").dispatch({type:"REMOVE_REMOTE_SCREEN_STREAM",stream:a,userID:c})},endCall:function(a,c){b("RTCAppDispatcher").dispatch({type:"END_CALL",endCallReason:a,endCallSubreason:c})},waitForUserInput:function(){b("RTCAppDispatcher").dispatch({type:"WAIT_FOR_USER_INPUT"})},toggleMuteAudio:function(a){b("RTCAppDispatcher").dispatch({type:a?"AUDIO_UNMUTED":"AUDIO_MUTED"})},toggleMuteVideo:function(a){b("RTCAppDispatcher").dispatch({type:a?"VIDEO_UNMUTED":"VIDEO_MUTED"})},stopLocalVideo:function(){b("RTCAppDispatcher").dispatch({type:"STOP_LOCAL_STREAM"})},toggleMuteRemoteAudio:function(a,c){b("RTCAppDispatcher").dispatch({type:a?"REMOTE_AUDIO_MUTED":"REMOTE_AUDIO_UNMUTED",userID:c})},toggleMuteRemoteVideo:function(a,c){b("RTCAppDispatcher").dispatch({type:a?"REMOTE_VIDEO_MUTED":"REMOTE_VIDEO_UNMUTED",userID:c})},toggleSelfView:function(a){b("RTCAppDispatcher").dispatch({type:a?"SELF_VIEW_COLLAPSED":"SELF_VIEW_UNCOLLAPSED"})},submitRating:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_RATING",rating:a})},submitFeedback:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_FEEDBACK",feedback:a})},submitFeedbackOptions:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_FEEDBACK_OPTIONS",feedbackOptions:a})},submitSurveyChoice:function(a){b("RTCAppDispatcher").dispatch({type:"SUBMIT_SURVEY_CHOICE",surveyChoice:a})},ratingShown:function(){b("RTCAppDispatcher").dispatch({type:"RATING_SHOWN"})},feedbackShown:function(){b("RTCAppDispatcher").dispatch({type:"FEEDBACK_SHOWN"})},setEndCallReason:function(a){b("RTCAppDispatcher").dispatch({type:"SET_END_CALL_REASON",endCallReason:a})},setConferenceState:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CONFERENCE_STATE",conferenceState:a})},setFloorStatus:function(a){b("RTCAppDispatcher").dispatch({type:"FLOOR_STATUS",status:a})}};b("mixInEventEmitter")(h,{onIceConnectionStateChange:!0});e.exports=h}),null);
__d("RTCMultiwayMessageHandler",["Arbiter","ChannelConstants","CurrentUser","FBMqttChannel","FBRTCCapability","FBRTCDeviceStatus","FBRTCExperiment","FBRTCHangupReason","FBRTCLogger","FBRTCMultiwayMessage","FBRTCRtcResponseStatusCode","FBRTCTransactions","MultiwayParticipantFetcher","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCMWProtocolHandler","RTCMWSessionDescription","RTCMWThreadDeltaHandler","RTCP2PCallStore","RTCProxyUserStore","RTCProxyUserUtils","generateRTCCallID","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCTransactions").FBRTCServerTransaction,h=b("FBRTCTransactions").FBRTCTransactionOwner;a=function(){__p&&__p();function a(){this.$3=-1,this.$7()}var c=a.prototype;c.initialize=function(a,b,c,d){this.$1=a,this.$2=b,this.$4=c,this.$5=d};a.initHandler=function(b,c,d,e){d===void 0&&(d=!1),e===void 0&&(e=!1),new a().initialize(b,c,d,e)};a.close=function(){while(a.$6.length>0){var c=a.$6.shift();b("Arbiter").unsubscribe(c)}b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)&&b("FBMqttChannel").unsubscribe("/rtc_multi")};c.$7=function(){var c=this;a.$6.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_live_json"),function(a,b){c.$8(b.obj)}));b("FBRTCExperiment").getMWSignalingExperiment().logExposure();b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)?b("FBMqttChannel").subscribe("/rtc_multi",function(a){a=JSON.parse(a);c.$8(a)}):a.$6.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,b){c.$8(b.obj)}))};c.$8=function(a){__p&&__p();var c=this,d=new(b("FBRTCMultiwayMessage"))(a);a=b("RTCCallStore").getState().callID;b("FBRTCLogger").getInstance().logMultiwayMessageReceived(d,a);if(!d.isRequest())return;if(this.$1===d.conferenceName())this.$9(d);else if(d.ringRequest()&&!this.$4){var e=new g(new h(),d);b("promiseDone")(e.start(),function(a){var f=b("generateRTCCallID")();b("promiseDone")(e.sendResponse(c.$10(a,f)),function(){return b("RTCMWProtocolHandler").otherUserInAnotherCall(d.conferenceName(),d.serverInfoData(),b("FBRTCHangupReason").IN_ANOTHER_CALL,f.toString(),"InAnotherCall")})})}};c.$10=function(a,c){var d=a.ringRequest(),e=a.serverInfoData();if(d==null||e==null)return a.createResponse(b("FBRTCRtcResponseStatusCode").BAD_REQUEST,{});d={deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED],deviceStatus:b("FBRTCDeviceStatus").OK};return a.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ringResponse:d},callID:c.toString()})};c.$9=function(c){__p&&__p();var d=this,e=new g(new h(),c);b("promiseDone")(e.start().then(function(c){__p&&__p();if(c!=null){var f=b("RTCCallStore").getState(),g=f.callInfo;if(c.dismissRequest()!=null)c.serverInfoData()===g.serverInfoData&&(b("RTCGroupCallActions").handleDismissRequest(e,c),a.close(),f.connections.forEach(function(a){return a.close()}),d.$5||b("RTCCallActions").removeAllLocalStreams(!0));else if(c.serverMediaUpdateRequest()!=null)b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(c.serverMediaUpdateRequest()),b("RTCMWSessionDescription").serverMediaUpdate(c.serverMediaUpdateRequest(),function(a){b("RTCGroupCallActions").onServerMediaUpdateSuccess(),e.sendResponse(c.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{serverMediaUpdateResponse:{currentVersion:a}},callID:g.callID}))});else if(c.conferenceStateRequest()!=null){f=c.conferenceStateRequest();var h=b("RTCCallStore").getState();h=h.remoteUsers;var i=h.map(function(a){return a.FBID});h=Object.keys(f.participantStates);h=h.filter(function(a){return a!==b("CurrentUser").getID()&&!i.has(a)});if(h.length>0){var j=b("RTCP2PCallStore").getState();j=j.escalationConferenceName;j==null&&b("RTCMWThreadDeltaHandler").processThreadUpdateFromSignaling(f);j=b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(f);var k=new Set(h);j!=null&&j.forEach(function(a,b){k["delete"](b),a!==null&&!k.has(a)&&k.add(a)});f=b("RTCProxyUserStore").getState();h=f.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(d.$1,b("immutable").Set(k),{profileImageSize:100,proxyingAsToProxyUser:h}),function(a){b("RTCGroupCallActions").onParticipantsAdded(a.toJS()),b("RTCGroupCallActions").handleConferenceStateRequest(e,c,d.$3,function(a){d.$3=a})})}else b("RTCGroupCallActions").handleConferenceStateRequest(e,c,d.$3,function(a){d.$3=a})}}}))};return a}();a.$6=[];e.exports=a}),null);
__d("RTCP2PCallWindowHandler",["RTCCallStore","RTCP2PCallStore","RTWebUserActionLogger","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a={init:function(a){this._isWindowOpened()&&this.close(),g=a,this.updateCallInProgressIndicator(),this._monitorOpenerForChanges()},updateCallInProgressIndicator:function(a){if(!this._isWindowOpened())return;var c=b("RTCCallStore").getState();c=c.remoteUsers;a=a?a:b("RTCP2PCallStore").getState().connectionStatus;!c.count()||a==="DISCONNECTED"?g.rtcCallInProgessWith=null:g.rtcCallInProgessWith=c.first().FBID.toString()},reload:function(){this._isWindowOpened()&&g.location.reload()},close:function(){this._isWindowOpened()&&g.close()},_monitorOpenerForChanges:function(){var a=this;if(g.opener)try{g.opener.addEventListener("unload",function(b){a._passWindowToOpener()})}catch(a){}},_passWindowToOpener:function(a){__p&&__p();var c=this;a===void 0&&(a=10);b("setTimeout")(function(){if(!c._isWindowOpened()||a<=1)return;try{if(g.opener&&!g.opener.closed){g.opener.rtcCallChildWindow=g;return}}catch(a){b("RTWebUserActionLogger").logErrorOnceforDomain("RTCP2PCallWindowHandler__passWindowToOpener",a)}c._passWindowToOpener(a-1)},1e3)},_isWindowOpened:function(){return!!(g&&!g.closed)}};e.exports=a}),null);
__d("RTCScreenSharingWindowHandler",["RTCP2PCallActions","RTCUtils","XScreenSharingController","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g=540,h=960,i;a={open:function(a,c,d){var e=this;i=window.open("about:blank","Screen Sharing",this._getWindowFeatures());window.callInfo=d;b("promiseDone")(b("RTCUtils").getStreamVideoResolution(c)["catch"](function(b){e._setupScreenSharingWindow(a,c,null)}),function(b){e._setupScreenSharingWindow(a,c,b)})},_setupScreenSharingWindow:function(a,b,c){__p&&__p();var d=this;window.getRemoteMediaStream=function(){return b};window.closeScreenSharingWindow=this._onUnload;if(c){c=this._getConstrainedSize(c.width,c.height);var e=c.width,f=c.height;i.resizeTo(e,f);window.setTimeout(function(){d._adjustScreenSize({width:e,height:f})},200)}i.location=this._getUnsignedUri(a);window.focus&&this.isWindowOpened()&&i.focus()},_adjustScreenSize:function(a){if(!i)return;i.resizeTo(a.width,a.height+(a.height-i.innerHeight))},close:function(){if(i){var a=null;i.opener&&!i.opener.closed&&(a=i.opener);i.close();i=null;a&&a.postMessage({recipient:"SC_CONTENT_SCRIPT",type:"SC_RESET_PORT",text:"reset comm port"},"*")}},isWindowOpened:function(){return!!(i&&!i.closed)},_onUnload:function(){b("RTCP2PCallActions").togglePopOutScreenContent()},_getWindowFeatures:function(){var a=screen.availLeft,b=screen.availTop,c=this._getConstrainedSize(Math.min(h,screen.width-a),Math.min(g,screen.height-b)),d=c.width;c=c.height;c={height:"height="+c.toString(),width:"width="+d.toString(),top:"top="+b.toString(),left:"left="+a.toString()};return["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",")},_getConstrainedSize:function(a,b){var c;a>h&&(c=h/a,b*=c,a*=c);b>g&&(c=g/b,a*=c,b*=c);return{width:a,height:b}},_getUnsignedUri:function(a){return b("XScreenSharingController").getURIBuilder().setFBID("peer_id",a).setInt("version",2).getURI()}};e.exports=a}),null);
__d("RTCP2PCallActions",["RTCAppDispatcher","RTCP2PCallWindowHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reload:function(){b("RTCP2PCallWindowHandler").reload()},setCallType:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CALL_TYPE",callType:a})},setConnectionStatus:function(a){b("RTCAppDispatcher").dispatch({type:"SET_CONNECTION_STATUS",connectionStatus:a})},setMultiwayEscalationSupport:function(a,c){b("RTCAppDispatcher").dispatch({type:"SET_MULTIWAY_ESCALATION_SUPPORT",offerEscalationSupport:a,escalationConferenceName:c})},setRemoteSignalingExperiments:function(a){b("RTCAppDispatcher").dispatch({type:"SET_REMOTE_SIGNALING_EXPERIMENTS",remoteSignalingExperiments:a})},togglePopOutScreenContent:function(a){b("RTCAppDispatcher").dispatch({type:a?"POP_OUT_SCREEN_CONTENT":"POP_IN_SCREEN_CONTENT",stream:a})},processMessage:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_PROCESS_MESSAGE",message:a})},setIsCaller:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_SET_IS_CALLER",isCaller:a})},togglePoorNetworkQualityIndicator:function(a){b("RTCAppDispatcher").dispatch({type:a?"SHOW_POOR_NETWORK_QUALITY":"DISMISS_POOR_NETWORK_QUALITY"})},starRatingDone:function(a){a===void 0&&(a=!0),b("RTCAppDispatcher").dispatch({type:"P2P_STAR_RATING_DONE",done:a})}};e.exports=a}),null);
__d("FBRTCCallSummaryReducer",["FBRTCCallSummaryStore","FBRTCLogger","FBRTCMediaMetricParser","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCLogger").Key;a={setCallSummary:function(a,b){switch(b.type){case"SET_CALL_SUMMARY":return a.set("callSummary",b.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case"INCOMING_CALL_SUCCESS":case"CALL_SUCCESS":c=function c(){var d=b("RTCCallStore").getState().callInfo,e=d.conferenceState;d=d.callID;e!=="TERMINATED"&&a.callInfo.callID===d&&(a.callSummary.save(b("FBRTCCallSummaryStore").getInstance()),window.setTimeout(c,1e4))};c();b("FBRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case"ON_JOIN_REQUEST_SENT":a.callSummary.setJoinRequestSent();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_RECEIVED_JOIN_RESPONSE":a.callSummary.setJoinResponseReceived();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_JOIN_RESPONSE":a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"ON_PROCESSED_JOIN_RESPONSE":a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"DISMISS":a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case"RATING_SHOWN":a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"FEEDBACK_SHOWN":a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_RATING":a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_FEEDBACK":a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case"SUBMIT_SURVEY_CHOICE":a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("FBRTCClientMediaUpdateReducer",["FBRTCConstants","FBRTCMWProtocolStore","FBRTCRtcResponseStatusCode","RTCCallStore","RTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={reset:function(a,c){switch(c.type){case"RESET":return b("FBRTCMWProtocolStore").getInitialState()}return a},configureAudio:function(a,b){switch(b.type){case"AUDIO_MUTED":return g(a,"audio",!1);case"AUDIO_UNMUTED":return g(a,"audio",!0)}return a},configureVideo:function(a,b){switch(b.type){case"VIDEO_MUTED":return g(a,"video",!1);case"VIDEO_UNMUTED":return g(a,"video",!0)}return a},onClientMediaUpdateResponse:function(a,c){__p&&__p();switch(c.type){case"ON_CLIENT_MEDIA_UPDATE_RESPONSE":if(c.responseStatusCode!==b("FBRTCRtcResponseStatusCode").OK)return a;a=a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],c.currentVersion);if(a.clientMediaUpdateInfo.pendingResponse){a=a.setIn(["clientMediaUpdateInfo","pendingResponse"],!1);if(a.clientMediaUpdateInfo.pendingUpdate)return h(a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!1))}return a}return a},setLocalClientVersion:function(a,b){switch(b.type){case"SET_LOCAL_CLIENT_VERSION":return a.setIn(["clientMediaUpdateInfo","lastSyncedClientVersion"],b.version).setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:{}}))}return a}};function g(a,c,d){var e=b("RTCCallStore").getConnection(b("FBRTCConstants").SignalingProtocol.MULTIWAY);if(!e)return a;e=e.getLocalTracks().reduce(function(a,b){a[b.id]=b.kind===c?d:b.enabled;return a},{});return h(a.setIn(["clientMediaUpdateInfo","localMediaUpdates"],a.clientMediaUpdateInfo.localMediaUpdates.push({mediaStatus:e})))}function h(a){if(a.clientMediaUpdateInfo.pendingResponse)return a.setIn(["clientMediaUpdateInfo","pendingUpdate"],!0);var c=a.clientMediaUpdateInfo.localMediaUpdates.reduce(function(b,c,d){d>=a.clientMediaUpdateInfo.lastSyncedClientVersion&&b.push(c);return b},[]);if(c.length===0)return a;b("RTCMWProtocolHandler").clientMediaUpdate(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,a.clientMediaUpdateInfo.lastSyncedClientVersion,a.clientMediaUpdateInfo.localMediaUpdates.size,c);return a.setIn(["clientMediaUpdateInfo","pendingResponse"],!0)}e.exports=a}),null);
__d("FBRTCGroupCallParticipantsReducer",["MercuryIDs","RTCCallStore","RTCMWProtocolHandler","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_participantsToRing:new Set(),initThread:function(a,b){switch(b.type){case"INIT_THREAD":return a.merge({thread:b.thread,participants:(b=b.participants)!=null?b:a.participants})}return a},onParticipantsChanged:function(a,c){switch(c.type){case"ON_PARTICIPANT_LEFT":return a.set("participants",a.participants["delete"](b("MercuryIDs").getParticipantIDFromUserID(c.participantFBID)));case"ON_PARTICIPANTS_ADDED":var d=Object.keys(c.participants).map(function(a){return c.participants[a].fbid}).filter(function(a){return g._participantsToRing.has(a)});d.length!==0&&(d.forEach(function(a){return g._participantsToRing["delete"](a)}),b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,d));return a.set("participants",a.participants.merge(b("immutable").Map(c.participants)))}return a},addParticipantsToRing:function(a,b){switch(b.type){case"ADD_PARTICIPANTS_TO_RING":b.participantFBIDs.forEach(function(a){return g._participantsToRing.add(a)});return a}return a}};e.exports=g}),null);
__d("MovingAverage",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=b;this.$2=0;this.$3=(b||0)*a;this.$4=a;this.$5=0;this.$6=[];for(var c=0;c<a;c++)this.$6[c]=b}var b=a.prototype;b.add=function(a){if(a==null)return this.addNull();a=a==null?0:a;this.$3-=this.$6[this.$2]||0;this.$3+=a;this.$6[this.$2]==null&&(this.$5++,this.$5=Math.min(this.$5,this.$4));this.$6[this.$2]=a;this.$2=(this.$2+1)%this.$4;return this};b.addNull=function(){this.$3-=this.$6[this.$2]||0;this.$6[this.$2]!=null&&(this.$5--,this.$5=Math.max(this.$5,0));this.$6[this.$2]=null;this.$2=(this.$2+1)%this.$4;return this};b.getAvg=function(){return this.$5<this.$4&&this.$5!==0&&this.$1==null?this.$3/this.$5:this.$3/this.$4};b.getSum=function(){return this.$3};return a}();f.MovingAverage=a}),null);
__d("RTCMWDominantSpeakerDetector",["AudioContextSingleton","MovingAverage","RTCGroupCallActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MovingAverage").MovingAverage,h=300,i=900,j=1e3;a=function(){__p&&__p();function a(){this.intervalID=null,this.userToAudioLevels=new Map(),this.audioPollingCallbackIDs=new Map(),this.currentDominantSpeaker=null,this.lastSwitchTimeMSec=0}var c=a.prototype;c.start=function(){var a=this;this.intervalID=window.setInterval(function(){a.determineDominantSpeaker()},i)};c.stop=function(){window.clearInterval(this.intervalID)};c.determineDominantSpeaker=function(){var a=null,c=-1;this.userToAudioLevels.size>0?(this.userToAudioLevels.forEach(function(b,d){b.getAvg()>c&&(c=b.getAvg(),a=d)}),this.shouldSwitchDominantSpeaker(a)&&(b("RTCGroupCallActions").setDominantSpeaker(a),this.currentDominantSpeaker=a)):this.currentDominantSpeaker=null};c.shouldSwitchDominantSpeaker=function(a){return a===null||a===this.currentDominantSpeaker?!1:Date.now()-j>this.lastSwitchTimeMSec};c.addUserStream=function(a,c){__p&&__p();var d=this;this.audioPollingCallbackIDs.has(a)&&window.clearInterval(this.audioPollingCallbackIDs.get(a));if(c.getAudioTracks().length>0){var e=b("AudioContextSingleton").get();c=e.createMediaStreamSource(c);var f=e.createAnalyser();f.smoothingTimeConstant=.85;c.connect(f);e=f.frequencyBinCount;var g=new Uint8Array(e);this.audioPollingCallbackIDs.set(a,window.setInterval(function(){d.pollAudioLevels(a,f,g)},h))}};c.pollAudioLevels=function(a,b,c){b.getByteFrequencyData(c);c=c.reduce(function(a,b){return a+b});c=c/b.frequencyBinCount/256*40;b=(b=this.userToAudioLevels.get(a))!=null?b:new g(i/h);this.userToAudioLevels.set(a,b.add(c))};c.removeUserStream=function(a){this.audioPollingCallbackIDs.has(a)&&window.clearInterval(this.audioPollingCallbackIDs.get(a)),this.userToAudioLevels["delete"](a),this.currentDominantSpeaker===a&&this.determineDominantSpeaker()};c.getDominantSpeaker=function(){return this.currentDominantSpeaker};c.getUsersWithAudioLevels=function(){return this.userToAudioLevels};return a}();e.exports=a}),null);
__d("FBRTCGroupCallReducer",["FBRTCConstants","FBRTCParticipantCallState","FBRTCSupport","RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCEndCallReason","RTCMWDominantSpeakerDetector","RTCMWProtocolHandler","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout,h=b("FBRTCConstants").SignalingProtocol,i=5;a={setDominantSpeaker:function(a,c){__p&&__p();switch(c.type){case"SET_DOMINANT_SPEAKER":return a.set("dominantSpeakerFBID",c.dominantSpeakerFBID);case"SET_PINNED_SPEAKER":var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(h.MULTIWAY);if(!e)return a;b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),a.layout,c.pinnedSpeakerFBID,e.getRemoteMediaCnames());return a.set("pinnedSpeakerFBID",c.pinnedSpeakerFBID);case"ON_CONFERENCE_STATE":d=c.request.conferenceStateRequest();e=d.participantStates;c=e[a.pinnedSpeakerFBID];return c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?a.set("pinnedSpeakerFBID",null):a}return a},setLayout:function(a,c){__p&&__p();switch(c.type){case"SET_LAYOUT":var d=b("RTCCallStore").getState();d=d.callInfo;var e=b("RTCCallStore").getConnection(h.MULTIWAY);e&&b("RTCMWProtocolHandler").subscription(d.conferenceName,d.serverInfoData,e.getRemoteStreams(),c.layout,a.pinnedSpeakerFBID,e.getRemoteMediaCnames());return a.set("layout",c.layout);case"ON_CONFERENCE_STATE":if(b("FBRTCSupport").isMobileDevice()){b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);d=b("RTCCallStore").getConnectedRemoteUsersSize();return a.set("layout",b("UserAgent").isBrowser("Mobile Safari")&&d>=1||d>i?g.DOMINANT_SPEAKER:g.GRID)}}return a},setUpDominantSpeakerDetection:function(a,c){__p&&__p();if(b("FBRTCSupport").isSupportedSafariVersion()){var d;switch(c.type){case"ON_PROCESSED_JOIN_RESPONSE":d=new(b("RTCMWDominantSpeakerDetector"))();d.start();return a.set("dominantSpeakerDetector",d);case"ADD_REMOTE_STREAM":d=a.dominantSpeakerDetector;if(d!=null){var e=j(c);e&&c.stream&&d.addUserStream(e,c.stream)}return a;case"REMOVE_REMOTE_STREAM":d=a.dominantSpeakerDetector;if(d!=null){e=j(c);e&&d.removeUserStream(e)}return a;case"CALL_ERROR":case"HANGUP":case"END_CALL":case"DISMISS":d=a.dominantSpeakerDetector;d!=null&&d.stop();return a;case"SET_PINNED_SPEAKER":d=a.dominantSpeakerDetector,d!=null&&(c.pinnedSpeakerFBID?d.stop():d.start())}}return a},setLinkHash:function(a,b){switch(b.type){case"SET_LINKHASH":return a.set("linkHash",b.linkHash)}return a},processEndCallReason:function(a,c){switch(c.type){case"CALL_ERROR":case"HANGUP":case"END_CALL":case"DISMISS":return a.set("endCallReason",a.endCallReason||new(b("RTCEndCallReason"))(c.endCallReason))}return a}};function j(a){if(a.userID!=null)return a.userID;return a.stream&&a.stream.id.split(":").length>1?a.stream.id.split(":")[0]:null}e.exports=a}),null);
__d("FBRTCVideoDurationTrackerReducer",["FBRTCCallSummaryStore","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={track:function(a,c){__p&&__p();var d=a.videoDurationTrackerInfo,e=d.localVideoDurationTracker,f=d.remoteVideoDurationTracker;d=d.localScreenDurationTracker;switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":d.track(c.stream),d.isStarted()||d.start();case"ADD_LOCAL_STREAM":e.track(c.stream);e.isStarted()||e.start();return a;case"REMOVE_LOCAL_SCREEN_STREAM":d.pause(c.stream);return a;case"REPLACE_LOCAL_SCREEN_STREAM":d.track(c.newStream);e.track(c.newStream);return a;case"ADD_REMOTE_STREAM":case"TOGGLE_REMOTE_STREAM":d=b("RTCCallStore").getState();e=d.remoteUsers;c=e.find(function(a){return!a.isVideoMuted()});f.stop();f.start();f.track(c&&c.streams.first());return a}return a},update:function(a,b){switch(b.type){case"VIDEO_MUTED":case"VIDEO_UNMUTED":a.videoDurationTrackerInfo.localVideoDurationTracker.update()}return a},stop:function(a,c){__p&&__p();switch(c.type){case"DISMISS":case"END_CALL":case"HANGUP":c=a.videoDurationTrackerInfo;var d=b("RTCCallStore").getState();d=d.callSummary;c.localVideoDurationTracker.stop();c.remoteVideoDurationTracker.stop();c.localScreenDurationTracker.stop();d.setVideoDurations(c.localVideoDurationTracker.getDuration(),c.remoteVideoDurationTracker.getDuration());d.setScreenDuration(c.localScreenDurationTracker.getDuration());d.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("RTCCallStoreState",["CurrentUser","FBRTCCallSummary","RTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={debugID:0,callID:"",conferenceState:"NEW",conferenceName:"",protocol:"",serverInfoData:""};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.isInCall=function(){return this.conferenceState==="CONNECTING"||this.conferenceState==="CONNECTED"};return b}(b("immutable").Record(a));d={connections:b("immutable").Set(),localUser:new(b("RTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:b("immutable").Set(),callInfo:new c(),callSummary:b("FBRTCCallSummary").nullSummary(),mediaStatus:b("immutable").Map()};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("RTCCallReducer",["invariant","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","FBRTCScreenSharingUtils","RTCCallStore","RTCCallStoreState","RTCUser","RTCUtils","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol;function a(a,c){switch(c.type){case"INIT":return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case"RESET":return new(b("RTCCallStoreState"))();case"RESET_FOR_REDIAL":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.callID).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"CALL_COLLISION":return a.set("callInfo",a.callInfo.set("conferenceState","NEW").set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,b){switch(b.type){case"CALL":return a.setIn(["callInfo","conferenceState"],"CONNECTING").set("connections",a.connections.add(b.peerConnection));case"CALL_ERROR":return a.setIn(["callInfo","conferenceState"],"TERMINATED");case"CALL_SUCCESS":return b.connected?a.setIn(["callInfo","conferenceState"],"CONNECTED"):a}return a}function d(a,b){switch(b.type){case"INCOMING_CALL_SUCCESS":return a.setIn(["callInfo","conferenceState"],"CONNECTED")}return a}function f(a,c){__p&&__p();switch(c.type){case"HANGUP":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATING").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"DISMISS":c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case"END_CALL":a.connections.forEach(function(a){return a.close()});return a.setIn(["callInfo","conferenceState"],"TERMINATED").set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.setIn(["callInfo","conferenceState"],"TERMINATED")}return a}function i(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CLEAR_P2P_CONNECTION":var d=b("RTCCallStore").getConnection(h.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("RTCUtils").transferAudioTracks(g,c);b("RTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function j(a,c){__p&&__p();switch(c.type){case"GROUP_ESCALATION_CANCEL":var d=b("RTCCallStore").getConnection(h.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("FBRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState","CONNECTED").set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case"ON_PARTICIPANTS_ADDED":var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("RTCUser"))({FBID:d.fbid,profileUrl:new(b("URI"))(d.href),profilePictureUrl:e,isGuestUser:d.user_type==="guest",isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function l(a,c){__p&&__p();switch(c.type){case"ON_CONFERENCE_STATE":var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var c=f.participantStates[a.FBID];c&&c.state===b("FBRTCParticipantCallState").DISCONNECTED&&(a=a.removeAllStreams());return c?a.setParticipantState(c):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?"CONNECTED":a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a.setIn(["remoteUsers"],g).setIn(["callInfo","conferenceState"],h)}return a}function m(a,b){switch(b.type){case"ON_JOIN_RESPONSE":return a.setIn(["callInfo","serverInfoData"],b.serverInfoData)}return a}function n(a,b){switch(b.type){case"INIT_LOCAL_USER":return a.set("localUser",b.localUser);case"INIT_REMOTE_USERS":case"UPDATE_REMOTE_USERS":return a.set("remoteUsers",b.remoteUsers)}return a}function o(a,b){switch(b.type){case"AUDIO_MUTED":case"AUDIO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteAudio());case"VIDEO_MUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!0));case"VIDEO_UNMUTED":return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function p(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_STREAM":return a.set("localUser",a.localUser.addStream(c.stream));case"REMOVE_LOCAL_STREAM":return a.set("localUser",a.localUser.removeStream(c.stream));case"REPLACE_LOCAL_STREAM":var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case"STOP_LOCAL_STREAM":return a.set("localUser",a.localUser.stopVideo());case"REMOVE_ALL_LOCAL_STREAMS":if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("RTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function q(a,c){__p&&__p();switch(c.type){case"ADD_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.addScreenStream(c.stream));case"REMOVE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.removeScreenStream(c.stream));case"REMOVE_ALL_LOCAL_SCREEN_STREAMS":if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case"REPLACE_LOCAL_SCREEN_STREAM":return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function r(a,b){__p&&__p();var c;switch(b.type){case"ADD_REMOTE_STREAM":c=v(a,b);if(!c)return a;var d=a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addStream(b.stream)));return u(d,{type:"TOGGLE_REMOTE_STREAM",mediaStatus:d.mediaStatus.toJS()});case"REMOVE_REMOTE_STREAM":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeStream(b.stream)));case"REMOVE_ALL_REMOTE_STREAMS":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeAllStreams().removeAllScreenStreams()))}return a}function s(a,b){var c;switch(b.type){case"ADD_REMOTE_TRACK":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()));case"REMOVE_REMOTE_TRACK":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.clone()))}return a}function t(a,b){var c;switch(b.type){case"ADD_REMOTE_SCREEN_STREAM":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.addScreenStream(b.stream)));case"REMOVE_REMOTE_SCREEN_STREAM":c=v(a,b);return!c?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](c).add(c.removeScreenStream(b.stream)))}return a}function u(a,c){__p&&__p();var d;switch(c.type){case"TOGGLE_REMOTE_STREAM":return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case"REMOTE_AUDIO_MUTED":d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case"REMOTE_AUDIO_UNMUTED":d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case"REMOTE_VIDEO_MUTED":d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case"REMOTE_VIDEO_UNMUTED":d=v(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function v(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function w(a,b){switch(b.type){case"WAIT_FOR_USER_INPUT":return a.callInfo.conferenceState==="NEW"?a.setIn(["callInfo","conferenceState"],"AWAITING_USER_START"):a}return a}e.exports={abortMultiwayEscalationProcess:j,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:i,onParticipantsChanged:k,incomingCallStart:d,processUsers:n,toggleLocalStream:o,processLocalStream:p,processLocalScreenStream:q,processRemoteStream:r,processRemoteScreenStream:t,processRemoteTrack:s,toggleRemoteStream:u,processConferenceState:l,processJoinResponse:m,waitForUserInput:w}}),null);
__d("RTCGroupCallEscalationStoreState",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({aborted:!1,inProgress:!1,toRing:!1,p2pCallSummary:null,readyToTransition:!1,usersToRing:null}));e.exports=a}),null);
__d("RTCGroupCallEscalationStoreReducer",["FBRTCParticipantCallState","RTCCallStore","RTCGroupCallEscalationActionTypes","RTCGroupCallEscalationStore","RTCGroupCallEscalationStoreState","RTCMWProtocolHandler","RTCP2PCallStore","RTWebUserActionLogger","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set([b("FBRTCParticipantCallState").UNKNOWN,b("FBRTCParticipantCallState").DISCONNECTED,b("FBRTCParticipantCallState").NO_ANSWER,b("FBRTCParticipantCallState").REJECTED,b("FBRTCParticipantCallState").UNREACHABLE,b("FBRTCParticipantCallState").CONNECTION_DROPPED,b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED,b("FBRTCParticipantCallState").IN_ANOTHER_CALL,b("FBRTCParticipantCallState").RING_TYPE_UNSUPPORTED]);function a(a,c){switch(c.type){case"GROUP_ESCALATION_CANCEL":b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_cancel"});return a.withMutations(function(a){a.set("aborted",!0).set("inProgress",!1).set("toRing",!1).set("readyToTransition",!1).set("usersToRing",null)})}return a}function c(a,c){switch(c.type){case"HANGUP":case"END_CALL":case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.withMutations(function(a){a.set("aborted",!1).set("inProgress",!1).set("toRing",!1).set("usersToRing",null)});case"RESET":return new(b("RTCGroupCallEscalationStoreState"))()}return a}function d(a,b){switch(b.type){case"GROUP_ESCALATION_SET_P2P_CALLSUMMARY":var c=b.p2pCallSummary;if(c)return a.withMutations(function(a){a.set("p2pCallSummary",c)})}return a}function f(a,c){switch(c.type){case"GROUP_ESCALATION_START":b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_start"});return a.set("inProgress",!0).set("readyToTransition",!1)}return a}function h(a,c){if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_JOIN_REQUEST_SENT":b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setEscalationConnectingToMultiway()});break;case"ON_JOIN_RESPONSE":b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationConnectedToMultiway(),c.serverInfoData&&a.setServerInfoData(c.serverInfoData)});break}return a}function i(a,c){__p&&__p();if(!a.readyToTransition&&a.inProgress)switch(c.type){case"ON_CONFERENCE_STATE":c=c.request.conferenceStateRequest();if(c){var d=c.participantStates;c=a.toRing;var e=!1,f=Object.keys(d).every(function(a){return d[a].state===b("FBRTCParticipantCallState").CONNECTED});if(f){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"group_escalation_success"});b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationPeerConnectedToMultiway(),a.setEscalationConnectedToMultiway(),a.setReadyToEscalate()});var h=b("RTCP2PCallStore").getState();h=h.protocolHandler;h.shutDownP2PListenersForMultiwayEscalation();if(a.usersToRing&&c){h=a.usersToRing.valueSeq().map(function(a){return a.fbid}).filter(Boolean).toArray();b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,h);c=!1}}else e=Object.keys(d).some(function(a){return g.has(d[a].state)}),e&&b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){return a.setInvalidP2PEscalationState()});return a.set("aborted",e).set("readyToTransition",f).set("inProgress",!(f||e)).set("toRing",c)}}return a}function j(a,b){switch(b.type){case"GROUP_ESCALATION_SET_USERS_TO_RING":if(b.usersToRing)return a.set("usersToRing",b.usersToRing).set("toRing",!0)}return a}e.exports={abortEscalation:a,callStart:f,clearStore:c,onMultiwayConnectionSignaling:h,onParticipantsConnected:i,setP2PCallSummary:d,setUsersToRing:j}}),null);
__d("RTCCallType",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({AUDIO_ONLY:"AUDIO_ONLY",VIDEO_ONLY:"VIDEO_ONLY",AUDIO_VIDEO:"AUDIO_VIDEO",NO_AUDIO_VIDEO:"NO_AUDIO_VIDEO"});e.exports=a}),null);
__d("RTCP2PCallAdminMessageReducers",["FBRTCAdminMessage","FBRTCCallConstants","RTCAppDispatcher","RTCCallStore","RTCCallType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCCallConstants").FBRTCCallType;function a(a,c){switch(c.type){case"SET_CALL_SUMMARY":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);c=b("RTCCallStore").getState();c=c.callSummary;return a.set("adminMessage",new(b("FBRTCAdminMessage"))(c.peerID,c.callID));default:return a}}function c(a,b){switch(b.type){case"SET_CONNECTION_STATUS":var c=a.adminMessage;c&&b.connectionStatus==="CONNECTED"&&c.onCallConnected();return a;default:return a}}function d(a,c){switch(c.type){case"SET_END_CALL_REASON":var d=a.adminMessage,e=a.escalationConferenceName;d&&(d.onCallEnded(),a.isCaller&&d.submit(a.callType===b("RTCCallType").AUDIO_ONLY?g.VOICE_CALL:g.VIDEO_CALL,c.endCallReason.getReasonID(),e));return a;default:return a}}e.exports={processCallInit:a,processCallStart:c,processCallEnd:d}}),null);
__d("RTCP2PCallEscalationStoreState",["FBRTCConstants","FBRTCMessage","immutable"],(function(a,b,c,d,e,f){a=b("FBRTCConstants").CallType;c=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({awaitingACK:!1,callType:a.VOIP,escalated:!1,escalateMediaStream:null,failureReason:null,initiatedEscalation:!1,inProgress:!1,request:null,response:null,token:null}));e.exports=c}),null);
__d("RTCP2PCallEscalationStoreReducers",["FBRTCConstants","RTCCallType","RTCP2PCallEscalationStoreState","RTCP2PCallEscalator","RTCP2PCallStore","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").CallType;a=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_START":if(a.inProgress)return a;if(a.escalated||!b("RTCP2PCallStore").isAudioOnly())return a;b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_start"});return a.withMutations(function(a){a.set("awaitingACK",!0).set("initiatedEscalation",!0).set("failureReason",null).set("inProgress",!0).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!0))});case"P2P_CALL_ESCALATION_SUCCESS":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationSucceeded();b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_success"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",g.ESCALATED).set("escalated",!0).set("inProgress",!1).set("request",null).set("response",!0).set("token",null)});case"P2P_CALL_ESCALATION_FAILURE":if(!a.inProgress)return a;else if("token"in c&&c.token!==a.token)return a;b("RTCP2PCallEscalator").onEscalationFailed();if(c.reason==="denied"){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_denied"});return a.withMutations(function(a){a.set("awaitingACK",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason||null).set("inProgress",!1).set("request",null).set("response",c.response||null).set("token",null).set("escalateMediaStream",null)})}else c.reason==="cancelled"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_cancelled"}):c.reason==="timeout"?b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_timeout"}):b("RTWebUserActionLogger").logCheckpoint({checkpoint:"video_escalation_failed"});b("RTCP2PCallStore").getState().protocolHandler.generateEscalationRequestToken(!1);return a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("initiatedEscalation",!1).set("callType",g.ESCALATION_DECLINED).set("escalated",!1).set("failureReason",c.reason).set("token",null).set("escalateMediaStream",null)});case"SET_P2P_CALL_ESCALATION_MEDIA":return a.set("escalateMediaStream",c.stream);default:return a}};c=function(a,c){__p&&__p();switch(c.type){case"P2P_CALL_ESCALATION_SET_REQUEST":var d=c.request;if(d==null)return a;return!b("RTCP2PCallEscalator").requestVideoOn(d.msg)?a.withMutations(function(a){a.set("awaitingACK",!1).set("inProgress",!1).set("request",null).set("response",null).set("token",null)}):a.withMutations(function(a){a.set("inProgress",!0).set("request",c.request).set("response",null).set("token",null)});case"P2P_CALL_ESCALATION_SET_RESPONSE":if(c.response==null)return a;else if(a.request==null)return a;return a.withMutations(function(a){a.set("awaitingACK",!0).set("callType",c.response?g.ESCALATED:g.ESCALATION_DECLINED).set("response",c.response).set("token",b("RTCP2PCallStore").getState().protocolHandler.generateEscalationResponseToken(a.request,c.response))});case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;return a.response==null||a.request==null||c.token!==a.token||!a.awaitingACK?a:a.withMutations(function(a){a.set("awaitingACK",!1).set("callType",a.response?g.ESCALATED:g.ESCALATION_DECLINED).set("escalated",a.response).set("inProgress",!1).set("request",null).set("response",null).set("token",null)});default:return a}};d=function(a,c){__p&&__p();switch(c.type){case"RESET":return new(b("RTCP2PCallEscalationStoreState"))();case"SET_CALL_TYPE":switch(c.callType){case b("RTCCallType").AUDIO_VIDEO:case b("RTCCallType").VIDEO_ONLY:return a.set("callType",g.DIRECT_VIDEO)}return a;case"P2P_CALL_ESCALATION_ACK":if(c.token==null)return a;if(!a.awaitingACK)return a;else if(c.token!==a.token)return a;return a.set("awaitingACK",!1);default:return a}};e.exports={Alice:a,Bob:c,common:d}}),null);
__d("RTCP2PCallReducer",["FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","RTCAppDispatcher","RTCCallStore","RTCCallType","RTCP2PCallEscalationStore","RTCP2PCallStoreState","RTCP2PCallWindowHandler","RTCP2PProtocolHandler","RTCScreenSharingWindowHandler","RTCSignalingExperiments","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function a(a,c){__p&&__p();switch(c.type){case"INIT":var d=c.callType,e=c.isCaller,f=c.protocol;return f===g.P2P&&d&&e!=null?a.set("protocolHandler",a.protocolHandler||new(b("RTCP2PProtocolHandler"))()).set("isCaller",e).set("callType",d):a;case"RESET":return new(b("RTCP2PCallStoreState"))();case"RESET_FOR_REDIAL":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);f=b("RTCCallStore").getState().remoteUsers.first();if(f==null)return a;a.protocolHandler.destroy();return a.set("connectionStatus","INIT").set("endCallReason",null).set("protocolHandler",new(b("RTCP2PProtocolHandler"))().init(f.FBID,Number(c.conferenceName))).set("signalingExperiments",new(b("RTCSignalingExperiments"))());case"CALL_COLLISION":b("RTCAppDispatcher").waitFor([b("RTCCallStore").getDispatchToken()]);a.protocolHandler.init(c.peerID,Number(c.conferenceName));return a.set("connectionStatus","INIT").set("endCallReason",null).set("signalingExperiments",new(b("RTCSignalingExperiments"))());default:return a}}function c(a,c){switch(c.type){case"HANGUP":case"DISMISS":case"HANGUP_ERROR":case"HANGUP_SUCCESS":case"END_CALL":case"REMOVE_REMOTE_SCREEN_STREAM":case"RESET_FOR_REDIAL":b("RTCScreenSharingWindowHandler").close();return a.withMutations(function(a){return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened()).set("isRedialFooterButtonShown",(b("RTWebClientFeatureGating").shouldAlwaysShowRedial()||b("RTCP2PProtocolHandler").showRedialButton())&&!b("FBRTCConfig").isVCEndpointCall()).set("isStarRatingShown",b("RTCP2PProtocolHandler").showStarRating())});default:return a}}function d(a,c){switch(c.type){case"SET_CALL_TYPE":return a.set("callType",c.callType);case"P2P_CALL_ESCALATION_SET_RESPONSE":b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return a.set("callType",c.response?b("RTCCallType").AUDIO_VIDEO:b("RTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_FAILURE":return a.set("callType",b("RTCCallType").AUDIO_ONLY);case"P2P_CALL_ESCALATION_SUCCESS":b("RTCAppDispatcher").waitFor([b("RTCP2PCallEscalationStore").getDispatchToken()]);return b("RTCP2PCallEscalationStore").isEscalated()?a.set("callType",b("RTCCallType").AUDIO_VIDEO):a;default:return a}}function f(a,c){switch(c.type){case"SET_CONNECTION_STATUS":if(a.connectionStatus!==c.connectionStatus){b("RTCP2PCallWindowHandler").updateCallInProgressIndicator(c.connectionStatus);return a.set("connectionStatus",c.connectionStatus)}default:return a}}function h(a,b){switch(b.type){case"SET_END_CALL_REASON":return a.set("endCallReason",b.endCallReason);default:return a}}function i(a,b){switch(b.type){case"SET_MULTIWAY_ESCALATION_SUPPORT":a=a.set("offerEscalationSupport",b.offerEscalationSupport);b.escalationConferenceName&&(a=a.set("escalationConferenceName",b.escalationConferenceName));return a;default:return a}}function j(a,c){switch(c.type){case"POP_IN_SCREEN_CONTENT":b("RTCScreenSharingWindowHandler").close();return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());case"POP_OUT_SCREEN_CONTENT":var d=b("RTCCallStore").getState(),e=d.remoteUsers.first().FBID;d=d.callInfo;b("RTCScreenSharingWindowHandler").open(e,c.stream,d);return a.set("isScreenContentPoppedOut",b("RTCScreenSharingWindowHandler").isWindowOpened());default:return a}}function k(a,b){switch(b.type){case"SET_REMOTE_SIGNALING_EXPERIMENTS":return a.set("signalingExperiments",a.signalingExperiments.setRemote(b.remoteSignalingExperiments));default:return a}}function l(a,b){switch(b.type){case"P2P_PROCESS_MESSAGE":return a.set("isRemoteVideoSupported",b.message.isRemoteVideoSupported()).set("isPeerOnMobile",b.message.isFromMobile());default:return a}}function m(a,b){switch(b.type){case"P2P_SET_IS_CALLER":return a.set("isCaller",b.isCaller);case"CALL_COLLISION":return a.set("isCaller",!0);default:return a}}function n(a,b){switch(b.type){case"SET_CONNECTION_STATUS":return b.connectionStatus==="CONNECTED"?a.set("wasConnected",!0):a;case"RESET_FOR_REDIAL":return a.set("wasConnected",!1);case"CALL_COLLISION":return a.set("wasConnected",!1);default:return a}}function o(a,b){switch(b.type){case"P2P_STAR_RATING_DONE":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",b.done);case"RESET_FOR_REDIAL":return a.set("isStarRatingShown",!1).set("wasStarRatingDone",!1);default:return a}}function p(a,b){switch(b.type){case"SHOW_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!0);case"DISMISS_POOR_NETWORK_QUALITY":return a.set("isPoorNetworkQualityShown",!1);default:return a}}e.exports={callInit:a,callEnd:c,processCallType:d,processConnectionStatus:f,processEndCallReason:h,processIsCaller:m,processMessage:l,processMultiwayEscalationSupport:i,processPoorNetworkQuality:p,processPoppedOutScreenContent:j,processSignalingExperiments:k,processWasConnected:n,processWasStarRatingDone:o}}),null);
__d("RTCStreamDurationTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();var c=this;a===void 0&&(a="mixed");this.$3=0;this.$4=0;this.$5=!1;this.update=function(){if(!c.$5)return;c.$6()?c.$4===0&&(c.$4=b("performanceNow")()):c.pause(c.$2)};this.$1=a}var c=a.prototype;c.isStarted=function(){return this.$5};c.track=function(a){__p&&__p();if(a===this.$2){this.update();return}if(this.$2&&this.$5){var b=this.$2;b.removeEventListener("addtrack",this.update);b.removeEventListener("removetrack",this.update)}a?(this.$5&&this.$6()&&(this.$3=this.getDuration()),this.$2=a,this.$5&&this.start()):this.stop()};c.$6=function(){return!this.$2?!1:this.$7().some(function(a){return a.enabled})};c.$7=function(){if(!this.$2)return[];switch(this.$1){case"audio":return this.$2.getAudioTracks();case"video":return this.$2.getVideoTracks();case"screen":return this.$2.getVideoTracks();default:return this.$2.getTracks()}};c.pause=function(a){if(!this.$5)return;if(this.$2!==a)return;this.$3=this.getDuration();this.$4=0};c.getDuration=function(){return this.$4===0?this.$3:this.$3+b("performanceNow")()-this.$4};c.start=function(){this.$5=!0;this.$6()&&(this.$4=b("performanceNow")());if(this.$2){var a=this.$2;a.addEventListener("addtrack",this.update);a.addEventListener("removetrack",this.update)}};c.stop=function(){__p&&__p();if(!this.$5)return;this.$3=this.getDuration();this.$5=!1;this.$4=0;if(this.$2){var a=this.$2;a.removeEventListener("addtrack",this.update);a.removeEventListener("removetrack",this.update)}};return a}();e.exports=a}),null);
__d("FBRTCGroupCallStoreState",["RTCStreamDurationTracker","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={localVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),remoteVideoDurationTracker:new(b("RTCStreamDurationTracker"))("video"),localScreenDurationTracker:new(b("RTCStreamDurationTracker"))("screen")};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={dominantSpeakerFBID:null,endCallReason:null,layout:null,linkHash:null,participants:b("immutable").Map(),pinnedSpeakerFBID:null,thread:null,videoDurationTrackerInfo:new c(),dominantSpeakerDetector:null};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("FBRTCGroupCallStore",["FBRTCGroupCallParticipantsReducer","FBRTCGroupCallReducer","FBRTCGroupCallStoreState","FBRTCVideoDurationTrackerReducer","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("FBRTCGroupCallParticipantsReducer").addParticipantsToRing,b("FBRTCGroupCallParticipantsReducer").initThread,b("FBRTCGroupCallParticipantsReducer").onParticipantsChanged,b("FBRTCGroupCallReducer").processEndCallReason,b("FBRTCGroupCallReducer").setDominantSpeaker,b("FBRTCGroupCallReducer").setUpDominantSpeakerDetection,b("FBRTCGroupCallReducer").setLayout,b("FBRTCGroupCallReducer").setLinkHash,b("FBRTCVideoDurationTrackerReducer").track,b("FBRTCVideoDurationTrackerReducer").update,b("FBRTCVideoDurationTrackerReducer").stop];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("FBRTCGroupCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.hadVideoDuration=function(){var a=this.getState().videoDurationTrackerInfo,b=a.localVideoDurationTracker;a=a.remoteVideoDurationTracker;return b.getDuration()>0||a.getDuration()>0};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("FBRTCMWProtocolStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={pendingResponse:!1,pendingUpdate:!1,lastSyncedClientVersion:1,localMediaUpdates:b("immutable").List([{mediaStatus:{}}])};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));d={clientMediaUpdateInfo:new c()};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(d));e.exports=f}),null);
__d("FBRTCMWProtocolStore",["FBRTCClientMediaUpdateReducer","FBRTCMWProtocolStoreState","FluxReduceStore","RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("FBRTCClientMediaUpdateReducer").configureAudio,b("FBRTCClientMediaUpdateReducer").configureVideo,b("FBRTCClientMediaUpdateReducer").onClientMediaUpdateResponse,b("FBRTCClientMediaUpdateReducer").setLocalClientVersion,b("FBRTCClientMediaUpdateReducer").reset];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("FBRTCMWProtocolStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCallStore",["FBRTCCallSummaryReducer","FBRTCCallSummaryStore","FBRTCParticipantCallState","FluxReduceStore","RTCAppDispatcher","RTCCallReducer","RTCCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("FBRTCCallSummaryReducer").onCallEnded,b("FBRTCCallSummaryReducer").onCallStarted,b("FBRTCCallSummaryReducer").onMessageSignaling,b("FBRTCCallSummaryReducer").onSurveyResult,b("FBRTCCallSummaryReducer").setCallSummary,b("RTCCallReducer").abortMultiwayEscalationProcess,b("RTCCallReducer").callEnd,b("RTCCallReducer").callInit,b("RTCCallReducer").callStart,b("RTCCallReducer").completeTransitionToMultiway,b("RTCCallReducer").incomingCallStart,b("RTCCallReducer").onParticipantsChanged,b("RTCCallReducer").processConferenceState,b("RTCCallReducer").processJoinResponse,b("RTCCallReducer").processLocalScreenStream,b("RTCCallReducer").processLocalStream,b("RTCCallReducer").processRemoteScreenStream,b("RTCCallReducer").processRemoteStream,b("RTCCallReducer").processRemoteTrack,b("RTCCallReducer").processUsers,b("RTCCallReducer").toggleLocalStream,b("RTCCallReducer").toggleRemoteStream,b("RTCCallReducer").waitForUserInput];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};d.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};d.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};d.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())};d.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};d.getConnectedRemoteUsersSize=function(){return this.getState().remoteUsers.count(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCGroupCallEscalationStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCGroupCallEscalationStoreReducer","RTCGroupCallEscalationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCGroupCallEscalationStoreReducer").abortEscalation,b("RTCGroupCallEscalationStoreReducer").callStart,b("RTCGroupCallEscalationStoreReducer").clearStore,b("RTCGroupCallEscalationStoreReducer").onMultiwayConnectionSignaling,b("RTCGroupCallEscalationStoreReducer").onParticipantsConnected,b("RTCGroupCallEscalationStoreReducer").setP2PCallSummary,b("RTCGroupCallEscalationStoreReducer").setUsersToRing];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCGroupCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().readyToTransition};d.logToP2PCallSummary=function(a){var c=this.getState();c=c.p2pCallSummary;c&&(a(c),c.save(b("FBRTCCallSummaryStore").getInstance()))};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallEscalationStore",["FluxReduceStore","RTCAppDispatcher","RTCP2PCallEscalationStoreReducers","RTCP2PCallEscalationStoreState","RTCP2PCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCP2PCallEscalationStoreReducers").Alice,b("RTCP2PCallEscalationStoreReducers").Bob,b("RTCP2PCallEscalationStoreReducers").common];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCP2PCallEscalationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.didCurrentUserInitiate=function(){return this.getState().initiatedEscalation};d.isInProgress=function(){return this.getState().inProgress};d.isEscalated=function(){return this.getState().escalated};d.getEscalateMediaStream=function(){return this.getState().escalateMediaStream};d.remoteWillNotInitSDPUpdate=function(){return b("RTCP2PCallStore").getState().isPeerOnMobile||b("RTCP2PCallStore").getState().signalingExperiments.remoteSupport("video_escalation_by_unmute")};d.isNegotiationAllowed=function(){var a=this.getState();return this.remoteWillNotInitSDPUpdate()||!a.request};d.isStarted=function(){var a=this.getState();return a.inProgress&&a.token!==null};d.getToken=function(){return this.getState().token};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallStore",["FluxReduceStore","RTCAppDispatcher","RTCCallType","RTCP2PCallAdminMessageReducers","RTCP2PCallReducer","RTCP2PCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCP2PCallReducer").callEnd,b("RTCP2PCallReducer").callInit,b("RTCP2PCallReducer").processCallType,b("RTCP2PCallReducer").processConnectionStatus,b("RTCP2PCallReducer").processEndCallReason,b("RTCP2PCallReducer").processPoppedOutScreenContent,b("RTCP2PCallReducer").processMultiwayEscalationSupport,b("RTCP2PCallReducer").processSignalingExperiments,b("RTCP2PCallReducer").processMessage,b("RTCP2PCallReducer").processIsCaller,b("RTCP2PCallReducer").processWasConnected,b("RTCP2PCallReducer").processWasStarRatingDone,b("RTCP2PCallReducer").processPoorNetworkQuality,b("RTCP2PCallAdminMessageReducers").processCallInit,b("RTCP2PCallAdminMessageReducers").processCallStart,b("RTCP2PCallAdminMessageReducers").processCallEnd];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCP2PCallStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.isAudioOnly=function(){return this.getState().callType===b("RTCCallType").AUDIO_ONLY};d.isCaller=function(){return this.getState().isCaller};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCP2PCallStoreState",["RTCCallType","RTCP2PProtocolHandler","RTCSignalingExperiments","immutable"],(function(a,b,c,d,e,f){"use strict";a={adminMessage:null,callType:b("RTCCallType").AUDIO_ONLY,connectionStatus:"INIT",endCallReason:null,escalationConferenceName:null,isCaller:!1,isPeerOnMobile:!1,isPoorNetworkQualityShown:!1,isRedialFooterButtonShown:!1,isRemoteVideoSupported:!0,isScreenContentPoppedOut:!1,isStarRatingShown:!1,offerEscalationSupport:!1,protocolHandler:new(b("RTCP2PProtocolHandler"))(),signalingExperiments:new(b("RTCSignalingExperiments"))(),wasConnected:!1,wasStarRatingDone:!1};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("RTCCallInitUtils",["invariant","CurrentUser","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","MercuryIDs","MessengerParticipants.bs","MessengerState.bs","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCUser","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallType,i=b("FBRTCConstants").SignalingProtocol;a={initializeCallSummary:function(a){var c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),a.peerID,a.callID,a.isCaller);b("RTCCallActions").setCallSummary(c);b("RTCCallStore").mutateCallSummary(function(b){b.onPopupOpened(),b.setCallType(a.protocol===i.P2P?a.isAudio?h.VOIP:h.DIRECT_VIDEO:"mws"),b.setActiveConnection(a.protocol===i.P2P?"p2p":"mws")})},initializeRTCUsers:function(a,c){var d=this;a=a.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=b("immutable").Map(a);d.initializeParticipantsAndStartCall(a,!0,c)})},initializeParticipantsAndStartCall:function(a,c,d){var e=this,f=a.keySeq().toArray();b("MessengerParticipants.bs").getBigImageMultiWithSize(f,function(f){c&&b("RTCCallActions").initRemoteUsers(a.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}).map(function(a){return e._createRTCUser(a,f)}).toSet());var g=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("RTCCallActions").initLocalUser(e._createRTCUser(a.get(g),f));d()},100)},initializeThreadFromCollisionContext:function(a){__p&&__p();var c=a.peerID;a=a.groupThreadID;a=c!=null?c:a;if(a==null)return;c=c!=null?b("MercuryIDs").getThreadIDFromUserID(a):b("MercuryIDs").getThreadIDFromThreadFBID(a);if(c===null)return;b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(a){b("RTCGroupCallActions").initThread(a,null)})},_createRTCUser:function(a,c){var d=a.big_image_src,e=a.fbid,f=a.user_type,h=a.href,i=a.image_src,j=a.is_messenger_user,k=a.name,l=a.room_location,m=a.short_name;a=a.vanity;e||g(0,1174);if(c){var n=b("MercuryIDs").getParticipantIDFromUserID(e);d=c[n]}return new(b("RTCUser"))({FBID:e,isGuestUser:f==="guest",isMessengerUser:!!j,profileUrl:new(b("URI"))(h),profilePictureUrl:d||i,roomLocation:l,userName:k,userShortName:m,vanity:a?a:""})}};e.exports=a}),null);
__d("RTCGroupCallEscalationActions",["RTCAppDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";a={start:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_START"})},cancel:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_CANCEL",p2pCallSummary:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SUCCESS"})},setUsersToRing:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SET_USERS_TO_RING",usersToRing:a})},setP2PCallSummary:function(a){b("RTCAppDispatcher").dispatch({type:"GROUP_ESCALATION_SET_P2P_CALLSUMMARY",p2pCallSummary:a})}};e.exports=a}),null);
__d("RTCGroupCallEscalator",["CurrentUser","FBRTCConsoleLogger","FBRTCConstants","FBRTCGroupCallStore","FBRTCMWProtocolStore","FBRTCScreenSharingUtils","MercuryIDs","MessengerParticipants.bs","RTCAppDispatcher","RTCCallStore","RTCGroupCallActions","RTCGroupCallEscalationActions","RTCGroupCallEscalationStore","RTCMWProtocolHandler","RTCUtils","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout,h=45e3;a=function(){__p&&__p();function a(a,c,d,e){this.$3=a,this.$4=c,this.$5=d,this.$1=String(e),b("RTCGroupCallEscalationActions").setP2PCallSummary(b("RTCCallStore").getState().callSummary),this.$6=[d],this.$8=null}var c=a.prototype;c.getParticipants=function(){return this.$8};c.$9=function(){var a=this.$3,c=this.$1;return window.setTimeout(function(){var d=b("RTCGroupCallEscalationStore").isEscalated(),e=b("RTCCallStore").getState();e=e.callInfo;!d&&(e.callID===c||e.conferenceName===a)&&(i("Group Escalation timed out"),b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(a){a.setEscalationTimedOut(),b("RTCGroupCallEscalationActions").cancel(a)}))},h)};c.startEscalationToMultiway=function(){__p&&__p();var a=this;i("Escalating P2P call to Multiway call %o",this.$3);var c=b("RTCGroupCallEscalationStore").getState().inProgress;if(c)return;b("RTCGroupCallEscalationActions").start();this.$2=this.$9();this.$7=new(b("RTCMWProtocolHandler"))();b("RTCAppDispatcher").explicitlyRegisterStores([b("FBRTCGroupCallStore"),b("FBRTCMWProtocolStore")]);b("RTCGroupCallActions").setLayout(g.GRID);var d=b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID());b("MessengerParticipants.bs").get(d,function(c){var e={};e[d]=c;c=b("immutable").Map(e);a.$8=c;b("RTCGroupCallActions").initThread(null,c);a.$10()})};c.$10=function(){var a=b("RTCCallStore").getState().localUser.getStream(),c=b("RTCCallStore").getState().localUser.getScreenStream(),d=a;c&&b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()&&(a&&b("RTCUtils").transferAudioTracks(c,a),d=c);d&&this.$7.onStreamReady(d,this.$6,this.$3,!0,{callTrigger:"multiway_escalation",p2pCallID:this.$1})};return a}();a.ESCALATION_TIMEOUT=h;function i(){}e.exports=a}),null);
/**
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-interop-array-equals",[],(function $module_sdp_interop_array_equals(global,require,requireDynamic,requireLazy,module,exports){

/* Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

module.exports = function arrayEquals(array) {
    // if the other array is a falsy value, return
    if (!array)
        return false;

    // compare lengths - can save a lot of time
    if (this.length != array.length)
        return false;

    for (var i = 0, l = this.length; i < l; i++) {
        // Check if we have nested arrays
        if (this[i] instanceof Array && array[i] instanceof Array) {
            // recurse into the nested arrays
            if (!arrayEquals.apply(this[i], [array[i]]))
                return false;
        } else if (this[i] != array[i]) {
            // Warning - two different object instances will never be equal:
            // {x:20} != {x:20}
            return false;
        }
    }
    return true;
};

/*  */}),null);
/**
 *
 * 
 * @preserve-header
 * @preserve-whitespace
 * @format
 */__d("RTCSDPInterop",["sdp-interop-array-equals","sdp-interop-transform"],(function $module_RTCSDPInterop(global,require,requireDynamic,requireLazy,module,exports){var


































RTCSDPInterop=function(){"use strict";












































function RTCSDPInterop(){







this.cache={
mlB2UMap:{},
mlU2BMap:{},
localMediaLines:[],
remoteMediaLines:[],



localDescriptionType:'offer',
offer:null,
answer:null,
pranswer:null,
rollback:null};


this.planBRemoteDescription=null;
this.midToMWTrackId=new Map();
this.mwTrackIdToWebrtcTrackId=new Map();
}var _proto=RTCSDPInterop.prototype;_proto.

setPlanBRemoteDescription=function setPlanBRemoteDescription(desc){
this.planBRemoteDescription=desc;
};_proto.

getPlanBRemoteDescription=function getPlanBRemoteDescription(){
return this.planBRemoteDescription;
};_proto.

correlateWebrtcTrackIdsByMid=function correlateWebrtcTrackIdsByMid(webrtcTrackId,mid){
var mwTrackId=this.midToMWTrackId.get(mid);
if(mwTrackId!=null){
this.mwTrackIdToWebrtcTrackId.set(mwTrackId,webrtcTrackId);
}
};_proto.

getWebrtcTrackIdFromMWTrackId=function getWebrtcTrackIdFromMWTrackId(mwTrackId){
var webrtcTrackId=this.mwTrackIdToWebrtcTrackId.get(mwTrackId);
return webrtcTrackId?webrtcTrackId:mwTrackId;
};_proto.




candidateToUnifiedPlan=function candidateToUnifiedPlan(candidate){
var cand=new RTCIceCandidate(candidate);

cand.sdpMLineIndex=this.cache.mlB2UMap[cand.sdpMLineIndex];


return cand;
};_proto.




candidateToPlanB=function candidateToPlanB(candidate){
var cand=new RTCIceCandidate(candidate);var
sdpMid=cand.sdpMid;

if(sdpMid!=null){
if(sdpMid.indexOf('audio')===0){
cand.sdpMid='audio';
}else if(sdpMid.indexOf('video')===0){
cand.sdpMid='video';
}else{
throw new Error("candidate with "+sdpMid+" not allowed");
}
}
cand.sdpMLineIndex=this.cache.mlU2BMap[cand.sdpMLineIndex];

return cand;
};_proto.









getFirstSendingIndexFromAnswer=function getFirstSendingIndexFromAnswer(type){
if(!this.cache.answer){
return null;
}

var session=require("sdp-interop-transform").parse(this.cache.answer);
if(session&&session.media&&Array.isArray(session.media)){
for(var i=0;i<session.media.length;i++){
if(
session.media[i].type===type&&(
!session.media[i].direction||
session.media[i].direction==='sendrecv'||
session.media[i].direction==='sendonly'))
{
return i;
}
}
}

return null;
};_proto.







toPlanB=function toPlanB(desc){
var self=this;

var localMediaLines=[];
if(
typeof desc!=='object'||
desc===null||
typeof desc.sdp!=='string')
{
console.warn('An empty description was passed as an argument.');
return desc;
}


var session=require("sdp-interop-transform").parse(desc.sdp);


if(
session.media===undefined||
!Array.isArray(session.media)||
session.media.length===0)
{
console.warn('The description has no media.');
return desc;
}



if(
session.media.length<=3&&
session.media.every(function(_ref){var mid=_ref.mid;return['video','audio','data'].includes(mid);}))
{
console.warn('This description does not look like Unified Plan.');
return desc;
}




var sdp=desc.sdp;
var rewrite=false;var _loop=function _loop(
i){
var uLine=session.media[i];

localMediaLines.push(uLine.type);
uLine.rtp.forEach(function(rtp){
if(rtp.codec==='NULL'){
rewrite=true;
var offer=require("sdp-interop-transform").parse(self.cache.offer);
rtp.codec=offer.media[i].rtp[0].codec;
}
});};for(var i=0;i<session.media.length;i++){_loop(i);
}
if(rewrite){
sdp=require("sdp-interop-transform").write(session);
}



this.cache[desc.type]=sdp;
this.cache.localDescriptionType=desc.type;
this.cache.localMediaLines=localMediaLines;
};_proto.










convertUnifiedToPlanB=function convertUnifiedToPlanB(desc){

var session=require("sdp-interop-transform").parse(desc.sdp);


var media=session.media;
session.media=[];




var type2bl={};



var types=[];

media.forEach(function(uLine){
midToString(uLine);


if(
(typeof uLine.rtcpMux!=='string'||uLine.rtcpMux!=='rtcp-mux')&&
uLine.direction!=='inactive')
{
throw new Error(
'Cannot convert to Plan B because m-lines '+
'without the rtcp-mux attribute were found.');

}



if(
type2bl[uLine.type]===undefined||
type2bl[uLine.type].direction==='inactive')
{
type2bl[uLine.type]=uLine;
}
});


media.forEach(function(uLine){
if(uLine.type==='application'){
uLine.mid='data';
session.media.push(uLine);
types.push(uLine.mid);
return;
}


if(typeof uLine.sources==='object'){
Object.keys(uLine.sources).forEach(function(ssrc){
if(typeof type2bl[uLine.type].sources!=='object'){
type2bl[uLine.type].sources={};
}


type2bl[uLine.type].sources[ssrc]=uLine.sources[ssrc];

if(uLine.msid!==undefined){






type2bl[uLine.type].sources[ssrc].msid=uLine.msid;
}


});
}


if(uLine.ssrcGroups!==undefined&&Array.isArray(uLine.ssrcGroups)){

if(
type2bl[uLine.type].ssrcGroups===undefined||
!Array.isArray(type2bl[uLine.type].ssrcGroups))
{
type2bl[uLine.type].ssrcGroups=[];
}

type2bl[uLine.type].ssrcGroups=type2bl[uLine.type].ssrcGroups.concat(
uLine.ssrcGroups);

}

if(type2bl[uLine.type]===uLine){

uLine.mid=uLine.type;


delete uLine.bundleOnly;


delete uLine.msid;

if(uLine.direction!=='inactive'){

types.push(uLine.type);
}


session.media.push(uLine);
}
});


session.groups.some(function(group){
if(group.type==='BUNDLE'){
group.mids=types.join(' ');
return true;
}
});


session.msidSemantic={
semantic:'WMS',
token:'*'};


var resStr=require("sdp-interop-transform").write(session);

return new RTCSessionDescription({
type:desc.type,
sdp:resStr});



};_proto.









toUnifiedPlan=function toUnifiedPlan(desc){var _this=this;
var self=this;

if(
typeof desc!=='object'||
desc===null||
typeof desc.sdp!=='string')
{
console.warn('An empty description was passed as an argument.');
return desc;
}

if(desc.type!=='answer'&&desc.type!=='offer'){
console.warn(
'Non offer or answer descriptions cannot be handled at this time.');

return desc;
}

var session=require("sdp-interop-transform").parse(desc.sdp);


if(
session.media===undefined||
!Array.isArray(session.media)||
session.media.length===0)
{
console.warn('The description has no media.');
return desc;
}


var mids=[];
session.media.forEach(function(_ref2){var mid=_ref2.mid;
mids.push(mid);
});

var hasBundle=false;
if(session.groups!==undefined&&Array.isArray(session.groups)){
hasBundle=session.groups.every(
function(g){return(
g.type!=='BUNDLE'||
require("sdp-interop-array-equals").apply(g.mids.sort(),[mids.sort()]));});

}

if(!hasBundle){
throw new Error(
'Cannot convert to Unified Plan because m-lines that'+
' are not bundled were found.');

}

























var remoteMediaLines=[];

var cached;
if(this.cache[desc.type]!=null){
cached=require("sdp-interop-transform").parse(this.cache[desc.type]);
}

var recvonlySsrcs={
audio:{},
video:{}};




var mid2ul={};
var bIdx=0;
var uIdx=0;
session.media.forEach(function(bLine){
if(bLine.type==='application'){
bLine.mid=String(bLine.mid);
mid2ul[bLine.mid]=bLine;
return;
}



var sources=bLine.sources;
var ssrcGroups=bLine.ssrcGroups;
var candidates=bLine.candidates;
var iceUfrag=bLine.iceUfrag;
var icePwd=bLine.icePwd;
var fingerprint=bLine.fingerprint;
var port=bLine.port;

if(typeof sources==='object'){




delete bLine.sources;
delete bLine.ssrcGroups;
delete bLine.candidates;
delete bLine.iceUfrag;
delete bLine.icePwd;
delete bLine.fingerprint;
delete bLine.port;
delete bLine.mid;
}


var ssrc2group={};
if(ssrcGroups!==undefined&&Array.isArray(ssrcGroups)){
ssrcGroups.forEach(function(ssrcGroup){


if(ssrcGroup.semantics==='SIM'){
return;
}



if(ssrcGroup.ssrcs!==undefined&&Array.isArray(ssrcGroup.ssrcs)){
ssrcGroup.ssrcs.forEach(function(ssrc){
if(ssrc2group[ssrc]===undefined){
ssrc2group[ssrc]=[];
}

ssrc2group[ssrc].push(ssrcGroup);
});
}
});
}


var ssrc2ml={};

if(typeof sources==='object'){

Object.keys(sources).forEach(function(ssrc){




var uLine;




if(desc.type===_this.cache.localDescriptionType){







if(!sources[ssrc].msid){
recvonlySsrcs[bLine.type][ssrc]=sources[ssrc];


return;
}
}

if(
ssrc2group[ssrc]!==undefined&&
Array.isArray(ssrc2group[ssrc]))
{
ssrc2group[ssrc].some(function(_ref3){var
ssrcs=_ref3.ssrcs;return(


ssrcs.some(function(related){
if(typeof ssrc2ml[related]==='object'){
uLine=ssrc2ml[related];
return true;
}
}));});

}

if(typeof uLine==='object'){

uLine.sources[ssrc]=sources[ssrc];
delete sources[ssrc].msid;
}else{

uLine=Object.create(bLine);
ssrc2ml[ssrc]=uLine;

if(sources[ssrc].msid!==undefined){





uLine.msid=sources[ssrc].msid;
}


uLine.sources={};
uLine.sources[ssrc]=sources[ssrc];
uLine.ssrcGroups=ssrc2group[ssrc];



if(
cached!==undefined&&
cached.media!==undefined&&
Array.isArray(cached.media))
{
cached.media.forEach(function(m){
if(typeof m.sources==='object'){
Object.keys(m.sources).forEach(function(s){
if(s===ssrc){
uLine.mid=String(m.mid);
}
});
}
});
}

if(uLine.mid===undefined){













if(desc.type===_this.cache.localDescriptionType){
throw new Error('An unmapped SSRC was found.');
}

uLine.mid=[bLine.type,'-',ssrc].join('');
}


uLine.candidates=candidates;
uLine.iceUfrag=iceUfrag;
uLine.icePwd=icePwd;
uLine.fingerprint=fingerprint;
uLine.port=port;
uLine.type=bLine.type;

mid2ul[uLine.mid]=uLine;

self.cache.mlU2BMap[uIdx]=bIdx;
if(self.cache.mlB2UMap[bIdx]===undefined){
self.cache.mlB2UMap[bIdx]=uIdx;
}
uIdx++;
}
});
}else{



bLine.mid=String(bLine.mid);
mid2ul[bLine.mid]=bLine;
}

bIdx++;
});



session.media=[];
mids=[];


if(desc.type===this.cache.localDescriptionType){










if(this.cache[desc.type]!=null){
cached=require("sdp-interop-transform").parse(this.cache[desc.type]);
}
if(cached!==undefined){
for(var i=0;i<cached.media.length;i++){
var uLine=cached.media[i];

if(mid2ul[uLine.mid]===undefined){











delete uLine.msid;
delete uLine.sources;
delete uLine.ssrcGroups;
if(!uLine.direction||uLine.direction==='sendrecv'){
uLine.direction='recvonly';
}else if(uLine.direction==='sendonly'){
uLine.direction='inactive';
}
}else{





}

session.media.push(uLine);

if(typeof uLine.mid==='string'){

mids.push(uLine.mid);
}
}
}
}else{








if(
cached!==undefined&&
cached.media!==undefined&&
Array.isArray(cached.media))
{
cached.media.forEach(function(uLine){
var mid=String(uLine.mid);
mids.push(mid);
if(mid2ul[mid]!==undefined){
session.media.push(mid2ul[mid]);
}else{
delete uLine.msid;
delete uLine.sources;
delete uLine.ssrcGroups;
if(!uLine.direction||uLine.direction==='sendrecv'){
uLine.direction='recvonly';
}
if(!uLine.direction||uLine.direction==='sendonly'){
uLine.direction='inactive';
}
session.media.push(uLine);
}
});
}


Object.keys(mid2ul).forEach(function(mid){
if(!mids.includes(mid)){
mids.push(mid);
if(mid2ul[mid].direction==='recvonly'){





session.media.some(function(_ref4){var direction=_ref4.direction,type=_ref4.type,sources=_ref4.sources;
if(
(direction==='sendrecv'||direction==='sendonly')&&
type===mid2ul[mid].type)
{

Object.keys(mid2ul[mid].sources).forEach(function(ssrc){
sources[ssrc]=mid2ul[mid].sources[ssrc];
});

return true;
}
});
}else{
session.media.push(mid2ul[mid]);
}
}
});
}





if(this.cache[desc.type]===null){
session.media=RTCSDPInterop.sortRemoteSourcesToMatchLocalOrder(
this.cache.localMediaLines,
session.media);

}

mids=[];
for(var _i=0;_i<session.media.length;_i++){


session.media[_i].mid=String(_i);
mids.push(String(_i));


remoteMediaLines.push(session.media[_i].type);
}


this.cacheMidToMWTrackId(session.media);






['audio','video'].forEach(function(type){
if(!session||!session.media||!Array.isArray(session.media)){
return;
}

var idx=null;
if(Object.keys(recvonlySsrcs[type]).length>0){
idx=self.getFirstSendingIndexFromAnswer(type);
if(idx===null){




for(var _i2=0;_i2<session.media.length;_i2++){
if(session.media[_i2].type===type){
idx=_i2;
break;
}
}
}
}

if(idx&&session.media.length>idx){
var mLine=session.media[idx];
Object.keys(recvonlySsrcs[type]).forEach(function(ssrc){
if(mLine.sources&&mLine.sources[ssrc]){
console.warn('Replacing an existing SSRC.');
}
if(!mLine.sources){
mLine.sources={};
}

mLine.sources[ssrc]=recvonlySsrcs[type][ssrc];
});
}
});


session.groups.some(function(group){
if(group.type==='BUNDLE'){
group.mids=mids.join(' ');
return true;
}
});


session.msidSemantic={
semantic:'WMS',
token:'*'};


var resStr=require("sdp-interop-transform").write(session);

this.cache.remoteMediaLines=remoteMediaLines;


this.cache[desc.type]=resStr;

return{
type:desc.type,
sdp:resStr};



};_proto.








getTrackTypesToMatchDescription=function getTrackTypesToMatchDescription(){
var tracksToAdd=[];var _this$cache=
this.cache,localMediaLines=_this$cache.localMediaLines,remoteMediaLines=_this$cache.remoteMediaLines;
if(remoteMediaLines.length<=localMediaLines.length){

return tracksToAdd;
}
for(var i=0;i<remoteMediaLines.length;i++){
if(localMediaLines[i]==null){
tracksToAdd.push(remoteMediaLines[i]);
}
}
return tracksToAdd;
};RTCSDPInterop.















sortRemoteSourcesToMatchLocalOrder=function sortRemoteSourcesToMatchLocalOrder(
localSourceTypes,
remoteSources)
{
var i=0;
var j=0;
while(i<localSourceTypes.length&&j<remoteSources.length){
if(remoteSources[j].type===localSourceTypes[i]){
var tmp=remoteSources[i];
remoteSources[i]=remoteSources[j];
remoteSources[j]=tmp;
i++;
j=0;
}
j++;
}
return remoteSources;
};_proto.









cacheMidToMWTrackId=function cacheMidToMWTrackId(sessionMedia){var _this2=this;
sessionMedia.forEach(function(mLine){var
sources=mLine.sources;
if(sources!=null&&mLine.type!=='application'){
var ssrcs=Object.keys(sources);
if(ssrcs.length>=1){

ssrcs.forEach(function(ssrc){var
msid=sources[ssrc].msid;
var trackId=RTCSDPInterop.getMWTrackIdFromMsid(msid);
if(trackId!=null){
_this2.midToMWTrackId.set(mLine.mid,trackId);
}
});
}
}
});
};RTCSDPInterop.



getMWTrackIdFromMsid=function getMWTrackIdFromMsid(msid){
if(msid!=null){
var splitMsid=msid.split(' ');
if(splitMsid.length>=2){
return splitMsid[1];
}
}
return null;
};return RTCSDPInterop;}();


function midToString(line){
if(typeof line.mid==='number'){
line.mid=line.mid.toString();
}
}
module.exports=RTCSDPInterop;}),null);
__d("RTCSessionDescription",["invariant","FBRTCConfig","FBRTCConstants","FBRTCMediaType","FBRTCSdpUtils","RTCSignalingExperiments"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol,i=window.RTCSessionDescription||window.mozRTCSessionDescription,j=2,k="o",l="m",m="a",n="rtpmap",o="ssrc-group",p="ssrc",q="cname",r="msid",s="mslabel",t="label",u="sendonly",v="recvonly",w="sendrecv",x="inactive",y="offer",z="answer",A="=",B=" ",C=":",D="\r\n",E="audio",F="video",G="application",H=function(a,b){return a.startsWith(b+A)},I=function(a){return a.substr(j)},J=function(a,b){return a.startsWith(b+D)||a.startsWith(b+C)},K=function(a,b){return a.substr(b.length+1)},L=function(){__p&&__p();function a(a){__p&&__p();var b=this;this.$1=[];this.$2="-";this.$3="multiway";this.$4=1;this.$5="IN";this.$6="IP4";this.$7="127.0.0.1";a.forEach(function(a){if(H(a,k)){var c=I(a).split(B);c.length==6&&(b.$2=c[0],b.$3=c[1],b.$4=parseInt(c[2],10),b.$5=c[3],b.$6=c[4],b.$7=c[5])}b.$1.push(a)})}var b=a.prototype;b.setVersion=function(a){this.$4=a};b.getVersion=function(){return this.$4};b.toSdp=function(){var a=this;return this.$1.map(function(b){if(H(b,k))return k+A+a.$2+B+a.$3+B+a.$4+B+a.$5+B+a.$6+B+a.$7;else return b}).join(D)};return a}(),M=function(){__p&&__p();function a(a,b,c){__p&&__p();var d=this;c===void 0&&(c={});this.$1=[];var e={},f=[],g=[];a.forEach(function(a){__p&&__p();var b=I(a);H(a,l)&&(d.$4=b.split(B)[0]);if(H(a,m)&&J(b,n)){var c=K(b,n);c=c.split(B);var h=c[0];c=c[1];e[c]=h}H(a,m)&&J(b,p)?d.$6(b,f):H(a,m)&&J(b,o)?d.$7(b,g):H(a,m)&&(b===u||b===v||b===w||b===x)?d.$5=b:d.$1.push(a)});Object.keys(c).forEach(function(a){if(e[a]){var b=Object.keys(c[a]).map(function(b){return b+"="+c[a][b]}).join(";");d.$1.push("a=fmtp:"+e[a]+" "+b)}});this.$3={};this.$2={};f.forEach(function(a){if(Object.prototype.hasOwnProperty.call(a,q)){var b=a.cname;!d.$3[b]?d.$3[b]=[a]:d.$3[b].push(a);a=d.findSsrcGroupForSsrc(g,a.ssrc);a&&(!d.$2[b]?d.$2[b]=[a]:d.$2[b].push(a),d.removeSsrcGroup(a,g))}});this.$4!==G&&(b===y?f.length===0?this.$5=v:this.$5=w:b===z&&(this.$5=w))}var b=a.prototype;b.getMediaType=function(){return this.$4};b.findSsrcGroupForSsrc=function(a,b){return a.find(function(a){a=a.ssrcs;return a.some(function(a){return a===b})})};b.addStreamsForEndpoint=function(a,b){this.$3[a]=b};b.addSsrcGroupsForEndpoint=function(a,b){var c=this;this.$3[a].forEach(function(d){d=d.ssrc;d=c.findSsrcGroupForSsrc(b,d);d&&(!c.$2[a]?c.$2[a]=[d]:c.$2[a].push(d),c.removeSsrcGroup(d,b))})};b.removeSsrcGroup=function(a,b){a=b.indexOf(a);a!==-1&&b.splice(a,1)};b.$7=function(a,b){a=K(a,o);if(a){a=a.split(B);var c=a[0];a=a.slice(1);b.push({semantics:c,ssrcs:a.map(function(a){return parseInt(a,10)})})}};b.$6=function(a,b){__p&&__p();var c=a.indexOf(B),d=a.substr(0,c),e=parseInt(K(d,p),10);d=a.substr(c+1);a=b.find(function(a){return a.ssrc===e});a||(a={},a.ssrc=e,b.push(a));if(J(d,q))a.cname=K(d,q);else if(J(d,r)){c=K(d,r).split(B);a.msid={id:c[0],appdata:c[1]}}else J(d,s)?a.mslabel=K(d,s):J(d,t)&&(a.label=K(d,t))};b.toSdp=function(){__p&&__p();var a=[];this.$1.forEach(function(b){a.push(b)});for(var b in this.$2)this.$2[b].forEach(function(b){a.push(m+A+o+C+b.semantics+B+b.ssrcs.join(B))});this.$5!=null&&a.push(m+A+this.$5);for(var c in this.$3)this.$3[c].forEach(function(b){b.cname&&a.push(m+A+p+C+b.ssrc+B+q+C+b.cname),b.msid&&a.push(m+A+p+C+b.ssrc+B+r+C+b.msid.id+(b.msid.appdata?B+b.msid.appdata:"")),b.mslabel&&a.push(m+A+p+C+b.ssrc+B+s+C+b.mslabel),b.label&&a.push(m+A+p+C+b.ssrc+B+t+C+b.label)});return a.join(D)};return a}();a=function(){__p&&__p();function a(a,b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});b=b;var d=b.type;d=d===void 0?"offer":d;b=b.sdp;b=b===void 0?"":b;this.$2=a;this.type=d;switch(a){case h.CUSTOM:this.$1=b;return;case h.MULTIWAY:this.$3(b,c);return;case h.P2P:this.$4(b,c);return}}var c=a.prototype;c.$3=function(a,c){__p&&__p();this.type==="offer"&&(a=b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a),c.OFFER_SDP_TRANSFORM&&(a=c.OFFER_SDP_TRANSFORM.reduce(function(a,b){return b(a)},a)));c.DISABLE_OPUS_STEREO&&(a=b("FBRTCSdpUtils").addFmtp(a,"opus","stereo","0"));a=a.trim().split(D);var d=[],e=0;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.sessionDescription=new L(d);this.mediaDescriptions=[];while(e<a.length){d=[];d.push(a[e]);e++;while(e<a.length&&!H(a[e],l))d.push(a[e]),e++;this.mediaDescriptions.push(new M(d,this.type,c.FORMAT_PARAMETERS))}};c.$4=function(a,c){__p&&__p();var d=[function(a){return b("FBRTCSdpUtils").addIceOptionToSdp(a,"fb-force-5245")},function(a){return b("FBRTCSdpUtils").useDTLSOverCrypto(a)}];if(this.type==="offer"){c.DISABLE_VIDEO&&d.push(function(a){return b("FBRTCSdpUtils").disableVideo(a)});var e=b("RTCSignalingExperiments").shouldPreferIsac();e&&d.push(function(a){return b("FBRTCSdpUtils").preferIsac(a)});d.push(function(a){return b("FBRTCSdpUtils").replaceRTPSAVPFProfile(a)},function(a){return b("FBRTCSdpUtils").addSetup(a)},function(a){return b("FBRTCSdpUtils").removeUnknownRtpHeaderExtensions(a)});b("FBRTCConfig").isVCEndpointCall()||d.push(function(a){return b("FBRTCSdpUtils").removeSdparta(a)});if(c.FORMAT_PARAMETERS){var f=Object.entries(c.FORMAT_PARAMETERS);e=function(){__p&&__p();var a=f[h],c=a[0];a=a[1];var e=Object.entries(a);a=function(){var a=e[i],f=a[0],h=a[1];typeof h==="string"||g(0,4169);d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,c,f,h)})};for(var i=0;i<e.length;i++)a()};for(var h=0;h<f.length;h++)e()}d.push(function(a){return b("FBRTCSdpUtils").clearFirefoxInactiveDataChannelBlock(a)})}c.ADD_FB_FEATURES!=null&&d.push(function(a){Array.isArray(c.ADD_FB_FEATURES)||g(0,4170);return b("FBRTCSdpUtils").addFBFeatures.apply(b("FBRTCSdpUtils"),[a].concat(c.ADD_FB_FEATURES))});c.ADD_AUDIO_NACK&&d.push(function(a){return b("FBRTCSdpUtils").addAudioNack(a)});c.DISABLE_OPUS_STEREO&&d.push(function(a){return b("FBRTCSdpUtils").addFmtp(a,"opus","stereo","0")});var i=c.SSRC_CONTENT_TYPE;i&&d.push(function(a){return b("FBRTCSdpUtils").addSSRCContentType(a,i)});this.$1=d.reduce(function(a,b){return b(a)},a)};c.processServerMediaUpdate=function(a){var c=a.sourceKey,d=a.media,e=a.ssrcGroups,f=[],g=[];d.forEach(function(a){a.ssrcs.forEach(function(d){d={ssrc:d,cname:c,msid:{id:c,appdata:a.id},label:a.id,mslabel:c};b("FBRTCMediaType").AUDIO===a.type?f.push(d):b("FBRTCMediaType").VIDEO===a.type&&g.push(d)})});this.mediaDescriptions.forEach(function(a){a.getMediaType()===E?(a.addStreamsForEndpoint(c,f),a.addSsrcGroupsForEndpoint(c,e)):a.getMediaType()===F&&(a.addStreamsForEndpoint(c,g),a.addSsrcGroupsForEndpoint(c,e))})};c.toDesc=function(){return new i({type:this.type,sdp:this.toSdp()})};c.toSdp=function(){var a=this.$2;switch(a){case h.MULTIWAY:return[this.sessionDescription.toSdp(),this.mediaDescriptions.map(function(a){return a.toSdp()}).join(D),""].join(D);case h.CUSTOM:case h.P2P:default:return this.$1}};c.strongDiff=function(a){var b=this.toSdp();a=a.toSdp();return b!==a&&this.$5(b)!==this.$5(a)};c.$5=function(a){return this.$6(a).split("\r\n").filter(function(a){return!/^a=(candidate|setup):/.test(a)}).join("\r\n")};c.$6=function(a){return a.replace(/(o=\S+\s\S+)\s\S+\s/,"$1 - ")};return a}();e.exports=a}),null);
__d("FBRTCPeerConnection",["Promise","regeneratorRuntime","FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport","RTCConfig","RTCIceCandidate","RTCPeerConnection","RTCSDPInterop","RTCSessionDescription","RTWebUserActionLogger","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;a=function(){__p&&__p();a.isGetSendersSupported=function(){return q("getSenders")};a.isReplaceTrackSupported=function(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"};function a(a,c,d){__p&&__p();var e=this;c===void 0&&(c={});d===void 0&&(d={});this.$3=[];this.$4=[];this.$7=new Map();this.addEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)||(c=[],this.$7.set(a,c));c.push(b);this.$5.addEventListener(a,b)};this.removeEventListener=function(a,b){var c=this.$7.get(a);Array.isArray(c)&&(c=c.filter(function(a){return a!==b}),c.length<1?this.$7["delete"](a):this.$7.set(a,c));this.$5.removeEventListener(a,b)};this.$13=function(a){a=a.candidate;a&&e.$4.push(a)};this.$14=function(a){a=a.channel;e.$16(a)};this.$6=a;this.$1=c;this.$2=d;this.$5=this.$12();this.$11=new Set();this.$10=this.$6===g.MULTIWAY&&b("FBRTCSupport").canUseUnifiedPlan()?new(b("RTCSDPInterop"))():null}var c=a.prototype;c.$12=function(){__p&&__p();var a=this.$6===g.MULTIWAY&&b("FBRTCSupport").canUseUnifiedPlan()?"unified-plan":"plan-b";a=new(b("RTCPeerConnection"))(babelHelpers["extends"]({},this.$1,{sdpSemantics:a}),this.$2);a.addEventListener("icecandidate",this.$13);a.addEventListener("datachannel",this.$14);for(var c=this.$7.entries(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var h=f[0];f=f[1];for(var f=f,i=Array.isArray(f),j=0,f=i?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=f.length)break;k=f[j++]}else{j=f.next();if(j.done)break;k=j.value}k=k;a.addEventListener(h,k)}}return a};c.removeAllListeners=function(){__p&&__p();for(var a=this.$7.entries(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];for(var d=d,f=Array.isArray(d),g=0,d=f?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=d.length)break;h=d[g++]}else{g=d.next();if(g.done)break;h=g.value}h=h;this.$5.removeEventListener(e,h)}}this.$5.removeEventListener("datachannel",this.$14);this.$5.removeEventListener("icecandidate",this.$13)};c.reset=function(a){__p&&__p();var c=this;a===void 0&&(a=!0);var d=this.getSenders(),e=this.$5;for(var f=this.$7.entries(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=i[0];i=i[1];for(var i=i,k=Array.isArray(i),l=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=i.length)break;m=i[l++]}else{l=i.next();if(l.done)break;m=l.value}m=m;e.removeEventListener(j,m)}}e.removeEventListener("datachannel",this.$14);e.removeEventListener("icecandidate",this.$13);this.$3=[];this.$4=[];this.$5=this.$12();if(a)for(var m=e.getLocalStreams(),l=Array.isArray(m),k=0,m=l?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(l){if(k>=m.length)break;i=m[k++]}else{k=m.next();if(k.done)break;i=k.value}j=i;this.$15(j,d)&&this.addStream(j)}return b("Promise").race([new(b("Promise"))(function(a){var b=c.$5,d=function c(d){d=d.target;d.iceConnectionState!=="checking"&&d.iceConnectionState!=="new"&&(a(),b.removeEventListener("iceconnectionstatechange",c),p(e))};b.addEventListener("iceconnectionstatechange",d)}),new(b("Promise"))(function(a){return window.setTimeout(a,5e3)})])["catch"](function(a){return b("Promise").resolve()}).then(function(){p(e)})};c.$15=function(c,d){return!b("FBRTCConfig").isVCEndpointCall()||!b("RTCConfig").CollabWhitelistedBrowserGK?!0:a.doesBrowserSupportAddTrack()?c.getTracks().some(function(a){return d!=null?d.some(function(b){return b.track===a}):!1}):c.active};c.close=function(){p(this.$5)};c.getCreatedIceCandidates=function(){return this.$4};c.$16=function(a){var b=this;a.addEventListener("close",function(){b.$3=b.$3.filter(function(b){return b!==a})});this.$3.push(a)};c.transformRemoteIceCandidateMid=function(a){return this.$9&&this.$9[a]||a};c.transformLocalIceCandidateMid=function(a){return this.$8&&this.$8[a]||a};c.transformOfferSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$8)};c.transformAnswerSdp=function(a){return b("FBRTCSdpUtils").transformSdpMids(a,this.$9)};c.onReceivedRemoteIceCandidate=function(a){var c=a.sdp,d=a.label;a=a.sdp_mid;a=this.transformRemoteIceCandidateMid(a);d=new(b("RTCIceCandidate"))({sdpMLineIndex:d,candidate:b("FBRTCSdpUtils").fixMobileIceSdp(c),sdpMid:a});return b("Promise").resolve(this.$5.addIceCandidate(d))};c.getSignalingProtocol=function(){return this.$6};c.getLocalStreams=function(){return q("getLocalStreams")?this.$5.getLocalStreams():[]};c.getRemoteStreams=function(){return q("getRemoteStreams")?this.$5.getRemoteStreams():[]};c.getLocalTracks=function(){if(q("getLocalStreams")){var a=[];this.$5.getLocalStreams().forEach(function(b){a.push.apply(a,b.getTracks())});return a}return this.getSenders().map(function(a){return a.track}).filter(Boolean)};c.addRemoteMediaCnameIfNeeded=function(a){(b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari"))&&this.$11.add(a)};c.getRemoteMediaCnames=function(){return b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari")?Array.from(this.$11):[]};c.maybeHandleVideoEscalationForUnified=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!(b("FBRTCSupport").canUseUnifiedPlan()&&this.getSenders().length>0)){a.next=5;break}this.$10=new(b("RTCSDPInterop"))();this.$11=new Set();a.next=5;return b("regeneratorRuntime").awrap(this.reset(!1));case 5:case"end":return a.stop()}},null,this)};a.doesBrowserSupportAddTrack=function(){return(b("UserAgent").isBrowser("Firefox")||b("FBRTCSupport").isSupportedSafariVersion()||b("FBRTCSupport").canUseUnifiedPlan())&&q("addTrack")&&a.isGetSendersSupported()};a.doesBrowserSupportRemoveTrack=function(){return(b("UserAgent").isBrowser("Firefox")||b("FBRTCSupport").isSupportedSafariVersion()||b("FBRTCSupport").canUseUnifiedPlan())&&q("removeTrack")&&a.isGetSendersSupported()};a.isTrackAPISupported=function(){return q("removeTrack")&&q("addTrack")&&a.isReplaceTrackSupported()&&a.isGetSendersSupported()};c.addStream=function(b,c){__p&&__p();var d=this;if(a.doesBrowserSupportAddTrack()){var e=this.getSenders(),f=function(){__p&&__p();if(h){if(i>=g.length)return"break";j=g[i++]}else{i=g.next();if(i.done)return"break";j=i.value}var a=j,f=e.find(function(b){return b.track===a});f===void 0&&(f=d.$5.addTrack(a,b));c&&f&&c(f)};for(var g=b.getTracks(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=f();if(k==="break")break}}else this.$5.addStream(b)};c.removeStream=function(b){__p&&__p();if(a.doesBrowserSupportRemoveTrack()){var c=b.getTracks(),d=this.getSenders().filter(function(a){return c.includes(a.track)});for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$5.removeTrack(g)}}else this.$5.removeStream(b)};c.removeTrack=function(a){this.$5.removeTrack(a)};c.addTrack=function(a,b){return this.$5.addTrack(a,b)};c.createOffer=function(a,c,d){__p&&__p();var e=this;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:a===void 0&&(a={});c===void 0&&(c={});d===void 0&&(d={});return f.abrupt("return",i(this.$5,a).then(function(b){return v(b,d,a)}).then(function(a){var c=b("FBRTCSdpUtils").constructMidMap(a.sdp);e.$8=c.offerSdpMap;e.$9=c.answerSdpMap;return a}).then(function(a){e.$10!=null&&e.$10.toPlanB(a);return new(b("RTCSessionDescription"))(e.$6,a,c)}));case 4:case"end":return f.stop()}},null,this)};c.createAnswer=function(a){var c=this;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a===void 0&&(a={});return d.abrupt("return",j(this.$5).then(function(d){return new(b("RTCSessionDescription"))(c.$6,d,a)}));case 2:case"end":return d.stop()}},null,this)};c.setLocalDescription=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",n(this.$5,a.toDesc()).then(function(){return a})["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"FBRTCPeerConnection_setLocalSDP",errorType:a.toString()});throw a}));case 1:case"end":return c.stop()}},null,this)};c.setRemoteDescription=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:c=a;if(!(this.$10!=null)){d.next=5;break}d.next=4;return b("regeneratorRuntime").awrap(this.renegotiateDescriptionsForUnified(a,this.$10));case 4:c=d.sent;case 5:return d.abrupt("return",o(this.$5,c.toDesc()).then(function(){return a})["catch"](function(a){b("RTWebUserActionLogger").logError({errorDomain:"FBRTCPeerConnection_setRemoteSDP",errorType:a.toString()});throw a}));case 6:case"end":return d.stop()}},null,this)};c.renegotiateDescriptionsForUnified=function(a,c){__p&&__p();var d=this,e,f,g;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:c.setPlanBRemoteDescription(a);e=c.toUnifiedPlan(a.toDesc());if(!(a.type==="answer")){h.next=11;break}f=c.getTrackTypesToMatchDescription();if(!(f.length>0)){h.next=11;break}f.forEach(function(a){a=d.$5.addTransceiver(a);a.direction="recvonly"});h.next=8;return b("regeneratorRuntime").awrap(this.createOffer());case 8:g=h.sent;h.next=11;return b("regeneratorRuntime").awrap(this.setLocalDescription(g));case 11:return h.abrupt("return",new(b("RTCSessionDescription"))(this.$6,e));case 12:case"end":return h.stop()}},null,this)};c.getLocalDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.localDescription||{})};c.getRemoteDescription=function(){return new(b("RTCSessionDescription"))(this.$6,this.$5.remoteDescription||{})};c.getRemoteDescriptionForSMU=function(){var a=null;this.$10!=null&&(a=this.$10.getPlanBRemoteDescription());return a!=null?a:this.getRemoteDescription()};c.getSignalingState=function(){return this.$5.signalingState};c.getIceGatheringState=function(){return this.$5.iceGatheringState};c.getIceConnectionState=function(){return this.$5.iceConnectionState};c.getSenders=function(){return a.isGetSendersSupported()===!1?[]:this.$5.getSenders()};c.processUnifiedTrackIdTranslation=function(a,b){this.$10!=null&&a!=null&&b!=null&&this.$10.correlateWebrtcTrackIdsByMid(a,b)};c.getWebrtcTrackIdFromMWTrackId=function(a){return this.$10!=null?this.$10.getWebrtcTrackIdFromMWTrackId(a):a};c.maybeSupportReceivingVideoWithTransceivers=function(){if(b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari")){var a=Boolean(this.getSenders().find(function(a){return a.track?a.track.kind==="video":!1}));if(!a){a=this.$5.addTransceiver("video");a.direction="recvonly"}}};c.getStats=function(a){__p&&__p();var c=this;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(!(a!=null)){d.next=2;break}return d.abrupt("return",b("Promise").reject(new Error("getStats() doesn't support selector (yet)")));case 2:if(!(b("UserAgent").isBrowser("Edge")||b("UserAgent").isBrowser("Safari")||b("UserAgent").isBrowser("Mobile Safari"))){d.next=4;break}return d.abrupt("return",b("Promise").resolve(new Map()));case 4:if(!b("UserAgent").isBrowser("Firefox")){d.next=6;break}return d.abrupt("return",b("Promise").resolve(this.$5.getStats()).then(function(a){return b("UserAgent").isBrowser("Firefox >= 48")?a:s(a)}).then(function(a){__p&&__p();if(b("UserAgent").isBrowser("Firefox >= 53"))return a;try{a.forEach(function(a){a.type=t(a.type)})}catch(b){if(b.name!=="TypeError")throw b;a.forEach(function(b,c){a.set(c,babelHelpers["extends"]({},b,{type:t(b.type)}))})}return a}));case 6:if(!(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))){d.next=8;break}return d.abrupt("return",new(b("Promise"))(function(a,b){c.$5.getStats(a,b)}).then(function(a){__p&&__p();var b={};for(var a=a.result(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f={id:e.id,timestamp:e.timestamp,type:t(e.type)};for(var g=e.names(),h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=g.length)break;j=g[i++]}else{i=g.next();if(i.done)break;j=i.value}j=j;f[j]=e.stat(j)}b[f.id]=f}return b}).then(s));case 8:return d.abrupt("return",b("Promise").reject(new Error("getStats() not supported")));case 9:case"end":return d.stop()}},null,this)};c.createDataChannel=function(a,b){if(this.$5.createDataChannel){a=this.$5.createDataChannel(a,b);this.$16(a);return a}return null};c.getDataChannelByLabel=function(a){return this.$3.find(function(b){return b.label===a})};c.getSdpMidMaps=function(){return{offerSdpMap:this.$8,answerSdpMap:this.$9}};return a}();var h=b("UserAgent").isBrowser("Chrome < 59")||b("UserAgent").isBrowser("Opera < 46")||b("UserAgent").isBrowser("Firefox < 37");function i(a,c){return h?new(b("Promise"))(function(b,d){return a.createOffer(b,d,l(c))}):b("Promise").resolve(a.createOffer(l(c)))}function j(a){return h?new(b("Promise"))(function(b,c){return a.createAnswer(b,c)}):b("Promise").resolve(a.createAnswer())}var k=b("UserAgent").isBrowser("Chrome < 38")||b("UserAgent").isBrowser("Opera < 26");function l(a){var b=a.offerToReceiveAudio;b=b===void 0?!0:b;var c=a.offerToReceiveVideo;c=c===void 0?!0:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["offerToReceiveAudio","offerToReceiveVideo"]);return k?Object.keys(a).length>0?{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c},optional:babelHelpers["extends"]({},r(a))}:{mandatory:{OfferToReceiveAudio:b,OfferToReceiveVideo:c}}:babelHelpers["extends"]({offerToReceiveAudio:b,offerToReceiveVideo:c},a)}var m=b("UserAgent").isBrowser("Chrome < 51")||b("UserAgent").isBrowser("Opera < 38")||b("UserAgent").isBrowser("Firefox < 37");function n(a,c){return m?new(b("Promise"))(function(b,d){return a.setLocalDescription(c,b,d)}):b("Promise").resolve(a.setLocalDescription(c))}function o(a,c){return m?new(b("Promise"))(function(b,d){return a.setRemoteDescription(c,b,d)}):b("Promise").resolve(a.setRemoteDescription(c))}function p(a){a&&a.signalingState!=="closed"&&a.close()}function q(a){return typeof b("RTCPeerConnection").prototype[a]==="function"}function r(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=""+e.substr(0,1).toUpperCase()+e.substr(1);b[f]=a[e]}return b}function s(a){return new Map(Object.keys(a).map(function(b){return[b,a[b]]}))}function t(a){switch(a){case"inbound-rtp":return"inboundrtp";case"outbound-rtp":return"outboundrtp";case"candidate-pair":return"candidatepair";case"local-candidate":return"localcandidate";case"remote-candidate":return"remotecandidate";default:return a}}function u(a,c){if(b("FBRTCConfig").isVCEndpointCall())return!1;a=a.video&&a.video.match(/H264/);if(!a&&!c.preserveH264){a=b("FBRTCExperiment").gen("rtc_browser_use_h264");return a.getParam("allow_h264","no")!=="yes"}return!1}function v(a,c,d){d===void 0&&(d={});var e=c.audio,f=c.video,g=a.sdp;a=a.type;u(c,d)&&(g=b("FBRTCSdpUtils").removeH264(g));e&&(g=b("FBRTCSdpUtils").preferCodec(g,e,!1));f&&(g=b("FBRTCSdpUtils").preferCodec(g,f,!0));return b("Promise").resolve({sdp:g,type:a})}e.exports=a}),null);
__d("RTCP2PCallEscalationActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={start:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_START"})},setRequest:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SET_REQUEST",request:a})},cancel:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"cancelled"})},timeout:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"timeout"})},handleACK:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_ACK",token:a})},approve:function(){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SUCCESS"})},decline:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"denied",token:a,response:!1})},setResponse:function(a){b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SET_RESPONSE",response:a})},parseResponse:function(a,c){a?b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_SUCCESS",token:c}):b("RTCAppDispatcher").dispatch({type:"P2P_CALL_ESCALATION_FAILURE",reason:"denied",token:c,response:!1})},muteRemoteVideo:function(){b("RTCAppDispatcher").dispatch({type:"REMOTE_VIDEO_MUTED"})},setEscalateToMediaStream:function(a){b("RTCAppDispatcher").dispatch({type:"SET_P2P_CALL_ESCALATION_MEDIA",stream:a})}};e.exports=a}),null);
__d("RTCP2PCallEscalator",["Promise","FBRTCCallSummaryStore","FBRTCConsoleLogger","FBRTCConstants","FBRTCPeerConnection","FBRTCSupport","RTCCallActions","RTCCallStore","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUtils","dangerouslyBypassDispatchError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").PayloadType,h=25e3;a=function(){__p&&__p();a.initVideoInAudioCall=function(){return b("FBRTCSupport").videoEscalationByUnmuteWorkaround()};a.isEscalated=function(){return b("RTCP2PCallEscalationStore").isEscalated()};a.isNegotiationAllowed=function(){return b("RTCP2PCallEscalationStore").isNegotiationAllowed()};function a(a,b,c){this.$3=a,this.$1=b,this.$2=c,this.$6()}var c=a.prototype;c.$6=function(){__p&&__p();var a=this,c=b("RTCP2PCallEscalationStore").getState();this.$4=b("RTCP2PCallEscalationStore").addListener(function(){__p&&__p();var d=b("RTCP2PCallEscalationStore").getState();if(d===c)return;!d.awaitingACK&&d.awaitingACK!==c.awaitingACK&&!d.inProgress&&window.clearTimeout(a.$5);if(d.callType!==c.callType&&d.inProgress){var e=b("RTCCallStore").getState();e=e.callSummary;e.setCallType(d.callType);e.save(b("FBRTCCallSummaryStore").getInstance())}c=d})};c.destroy=function(){i("P2P Escalator %o","destroy"),this.$4.remove(),window.clearTimeout(this.$5)};c.generateRequestToken=function(a){__p&&__p();var c=b("RTCP2PCallEscalationStore").getState();c=c.token;if(c!=null&&a){i("P2P Escalator %o","request token","reuse");return c}i("P2P Escalator %o","request token");c=this.$2.sendVideoEscalationRequest(this.$3,this.$1,a);window.clearTimeout(this.$5);this.$5=this.$7();return c.msg_id.toString()};c.generateResponseToken=function(a,c){__p&&__p();var d=b("RTCP2PCallEscalationStore").getState();d=d.token;if(d!=null){i("P2P Escalator %o","response token","reuse");return d}i("P2P Escalator %o %o %o","response token",c,a);d=a.peerID;var e=a.callID;a=a.msgID;d=this.$2.sendVideoRequestResponse(d,e,a,c);window.clearTimeout(this.$5);var f=d.msg_id.toString();!c?b("dangerouslyBypassDispatchError")(function(){return b("RTCP2PCallEscalationActions").decline(f)}):this.$5=this.$7();return f};c.$7=function(){return window.setTimeout(b("RTCP2PCallEscalationActions").timeout,h)};c.parseMessage=function(a){i("P2P Escalator %o","parse message",this.$3,a.msgType);switch(a.msgType){case g.VIDEO_REQUEST:a.ackID?this.$8(a):this.$9(a);break;case g.ACK:a.msg.ack_type===g.VIDEO_REQUEST&&b("RTCP2PCallEscalationActions").handleACK(a.ackID.toString());break}};c.$8=function(c){i("P2P Escalator %o","parse response",c);var d=c.ackID.toString();b("RTCP2PCallEscalationStore").getToken()===d&&this.$10(c);b("RTCP2PCallEscalationActions").parseResponse(a.requestVideoOn(c.msg),d);window.clearTimeout(this.$5)};c.$9=function(c){__p&&__p();i("P2P Escalator %o","parse request",c);if(b("RTCP2PCallEscalationStore").isInProgress()&&!a.requestVideoOn(c.msg)){b("RTCP2PCallEscalationStore").didCurrentUserInitiate()?b("RTCP2PCallEscalationActions").cancel():(this.$10(c),b("RTCP2PCallEscalationActions").setRequest(c));return}if(b("RTCP2PCallEscalationStore").isInProgress()&&b("RTCP2PCallEscalationStore").didCurrentUserInitiate()){i("P2P Escalator %o","auto-approve","mutual consent");b("RTCP2PCallEscalationActions").approve();this.$10(c);this.generateResponseToken(c,!0);return}if(b("RTCP2PCallEscalationStore").isEscalated()){a.requestVideoOn(c.msg)?(i("P2P Escalator %o","auto-approve"),this.$10(c),this.generateResponseToken(c,!0),window.clearTimeout(this.$5)):(i("P2P Escalator %o","mute remote video"),b("RTCP2PCallEscalationActions").muteRemoteVideo());return}i("P2P Escalator %o %o","request",c);this.$10(c);b("RTCP2PCallEscalationActions").setRequest(c)};c.$10=function(a){var b=a.peerID,c=a.callID;a=a.msg;i("P2P Escalator %o","ACK","sent");this.$2.sendAck(b,c,a)};a.requestVideoOn=function(a){var b=a.reqVideoOn;a=a.videoon;return Boolean(b||a)};a.initEscalation=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.protocolHandler;a=b("RTCCallStore").getState();var d=a.localUser;a=a.remoteUsers;var e=a.first(),f=d.getStream();a=d.hasVideo();return(f&&a?b("Promise").resolve(f).then(function(a){c.updateLocalVideoTracker();return a}):b("RTCP2PProtocolHandler").initStream(!0).then(function(a){c.startLocalVideoTracker(a);return a})).then(function(a){e&&!e.hasFunctioningVideoTrack()?(b("RTCP2PCallEscalationActions").setEscalateToMediaStream(a),b("RTCP2PCallEscalationActions").start()):f?b("RTCCallActions").replaceLocalStream(f,a):b("RTCCallActions").addLocalStream(a);return a})};a.onEscalationSucceeded=function(){__p&&__p();var c=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),d=b("RTCCallStore").getState();d=d.localUser;if(d.getStream()===c){var e=b("RTCCallStore").getState();e=e.remoteUsers;d.toggleMuteVideo(!1);e.first()&&e.first().toggleMuteVideo(!1)}else c&&b("dangerouslyBypassDispatchError")(function(){a.updateEscalationStream(c)})};a.onEscalationFailed=function(){__p&&__p();var a=b("RTCP2PCallEscalationStore").getEscalateMediaStream(),c=b("RTCCallStore").getState();c=c.localUser;if(c.getStream()===a){var d=b("RTCCallStore").getState();d=d.remoteUsers;c.toggleMuteVideo(!0);d.first()&&d.first().toggleMuteVideo(!0)}else if(a){b("RTCUtils").stopMediaStream(a);c=b("RTCP2PCallStore").getState();d=c.protocolHandler;d.updateLocalVideoTracker()}};a.acceptEscalation=function(c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.localUser;d=d.remoteUsers;c=Boolean(c==null?void 0:c.muteVideo);if(e.hasVideo()){e.toggleMuteVideo(c);d.first()&&d.first().toggleMuteVideo(!1);d=b("RTCP2PCallStore").getState();d=d.protocolHandler;d.updateLocalVideoTracker();b("RTCP2PCallEscalationActions").setResponse(!0);return b("Promise").resolve(e.streams.first())}else return b("RTCP2PProtocolHandler").initStream(!c).then(function(c){b("RTCP2PCallEscalationActions").setResponse(!0);a.updateEscalationStream(c);return c})};a.declineEscalation=function(){b("RTCP2PCallEscalationActions").setResponse(!1)};a.updateEscalationStream=function(a){__p&&__p();var c=b("RTCCallStore").getState().localUser.getStream();if(b("FBRTCPeerConnection").doesBrowserSupportAddTrack()&&c){for(var d=a.getVideoTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}g=b("RTCP2PCallStore").getState();f=g.protocolHandler;f.updateAddedTracksForFirefoxVideoEscalation(c)}else b("RTCP2PProtocolHandler").replaceLocalStream(a)};return a}();a.ACK_TIMEOUT=h;function i(){}e.exports=a}),null);
__d("FBRTCGroupCallVideoEscalationDialog.react",["fbt","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","React","RTCMWProtocolHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.userName,d=a.onToggle;return b("React").jsxs(b("MessengerDialog.react"),{onToggle:d,children:[b("React").jsx(b("MessengerDialogBody.react"),{children:g._("{name} activ\u00f3 el videochat. \u00bfQuieres compartir tu video?",[g._param("name",c)])}),b("React").jsxs(b("MessengerDialogFooter.react"),{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{}),b("React").jsx(b("MessengerDialogButton.react"),{label:g._("Compartir video"),onClick:function(){b("RTCMWProtocolHandler").escalateLocalStream(),d()},type:"primary",use:"default"})]})]})};e.exports=a}),null);
__d("RTCGroupCallAdminModelErrorDialogController",["cx","fbt","DOM","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";var i=300;a={_container:b("DOM").create("div"),showAdminModelErrorDialog:function(){var a=this;b("ReactDOM").render(b("React").jsxs(b("MessengerDialog.react"),{onToggle:function(){return a._onUnmount()},type:"default",width:i,children:[b("React").jsx(b("MessengerDialogBody.react"),{className:"_233q",children:h._("Solo el administrador puede agregar personas que no est\u00e1n en el grupo a la llamada")}),b("React").jsx(b("MessengerDialogFooter.react"),{children:b("React").jsx(b("MessengerDialogButton.react"),{className:"_30vt _233r",label:h._("Aceptar"),onClick:function(){return a._onUnmount()},type:"primary",use:"default"})})]}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)}};e.exports=a}),null);
__d("RTCGroupCallAddMembersDialog.react",["cx","fbt","FluxContainer","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerGraphQLTokenizer.react","MessengerParticipants.bs","MessengerRTCGroupCallContactList.react","MessengerRTCGroupCallThreadRow.react","React","RTCAppDispatcher","RTCCallStore","RTCGroupCallActions","RTCGroupCallAdminModelErrorDialogController","RTCGroupCallDialogController","RTCGroupCallEscalationActions","RTCMWProtocolHandler","RTCP2PCallStore","RTWebUserActionLogger","gkx","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;a=b("React").PureComponent;var k=460;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("RTCCallStore")]};c.calculateState=function(){return{conferenceState:b("RTCCallStore").getState().callInfo.conferenceState,remoteUsers:b("RTCCallStore").getState().remoteUsers}};function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={conferenceState:"NEW",isParticipantSelected:d.props.participants.mapEntries(function(a){var b=a[0];a[1];return[d.$1(b),!1]}),newParticipants:b("immutable").List(),remoteUsers:b("immutable").Set()};d.$2=function(a){var c=!d.state.isParticipantSelected.get(a);d.setState({isParticipantSelected:d.state.isParticipantSelected.set(a,c)});a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:d.props.isP2P?"escalated":"mw",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"group_call_add_members_dialog",component:c?"participant_row_select":"participant_row_unselect"}))};d.$12=function(){__p&&__p();var a=d.props,c=a.onUnmount,e=a.thread;a=a.viewerID;c();c=d.state.newParticipants.toArray().map(function(a){return a.getUniqueID()});var f=d.$3().map(function(a){a=a.fbid;return a||""});if(d.props.isP2P){var g=[].concat(c,f).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(g,function(a){b("RTCGroupCallEscalationActions").setUsersToRing(b("immutable").Map(a));a=b("RTCP2PCallStore").getState();a=a.protocolHandler;a.escalateToMultiway()});return}e&&(c.length>0&&e.approval_mode===1&&e.admins&&e.admins[a]===void 0?b("RTCGroupCallAdminModelErrorDialogController").showAdminModelErrorDialog():(b("RTCGroupCallActions").addParticipantsToRing(c),d.$9(e)));b("RTCMWProtocolHandler").addParticipants(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,[].concat(c,f))};d.$4=function(){var a=d.state.newParticipants.toArray().map(function(a){return a.getUniqueID()}),c=d.$3().map(function(a){a=a.fbid;return a||""});a=[].concat(a,c).map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)});b("MessengerParticipants.bs").getMulti(a,function(a){a=d.$13(b("immutable").Map(a).valueSeq().toArray());b("gkx")("678352")&&a?b("RTCGroupCallDialogController").showBlockedUserWarningDialog(d.$12,d.props.onUnmount):d.$12()})};d.$6=function(a){d.setState({newParticipants:d.state.newParticipants.push(a)})};d.$8=function(a){var b=a.getUniqueID();a=d.state.newParticipants;var c=a.findIndex(function(a){return a.getUniqueID()===b});c!==-1&&d.setState({newParticipants:a["delete"](c)})};d.$7=function(){d.setState({newParticipants:b("immutable").List()})};b("RTCAppDispatcher").explicitlyRegisterStores([b("RTCCallStore")]);return d}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewerID;var e=this.state.conferenceState;if(e==="TERMINATED"||e==="TERMINATING")return null;e=b("React").jsxs("div",{className:"_2t45",children:[b("React").jsx("div",{className:"_225b",children:h._("En este chat:")}),b("React").jsx(b("MessengerRTCGroupCallContactList.react"),{isParticipantSelected:this.state.isParticipantSelected,onClick:this.$2,participantStates:b("immutable").Map(this.state.remoteUsers.map(function(a){return[a.FBID,a.participantState]})),remoteUsers:this.state.remoteUsers.toArray().sort(function(a,b){return a.userName.localeCompare(b.userName)})})]});return b("React").jsx(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:k,children:b("React").jsxs("div",{className:"_788k _5zad",children:[b("React").jsxs(i,{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{dataTestID:"AddParticipantsDialogCancelButton"}),b("React").jsx(j,{children:h._("Agregar miembros al grupo")}),b("React").jsx(b("MessengerDialogButton.react"),{dataTestID:"AddParticipantsDialogRingButton",disabled:this.$3().length+this.state.newParticipants.size===0,label:h._("Llamar"),onClick:this.$4,type:"primary"})]}),this.$5()?b("React").jsx(b("MessengerRTCGroupCallThreadRow.react"),{displayAddMemberWarning:!0,participants:c,thread:d,viewerID:a}):null,b("React").jsx(b("MessengerGraphQLTokenizer.react"),{autoFocus:!this.$5(),className:"_2el3",context:null,defaultEntries:e,enableMessageSearch:!1,entries:this.state.newParticipants,excludeGroups:!0,excludePages:!0,forGroup:!0,forceHideClearButton:!0,hasHoverState:!1,hideViewWithEntries:!1,onAddEntryAttempt:this.$6,onClear:this.$7,onRemoveEntryAttempt:this.$8,originalEntryIDs:b("immutable").Set(this.props.participants.keySeq().toArray().map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||a})),placeholder:h._("Agregar al grupo:"),scrollableViewClassName:"_2el2",shouldQueryInternalBot:!1,shouldQueryVCEndpoint:!1,showDefaultEntries:!0,useLayer:!1,viewer:this.props.viewerID,width:k})]})})};d.$5=function(){return!this.props.isP2P&&(this.props.participants.size>1||this.props.thread!==null)};d.$9=function(a){__p&&__p();var c=this;if(this.state.newParticipants.size)if(b("MessengerAdminGroupUtils").isJoinableThread(a))this.state.newParticipants.forEach(function(d){d=b("MercuryIDs").getThreadIDFromUserID(d.getUniqueID());c.$10().send(c.$11().constructUserGeneratedMessageObject(a.joinable_mode.link,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d))});else{var d="thread:"+(a.thread_fbid||a.thread_id.split(".")[1]);this.$10().send(this.$11().constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d,"log:subscribe",{added_participants:this.state.newParticipants.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()}))}};d.$10=function(){return b("MercuryMessageActions").getForFBID(this.props.viewerID)};d.$11=function(){return b("MercuryMessageObject").getForFBID(this.props.viewerID)};d.$13=function(a){return a.some(function(a){return a.is_messenger_blocked||a.is_facebook_blocked})};d.$3=function(){var a=this;return this.props.participants.filter(function(b,c){return a.state.isParticipantSelected.get(a.$1(c))}).toArray()};d.$1=function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)||""};return c}(a);e.exports=b("FluxContainer").create(c)}),null);
__d("CreateMessengerCallInviteLinkMutation",["Promise","RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","CreateMessengerCallInviteLinkMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("CreateMessengerCallInviteLinkMutation.graphql")};function a(a){__p&&__p();return new(b("Promise"))(function(c,d){g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{conference_name:a}},optimisticUpdater:null,onCompleted:function(a){a=(a=a.create_messenger_call_invite_link)==null?void 0:(a=a.messenger_call_invite_link)==null?void 0:a.link_url;if(a!=null)c({linkUrl:a});else{a=new Error("No link_url returned from server.");i(a.message);d(a)}},onError:function(a){i(a.message),d(a)}})})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setEvent("error").setErrorType("CreateMessengerCallInviteLinkMutationError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCVideoChatLinkDialog.react",["cx","fbt","Clipboard","CreateMessengerCallInviteLinkMutation","FDSButton.react","FDSSpinner.react","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RTCCallStore"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make,k=460;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={isCopied:!1,isError:!1,isLoading:!0,linkUrl:""};d.$1=function(){b("Clipboard").copy(d.state.linkUrl),d.setState({isCopied:!0})};c=b("RTCCallStore").getState().callInfo.conferenceName;b("CreateMessengerCallInviteLinkMutation")(c).then(function(a){a=a.linkUrl;d.setState({isCopied:!1,isError:!1,isLoading:!1,linkUrl:a})})["catch"](function(a){d.setState({isCopied:!1,isError:!0,isLoading:!1,linkUrl:""})});return d}var d=c.prototype;d.render=function(){return b("React").jsxs(b("MessengerDialog.react"),{type:"default",width:k,children:[b("React").jsxs(i,{children:[b("React").jsx(j,{children:h._("Invita a tus amigos con un enlace")}),b("React").jsx(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Listo"),type:"primary",use:"default"})]}),b("React").jsx(b("MessengerDialogBody.react"),{children:b("React").jsxs("div",{className:"_80_-",children:[b("React").jsx("div",{className:"_8100",children:h._("Cualquier persona con la que compartas este enlace podr\u00e1 unirse al videochat sin necesidad de tener una cuenta, pero no se la agregar\u00e1 al grupo. Puedes revocar el enlace cuando quieras.")}),b("React").jsxs("div",{className:"_81el",children:[b("React").jsx("div",{className:"_81em",children:b("React").jsx("div",{className:"_81en",children:this.state.isError?h._("No se puede recuperar el enlace de invitaci\u00f3n."):this.state.isLoading?b("React").jsx(b("FDSSpinner.react"),{size:"small"}):this.state.linkUrl})}),b("React").jsx(b("FDSButton.react"),{isDisabled:this.state.isLoading||this.state.isError,label:this.state.isCopied?h._("Copiado"):h._("Copiar"),onClick:this.$1,size:"large",style:{marginLeft:8},use:"primary"})]})]})})]})};return c}(b("React").Component);e.exports=a}),null);
__d("FBRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive"||a==="srflx")return"srflx";if(a==="peerreflexive"||a==="prflx")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown_"+a},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==void 0&&b!==null&&c!==null&&c!==void 0&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(a){a.target.charging&&(g=!0),a.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("MultiwayRequests",["Promise","AsyncRequest","FBRTCCapability","FBRTCMessageType","RTCUtils","XGroupCallSendRequestController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15e3;a=function(){__p&&__p();function a(){}var c=a.prototype;c.sendJoinRequest=function(a,c,d,e,f,g,h,i){__p&&__p();var j=h.callID,k=h.numParticipants;h=h.callTrigger;var l=i.userToEscalate,m=i.isEscalator;i=i.escP2PCallID;c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").JOIN,c,d,j,i);d={offer:{sdpString:e.toSdp()},deviceCapabilities:[b("FBRTCCapability").SUPPORT_AUDIO_DEPRECATED,b("FBRTCCapability").SUPPORT_VIDEO_DEPRECATED]};j=b("RTCUtils").createClientContextMessage(k,h?h:"");d.appMessages=[j];f&&f.length>0&&!l&&(d.usersToCall=f);l&&m&&(d.userToEscalate=l);g&&(d.mediaStatus=g);i={joinRequest:d};e=this.$1(a,c,i);return this.$2(e)};c.sendHangupRequest=function(a,c,d,e,f,g){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").HANGUP,c,d,g);d={reason:e,detailedReasonString:f};g={hangupRequest:d};e=this.$1(a,c,g);return this.$2(e)};c.sendAddParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").ADD_PARTICIPANTS,c,d,f);d={usersToInvite:e};f={addParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendRemoveParticipantsRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").REMOVE_PARTICIPANTS,c,d,f);d={usersToRemove:e};f={removeParticipantsRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendSubscriptionRequest=function(a,c,d,e,f){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").SUBSCRIPTION,c,d,f);d={subscriptions:e};f={subscriptionRequest:d};e=this.$1(a,c,f);return this.$2(e)};c.sendClientMediaUpdateRequest=function(a,c,d,e,f,g,h){c=b("RTCUtils").createRequestHeader(b("FBRTCMessageType").CLIENT_MEDIA_UPDATE,c,d,h);d={fromVersion:e,toVersion:f,mediaUpdates:g};h={clientMediaUpdateRequest:d};e=this.$1(a,c,h);return this.$2(e)};c.$2=function(a){return new(b("Promise"))(function(c,d){var e=b("XGroupCallSendRequestController").getURIBuilder().getURI();e=new(b("AsyncRequest"))(e).setMethod("POST").setData({request:JSON.stringify(a)}).setAllowCrossPageTransition(!0).setHandler(function(a){c(a.payload)}).setErrorHandler(function(a){a=a.getErrorDescription();a=Error(a!=null?a.toString():"AsyncRequest error");d(a)}).setTimeoutHandler(g,function(){d("Timeout")});e.send()})};c.$1=function(a,b,c){return{endpoint:a,jsonPayload:{header:b,body:c}}};return a}();e.exports=new a()}),null);
__d("RTCUnifiedPlanUtils",["FBRTCSupport"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getMediaStatusWithWebrtcTrackIds:function(a,c){if(b("FBRTCSupport").canUseUnifiedPlan()){var d={};Object.keys(a).forEach(function(b){var e=c.getWebrtcTrackIdFromMWTrackId(b);d[e]=a[b]});return d}return a}};e.exports=a}),null);
__d("RTCMWProtocolHandler",["invariant","Promise","regeneratorRuntime","ChannelManager","CurrentUser","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCExperiment","FBRTCGroupCallStore","FBRTCHangupReason","FBRTCLogger","FBRTCMWProtocolStore","FBRTCPeerConnection","FBRTCRtcResponseStatusCode","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCSupport","FBRTCVideoQuality","MercuryIDs","MessengerChatLinksFunnelLogger","MultiwayParticipantFetcher","MultiwayRequests","RTCAppData","RTCCallActions","RTCCallStore","RTCGroupCallActions","RTCGroupCallDialogController","RTCGroupCallEscalationStore","RTCMultiwayMessageHandler","RTCProxyUserStore","RTCProxyUserUtils","RTCSessionDescription","RTCSignalingExperiments","RTCUnifiedPlanUtils","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","RTWebUserActionLogger","emptyFunction","generateRTCCallID","gkx","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").GroupVideoViewLayout,j=b("FBRTCConstants").SignalingProtocol,k=b("FBRTCConstants").VideoQuality,l=18e4,m={appId:b("RTCAppData").getMWAppID(),deviceId:b("ChannelManager").getCompleteConfig().sessionID,userId:b("CurrentUser").getID()},n=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$5=!1;this.$6=!1;this.$7=!1;this.$8=b("FBRTCLogger").getInstance();this.$13=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;b("RTCCallActions").emit("onIceConnectionStateChange",a);switch(a){case"connected":a=b("RTCCallStore").getState();a=a.callSummary;a&&(a.onNetworkReady(),a.save(b("FBRTCCallSummaryStore").getInstance()));break;case"disconnected":case"failed":c.$3||(c.$3=window.setTimeout(function(){b("RTCCallActions").endCall(h.CONNECTION_DROPPED,"ConnectionDropped"),c.$17()},l));break;default:window.clearTimeout(c.$3),c.$3=null}};this.$1=(a=a)!=null?a:b("generateRTCCallID")();this.$2="MW_PEER_ID"}var c=a.prototype;c.setKeepLocalStreamsOnClose=function(a){this.$6=a;return this};c.setAllowIncomingCalls=function(a){this.$7=a;return this};c.startCall=function(a,c,d,e){__p&&__p();var f=this,g=e.addStreamCallback;g=g===void 0?b("emptyFunction"):g;var h=e.callTrigger,i=e.formatParameters;i=i===void 0?{}:i;var k=e.preferredCodecs;k=k===void 0?{}:k;var l=e.offerSdpTransform,m=e.serverInfoData,n=e.shouldSetDescriptions;n=n===void 0?!0:n;var o=e.isEscalatedCall;o=o===void 0?!1:o;var p=e.connectedOnJoin;p=p===void 0?!1:p;e=e.escP2PCallID;e=e===void 0?"":e;b("RTCCallActions").initialize({protocol:j.MULTIWAY,conferenceName:d,serverInfoData:m,callID:this.$1.toString(),callTrigger:h});b("MessengerChatLinksFunnelLogger").appendAction("init_mw_call",{funnelTags:["conf_name:"+d,"call_id:"+this.$1]});var q=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$2,this.$1,!1);h&&q.onCallStarted(h);q.setJoinWithSID(m!=null);q.setActiveConnection("mws");q.setCallType("mws");q.onPopupOpened();q.setConferenceName(d);q.setServerInfoData(m);if(o){var r=b("RTCCallStore").getState().callSummary;q.setEscalationP2PCallID(r.callID)}this.$9(q);q.save(b("FBRTCCallSummaryStore").getInstance());b("RTCCallActions").setCallSummary(q);r={mandatory:{},optional:[{DtlsSrtpKeyAgreement:!1},{googNumUnsignalledRecvStreams:10},{RtpDataChannels:!0}]};var s=new(b("FBRTCPeerConnection"))(j.MULTIWAY,{iceServers:[]},r);if(d.split(":")[0]!=="LIVE"){r=s.createDataChannel("data");r&&(r.onmessage=function(a){a=a.data;try{a=JSON.parse(a);a=a.body;f.$10(a)}catch(a){f.$8.logError(f.$2,f.$1,a)}})}b("FBRTCSupport").canUseUnifiedPlan()||s.addEventListener("addstream",function(a){f.$11(d,a.stream)});(b("FBRTCSupport").canUseUnifiedPlan()||b("FBRTCSupport").isSupportedSafariVersion())&&s.addEventListener("track",function(a){f.$12(d,s,a)});s.addEventListener("removestream",function(a){b("RTCCallActions").removeRemoteStream(a.stream)});s.addEventListener("iceconnectionstatechange",this.$13);this.$14(s,c,d,m,a,g,i,k,n,o,p,e,h?h:q.getCallTrigger(),l);!m?b("RTCCallActions").call(a,s):b("RTCCallActions").join(s);return s};c.$9=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};c.$12=function(a,c,d){__p&&__p();if(b("FBRTCSupport").canUseUnifiedPlan()){var e,f;f=(f=d)!=null?(f=f.track)!=null?f.id:f:f;e=(e=d)!=null?(e=e.transceiver)!=null?e.mid:e:e;c.processUnifiedTrackIdTranslation(f,e)}if(d.streams.length>0){f=d.streams[0].id;c.addRemoteMediaCnameIfNeeded(f);this.$11(a,d.streams[0])}};c.$11=function(c,d){__p&&__p();var e=this;d.onaddtrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").addRemoteTrack(c,a)};d.onremovetrack=function(a){var c=a.target;a=a.track;b("RTCCallActions").removeRemoteTrack(c,a)};var f=d.id.split(":")[0],g=b("MercuryIDs").getParticipantIDFromUserID(f);if(f!==b("CurrentUser").getID()){f=b("RTCProxyUserUtils").getUserIDToFetch(f);var h=b("RTCProxyUserStore").getState();h=h.proxyingAsToProxyUser;b("promiseDone")(b("MultiwayParticipantFetcher").fetchAllParticipants(c,b("immutable").Set([f]),{proxyingAsToProxyUser:h}),function(c){c=c.get(g);var f=c&&(c.is_messenger_blocked||c.is_facebook_blocked);b("gkx")("678352")&&f?b("RTCGroupCallDialogController").showIncomingBlockedUserWarningDialog(function(){return a.endCall(b("RTCCallStore").getState().callInfo.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)},function(b,a){return e.$15(g,b,a)},c,d):e.$15(g,c,d)})}};c.$15=function(c,d,e){__p&&__p();var f={};f[c]=d;b("RTCGroupCallActions").onParticipantsAdded(f);b("RTCCallActions").addRemoteStream(e);c=b("RTCCallStore").getState();d=c.callInfo;f=b("FBRTCGroupCallStore").getState();e=f.layout;c=f.pinnedSpeakerFBID;f=b("RTCCallStore").getConnection(j.MULTIWAY);f&&a.subscription(d.conferenceName,d.serverInfoData,f.getRemoteStreams(),e,c,f.getRemoteMediaCnames())};c.$10=function(a){if(a.dominantSpeakerNotification){a=a.dominantSpeakerNotification.userId;b("RTCGroupCallActions").setDominantSpeaker(a)}};c.setDescriptions=function(){this.$5=!0;var a=b("RTCCallStore").getConnection(j.MULTIWAY);this.$4&&a&&a.setRemoteDescription(this.$4)};a.escalateLocalStream=function(c){__p&&__p();c===void 0&&(c=!0);return a.initStream(c).then(function(a){__p&&__p();var d=b("RTCCallStore").getState(),e=d.callInfo,f=e.conferenceName;e=e.serverInfoData;var g=d.localUser;d=b("RTCCallStore").getConnection(j.MULTIWAY);if(!d)return;var h=null;c&&(a.getTracks().forEach(function(a){a.kind==="audio"&&(a.enabled=!g.isAudioMuted())}),h=g.streams.first(),d.removeStream(h));return o(d,[a],f,e,[]).then(function(){h&&b("RTCCallActions").removeLocalStream(h),b("RTCCallActions").addLocalStream(a)})})};c.onStreamReady=function(a,c,d,e,f){var g={};e||b("RTCCallActions").addLocalStream(a);g.isEscalatedCall=e;f.p2pCallID&&(g.escP2PCallID=f.p2pCallID);f.serverInfoData&&(g.serverInfoData=f.serverInfoData);f.callTrigger&&(g.callTrigger=f.callTrigger);b("RTWebClientFeatureGating").preferIsacForGroupCalls()&&(g.preferredCodecs={audio:"ISAC/16000"});this.startCall(c,[a],d,g)};a.initStream=function(a,c,d,e,f){d===void 0&&(d=!0);var g=b("FBRTCExperiment").gen("rtc_www_mw_audio_fallback");g=a&&g.getBool("use_audio_fallback",!1);d={audio:d&&b("RTCUserMediaConstraints").audio(e),video:a?babelHelpers["extends"]({},p(b("RTCUserMediaConstraints").video(c?c:k.HD_VIDEO,f))):!1};e={optionalConstraintsOnly:!0,supportFilteredStreams:a&&b("RTWebClientFeatureGating").canUseMWVideoFilters()};c=g?b("RTCUtils").getUserMediaWithAudioFallback:b("RTCUtils").getUserMedia;return c(d,e)};a.updateLocalStream=function(a){var c=b("RTCCallStore").getState();c=c.callInfo;var d=c.conferenceName;c=c.serverInfoData;var e=b("RTCCallStore").getConnection(j.MULTIWAY);return!e?b("Promise").resolve():o(e,[a],d,c,[]).then(function(){b("RTCCallActions").removeAllLocalStreams(!0),b("RTCCallActions").addLocalStream(a)})};a.startScreenStream=function(a){__p&&__p();var c=b("RTCCallStore").getState(),d=c.callInfo,e=d.conferenceName;d=d.serverInfoData;var f=c.localUser;c=b("RTCCallStore").getConnection(j.MULTIWAY);if(!c)return;for(var g=f.screenStreams,h=Array.isArray(g),i=0,g=h?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=g.length)break;k=g[i++]}else{i=g.next();if(i.done)break;k=i.value}k=k;k!==a&&b("RTCUtils").transferAudioTracks(a,k)}for(var k=f.streams,i=Array.isArray(k),h=0,k=i?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(i){if(h>=k.length)break;g=k[h++]}else{h=k.next();if(h.done)break;g=h.value}g=g;b("RTCUtils").transferAudioTracks(a,g)}b("promiseDone")(o(c,[a],e,d,[]),function(){__p&&__p();for(var c=f.screenStreams,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;g!==a&&(b("RTCCallActions").removeLocalScreenStream(g),b("RTCUtils").stopMediaStream(g))}b("RTCCallActions").addLocalScreenStream(a)})};a.updateScreenStream=function(b,c){a.startScreenStream(c)};a.stopScreenStream=function(c){__p&&__p();var d=b("RTCCallStore").getState(),e=d.callInfo,f=e.conferenceName,g=e.serverInfoData;e=d.localUser;var h=b("RTCCallStore").getConnection(j.MULTIWAY);if(!h)return;d=e.getStream();d?e=b("Promise").resolve(d):e=a.initStream(!0,void 0,!1).then(function(a){b("RTCCallActions").addLocalStream(a);return a});b("promiseDone")(e,function(a){b("RTCUtils").transferAudioTracks(a,c),b("promiseDone")(o(h,[a],f,g,[]),function(){b("RTCUtils").stopMediaStream(c),b("RTCCallActions").removeLocalScreenStream(c)})})};a.endCall=function(c,d,e,f){f===void 0&&(f=""),b("promiseDone")(a.genEndCall(c,e,{serverInfoData:d,detailedReasonString:f,keepLocalStream:!1}))};a.genEndCall=function(a,c,d){b("RTCMultiwayMessageHandler").close();d.keepLocalStream||b("RTCCallActions").removeAllLocalStreams(!0);var e=d.detailedReasonString||"Hangup by user";b("RTCCallActions").hangup(b("RTCUtils").endCallReasonFromHangupReason(c),e);return b("MultiwayRequests").sendHangupRequest(m,a,d.serverInfoData,c,e,b("RTCCallStore").getState().callInfo.callID).then(function(){b("RTCCallActions").hangupSuccess()})["catch"](function(a){b("RTCCallActions").hangupError();throw a})};a.otherUserInAnotherCall=function(a,c,d,e,f){f===void 0&&(f=""),b("promiseDone")(b("MultiwayRequests").sendHangupRequest(m,a,c,d,f||"User receiving this call is in another call",e))};c.iceRestart=function(a,c){var d=b("RTCCallStore").getConnection(j.MULTIWAY);d&&o(d,[],a,c,[],{iceRestart:!0})};a.addParticipants=function(a,c,d){return b("MultiwayRequests").sendAddParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};a.removeParticipants=function(a,c,d){return b("MultiwayRequests").sendRemoveParticipantsRequest(m,a,c,d,b("RTCCallStore").getState().callInfo.callID)};a.subscription=function(a,c,d,e,f,g){g===void 0&&(g=[]);var h=e===i.DOMINANT_SPEAKER?b("FBRTCVideoQuality").LOW:e===i.GRID?b("FBRTCVideoQuality").MEDIUM:b("FBRTCVideoQuality").HIGH;d=d.map(function(a){a=a.id;return a}).concat(g);g=d.map(function(a){return{cname:a,options:{videoQuality:e===i.DOMINANT_SPEAKER&&f===a.split(":")[0]?b("FBRTCVideoQuality").HIGH:h}}});e===i.DOMINANT_SPEAKER&&!f&&g.push({cname:""});b("MultiwayRequests").sendSubscriptionRequest(m,a,c,g,b("RTCCallStore").getState().callInfo.callID)};a.clientMediaUpdate=function(a,c,d,e,f){b("MultiwayRequests").sendClientMediaUpdateRequest(m,a,c,d,e,f,b("RTCCallStore").getState().callInfo.callID).then(function(a){var c=a.header.responseStatusCode;a=a.body.clientMediaUpdateResponse.currentVersion;return b("RTCGroupCallActions").onClientMediaUpdateResponse(c,a)})["catch"](function(a){b("FBRTCLogger").getInstance().logError(null,b("RTCCallStore").getState().callInfo.callID,a)})};c.$14=function(a,c,d,e,f,g,h,i,j,k,l,m,n,p){var q=this;this.$16(d,e);b("promiseDone")(o(a,c,d,e,f,{},g,h,i,j,k,m,n,p),function(a){q.$4=a,q.$5&&q.setDescriptions(),b("RTCCallActions").callSuccess(l)},function(a){b("RTCCallActions").callError(a),q.$17()})};c.$17=function(){var a=b("RTCCallStore").getConnection(j.MULTIWAY);b("RTCMultiwayMessageHandler").close();a&&a.close();this.$6||b("RTCCallActions").removeAllLocalStreams(!0)};c.$16=function(a,c){b("RTCMultiwayMessageHandler").initHandler(a,c,this.$7,this.$6)};a.maybeLimitBitrate=function(a){a=a.getSenders().filter(function(a){return a.track&&a.track.kind==="video"});if(a.length>0&&b("RTCSignalingExperiments").shouldCapMWBitrate()){a=a[0];var c=a.getParameters();c.encodings[0].maxBitrate=72e4;b("Promise").resolve(a.setParameters(c))}};return a}();function o(a,c,d,e,f,g,h,i,k,l,o,p,q,r){__p&&__p();var s,t,u,v,w,x,y,z,A,B,C,D,E;return b("regeneratorRuntime").async(function(F){__p&&__p();while(1)switch(F.prev=F.next){case 0:g===void 0&&(g={}),h===void 0&&(h=b("emptyFunction")),i===void 0&&(i={}),k===void 0&&(k={}),l===void 0&&(l=!0),o===void 0&&(o=!1),p===void 0&&(p=""),q===void 0&&(q=""),r===void 0&&(r=[]),s={},t=[],(u=a.getLocalStreams()||[],v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]());case 12:if(!v){F.next=18;break}if(!(w>=u.length)){F.next=15;break}return F.abrupt("break",26);case 15:x=u[w++];F.next=22;break;case 18:w=u.next();if(!w.done){F.next=21;break}return F.abrupt("break",26);case 21:x=w.value;case 22:y=x,a.removeStream(y);case 24:F.next=12;break;case 26:if(!b("FBRTCSupport").canUseUnifiedPlan()){F.next=29;break}F.next=29;return b("regeneratorRuntime").awrap(a.maybeHandleVideoEscalationForUnified());case 29:c.forEach(function(b){t=t.concat(b.getTracks()),a.addStream(b,h)});a.maybeSupportReceivingVideoWithTransceivers();t.forEach(function(a){s[a.id]=a.enabled});F.next=34;return b("regeneratorRuntime").awrap(a.createOffer(babelHelpers["extends"]({preserveH264:b("RTCUtils").isWatchPartyCall(d)},g),{DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),FORMAT_PARAMETERS:i,OFFER_SDP_TRANSFORM:r},k));case 34:z=F.sent;A=b("FBRTCMWProtocolStore").getState().clientMediaUpdateInfo.lastSyncedClientVersion+1;z.sessionDescription.setVersion(A);b("RTCGroupCallActions").setLocalClientVersion(A);if(b("FBRTCSdpUtils").validateOfferSdp(d,z.toSdp())){F.next=40;break}throw b("FBRTCRtcResponseStatusCode").BAD_REQUEST;case 40:F.next=42;return b("regeneratorRuntime").awrap(a.setLocalDescription(z));case 42:b("RTCGroupCallActions").onJoinRequestSent();(b("RTCUtils").isGroupCall(d)||b("RTCUtils").isMessengerCall(d))&&n.maybeLimitBitrate(a);F.next=46;return b("regeneratorRuntime").awrap(b("MultiwayRequests").sendJoinRequest(m,d,e,z,f.length>0?f:null,t.length>0?s:null,{callID:b("RTCCallStore").getState().callInfo.callID,callTrigger:q,numParticipants:b("RTCCallStore").getState().remoteUsers.size},{userToEscalate:o&&f.length>0?f[0]:null,isEscalator:b("RTCGroupCallEscalationStore").getState().toRing,escP2PCallID:p}));case 46:B=F.sent;b("RTCGroupCallActions").onReceivedJoinResponse();C=B.header.responseStatusCode;if(!(C!==b("FBRTCRtcResponseStatusCode").OK)){F.next=52;break}b("RTWebUserActionLogger").logCheckpoint({checkpoint:"MW response status code "+C});return F.abrupt("return",new(b("Promise"))(function(a,b){b(C)}));case 52:b("RTCGroupCallActions").onJoinResponse(B.header.serverInfoData);b("RTCProxyUserUtils").setProxyingAsUsersFromMessage(B.body.joinResponse);D=new(b("RTCSessionDescription"))(j.MULTIWAY,{type:"answer",sdp:B.body.joinResponse.answer.sdpString},{FORMAT_PARAMETERS:i});if(!l){F.next=58;break}F.next=58;return b("regeneratorRuntime").awrap(a.setRemoteDescription(D));case 58:E=b("RTCUnifiedPlanUtils").getMediaStatusWithWebrtcTrackIds(B.body.joinResponse.mediaStatus,a);b("RTCGroupCallActions").toggleRemoteStream(E);b("RTCGroupCallActions").onProcessedJoinResponse();return F.abrupt("return",D);case 62:case"end":return F.stop()}},null,this)}function p(a){a instanceof Object||g(0,444);return a}e.exports=n}),null);
__d("RTCOneVCActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={storeParticipants:function(a){b("RTCAppDispatcher").dispatch({type:"STORE_PARTICIPANTS",participants:a})},setMeetingID:function(a){b("RTCAppDispatcher").dispatch({type:"SET_MEETING_ID",meetingID:a})},setMeetingPassword:function(a){b("RTCAppDispatcher").dispatch({type:"SET_MEETING_PASSWORD",meetingPassword:a})}};e.exports=a}),null);
__d("RTCPeerConnectionQueue",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=[],this.$2=[]}var b=a.prototype;b.push=function(a,b){switch(a){case"add":this.$1.push(b);break;case"remove":this.$2.push(b);break}};b.drain=function(){this.$3(this.$2),this.clear("remove"),this.$3(this.$1),this.clear("add")};b.$3=function(a){__p&&__p();if(a.length<1)return;for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}};b.clear=function(a){switch(a){case"add":this.$1=[];break;case"remove":this.$2=[];break;default:this.$1=[],this.$2=[]}};return a}();e.exports=a}),null);
__d("RTCP2PProtocolHandler",["invariant","Promise","Bootloader","CurrentUser","DateConsts","ErrorUtils","FBLogger","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConfig","FBRTCConsoleLogger","FBRTCConstants","FBRTCExperiment","FBRTCIceCache","FBRTCLocalMessageQueue","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMessage","FBRTCMessageDedup","FBRTCMessageListener","FBRTCMessageSender","FBRTCPCConfig","FBRTCPeerConnection","FBRTCPeerConnectionHelper","FBRTCRetriableMessage","FBRTCSdpUtils","FBRTCStatsHelpers","FBRTCSupport","FBRTCTurnDiscovery","FBRTCUrlManager","FBRTCUserSettings","RTCCallActions","RTCCallNUXActions","RTCCallStore","RTCCallType","RTCConfig","RTCEndCallReason","RTCGroupCallEscalationStore","RTCGroupCallEscalator","RTCOneVCActions","RTCP2PCallActions","RTCP2PCallEscalationActions","RTCP2PCallEscalationStore","RTCP2PCallEscalator","RTCP2PCallStore","RTCP2PCallWindowHandler","RTCPeerConnectionQueue","RTCSessionDescription","RTCSignalingExperiments","RTCStreamDurationTracker","RTCUserMediaConstraints","RTCUtils","RTWebClientFeatureGating","RTWebExperiments","RTWebUserActionLogger","UserAgent","clearTimeout","debounce","gkx","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("DateConsts").MS_PER_MIN;c=b("DateConsts").MS_PER_SEC;var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").CallType,j=b("FBRTCConstants").SignalingProtocol,k=b("FBRTCConstants").VideoQuality,l=b("FBRTCConstants").ClientReportedEventType,m=1*a,n=15*c,o=30*c;d=function(){__p&&__p();function a(){__p&&__p();var c=this;this.$4={streams:{}};this.$5=b("FBRTCLogger").getInstance();this.$6=!1;this.$7=!0;this.$8=!1;this.$9="passive";this.$10=new(b("FBRTCMessageSender"))();this.$15=new(b("FBRTCIceCache"))();this.$16=!1;this.$17=[];this.$18=!1;this.$21=null;this.$22=null;this.$24=new(b("RTCStreamDurationTracker"))("video");this.$25=new(b("RTCStreamDurationTracker"))("video");this.$26=new(b("RTCStreamDurationTracker"))("screen");this.$27=!1;this.$28=new(b("RTCPeerConnectionQueue"))();this.$31=!1;this.$49=function(a){a=a.candidate;a&&c.$62(a)};this.$50=function(a){__p&&__p();a=a.target;a=a.iceConnectionState;c.$33("RTCP2PProtocolHandler_PC_iceconnectionstatechange: "+a);(c.$22==="disconnected"||c.$22==="failed")&&a==="connected"&&c.$32("connection recovery",c.$22);c.$32("ICE connection state change",a);b("clearTimeout")(c.$21);switch(a){case"checking":c.$8=!0;break;case"connected":case"completed":c.$63();c.$64();c.$65();break;case"failed":c.$21=b("setTimeout")(function(){if(b("RTCConfig").CollaborationBrowserConfig.ICE_recovery&&b("FBRTCConfig").isVCEndpointCall()){c.$66("ICE failure");return}c.$61(new Error("ICE failed"));b("RTCP2PCallActions").setConnectionStatus("DISCONNECTED")},b("RTCConfig").CollaborationBrowserConfig.ICE_failed_timeout);break;case"disconnected":c.$21=b("setTimeout")(function(){c.$36(h.CONNECTION_DROPPED,!1,!0,!1)},b("RTCConfig").CollaborationBrowserConfig.ICE_disconnected_timeout);break;case"closed":break}};this.$69=function(){var a=c.$3.getCreatedIceCandidates();for(var b=0;b<a.length;b++)c.$62(a[b])};this.$51=function(a){a=a.target;a=a.iceGatheringState;c.$33("RTCP2PProtocolHandler_PC_icegatheringstatechange: "+a);c.$32("ICE gathering state change",a)};this.$52=function(a){var b=a.errorCode,d=a.errorText,e=a.hostCandidate;a=a.url;c.$70("RTCP2PProtocolHandler: PC icecandidateerror "+b+": "+d+". candidate: "+e);c.$32("ICE candidate error",{errorCode:b,errorText:d,hostCandidate:e,url:a})};this.$71=function(){var a;c.$23?a=h.UNSUPPORTED_VERSION:a=h.OTHER_NOT_CAPABLE;c.$36(a,!1,!0,!1,"TimedOut")};this.$55=b("debounce")(function(d){__p&&__p();var e=d.target;c.$32("offer renegotiation",{iceConnectionState:e.iceConnectionState,isNegotiationExpected:c.$7});if(e.iceConnectionState==="closed")return;else if(!c.$7){c.$32("offer renegotiation","ignore");return}else if(!b("RTCP2PCallEscalator").isNegotiationAllowed()){c.$32("offer renegotiation","not allowed - escalating");return}else if(c.$6){c.$32("offer renegotiation","retry");b("setTimeout")(function(){return c.$55(d)},100);return}c.$7=!1;var f=[];if(e.signalingState==="stable"){if(c.$8){e=b("RTCP2PCallStore").getState();e=e.signalingExperiments;if(!e.support("sdp_update"))c.internalResetConnection(),f.push("new offer");else{e=a.supportMultipleStreams();f.push("SDP update",e?"plan B":null)}c.$9="passive"}c.$32("offer renegotiation","create offer");c.$67().then(function(a){if(a.strongDiff(c.$3.getLocalDescription())){c.$32("offer renegotiation",f);return a}return null}).then(function(a){a&&(c.$8&&b("RTCP2PCallActions").setConnectionStatus("RECONNECTING"),c.$68(a)),c.$9="active"})["catch"](function(a){c.$61(new Error("Failed to create offer onNegotiationNeeded: "+a.message))})}},50);this.$56=function(d){__p&&__p();if(c.$27){c.$28.push("add",function(){return c.$56(d)});return}var e=d.stream,f=c.$72(e),g=c.$1;f===b("FBRTCConstants").StreamType.SCREEN_CONTENT?(b("RTCCallActions").addRemoteScreenStream(e,g),!a.supportMultipleStreams()&&e.getAudioTracks().length>0&&c.$25.track(e)):(b("FBRTCUserSettings").updateForRemoteStream(e),b("RTCCallActions").addRemoteStream(e,g),c.$25.track(e),b("RTCP2PCallStore").addListener(b("debounce")(function(){b("RTCP2PCallStore").getState().callType!==b("RTCCallType").AUDIO_ONLY&&c.$63()},50)));c.$18=!0;while(c.$17.length>0)c.$73(c.$17.shift());c.$32("remote stream: added",e)};this.$57=function(a){a=b("RTCCallStore").getState().remoteUsers.first();a&&!a.isVideoMuted()&&(b("RTCCallActions").toggleMuteRemoteVideo(!1,a.FBID),c.$32("on media track event",{action:"toggleMuteRemoteVideo",muted:!1,remoteUserID:a.FBID}))};this.$58=function(a){__p&&__p();if(c.$27){c.$28.push("remove",function(){return c.$58(a)});return}var d=a.stream,e=c.$72(d),f=c.$1;if(e===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeRemoteScreenStream(d,f);e=b("RTCCallStore").getState().remoteUsers.first();if(e){e=e.streams.first();e&&c.$25.track(e)}}else b("RTCCallActions").removeRemoteStream(d,f);c.$32("remote stream: removed",d)};this.$34=function(a){c.$33("RTCP2PProtocolHandler_Received_TURN_Creds"),c.$32("TURN credentials received",a),b("FBRTCPCConfig").setTurnCredentials(a),r(function(b){return b.setRelayIP(a.ip)})};this.$35=function(){c.$5.logError(c.$1,c.$2,"Failed to get turn creds"),c.$36(h.CLIENT_ERROR,!1,!b("RTCP2PCallStore").isCaller(),!1,"NoTurnCreds")};this.$42=function(a,b){c.$36(a,!1,!1,!1,b.toString())};this.$41=function(a,b){__p&&__p();var d=b.call_id;if(c.$81()){c.$5.logError(c.$1,c.$2,"Message sent after call ended: "+b.type);return}if(c.$1!==a||c.$2!==d)return;r(function(a){return a.onMessageSent(b)});c.$32("message sent",b)};this.$43=function(a){a=a.message+"; "+a.stackFrames[0].identifier;c.$5.logError(c.$1,c.$2,"JSError: "+a)};this.$32("call controller init");this.$33("RTCP2PProtocolHandler_constructed")}var c=a.prototype;c.init=function(a,c){__p&&__p();this.$1=a;this.$2=c;this.$33("RTCP2PProtocolHandler_init_call");if(!b("RTWebExperiments").passOfferWithWindowMessages()){a=b("FBRTCLocalMessageQueue").getPeerOfferFromStorage(this.$1);this.$32("local message queue updates",{action:"getOffer",cachedOffer:a,callID:this.$2});if(a){this.$32("call: try","not ready");c=new(b("FBRTCMessage"))(a);b("RTCP2PCallActions").processMessage(c)}}return this};c.setPreserveLocalStream=function(a){this.$30=a;return this};c.fetchTURNCredentials=function(){if(b("FBRTCConfig").isVCEndpointCall()){this.$33("RTCP2PProtocolHandler_skip_TURN_discovery");return b("Promise").resolve()}this.$32("call: try","not ready");return b("FBRTCTurnDiscovery").requestTurnCreds(this.$2.toString(),this.$1).then(this.$34,this.$35)};c.endCall=function(a,c,d){a===void 0&&(a=h.HANGUP_CALL),c===void 0&&(c=""),d===void 0&&(d=!1),b("RTCCallActions").hangup(a,c),this.$36(a,!1,!0,d,c)};c.startCall=function(a,c){__p&&__p();var d=this,e=b("RTCP2PCallStore").isCaller();this.$32("call: start process",{callTrigger:a,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});this.$3=this.$38();this.$39();this.$28=new(b("RTCPeerConnectionQueue"))();this.$32("local message queue updates",{action:"getOffer",offer:c});var f=null;c?(this.$19=new(b("FBRTCMessage"))(c),b("FBRTCMessageDedup").check(this.$1,this.$19.callID,this.$19.msgID),f=!1):(f=!0,b("RTCP2PCallActions").setIsCaller(f));e&&!f&&this.handleCallCollision(this.$19,!1);f!==e&&(this.$32("caller mismatch",{initialValue:e,actualValue:f}),e?this.$33("RTCP2ProtocolHandler_offer_mismatch_caller_found_unexpected_cached_offer"):this.$33("RTCP2PProtocolHandler_offer_mismatch_callee_did_not_find_cached_offer"));this.$7=f;this.$19 instanceof b("FBRTCMessage")&&b("RTCP2PCallActions").processMessage(this.$19);this.$40(a,f);this.$10=new(b("FBRTCMessageSender"))();this.$10.onMessageSent=this.$41;this.$10.onSendFailure=this.$42;this.$29=new(b("RTCP2PCallEscalator"))(this.$1,this.$2,this.$10);b("ErrorUtils").addListener(this.$43,!0);b("FBRTCMessageListener").setMessageHandler(function(a){d.$44(a)});b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").setOneVCMessegeHandler(function(a){d.$45(a)});this.$46();b("RTCP2PCallActions").setConnectionStatus("CONTACTING");b("RTCCallActions").call([this.$1],this.$3)};c.$40=function(a,c){c=b("FBRTCCallSummary").restoreOrInitialize(b("FBRTCCallSummaryStore").getInstance(),this.$1,this.$2,c,this.$19,a);c.setCallType(b("RTCP2PCallStore").getState().callType===b("RTCCallType").AUDIO_ONLY?i.VOIP:i.DIRECT_VIDEO);c.setActiveConnection("p2p");this.$47(c);b("RTCCallActions").setCallSummary(c)};c.$47=function(a){b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.addExtraInfo(b("FBRTCLogger").Key.BATTERY_START,c.level)})};c.startScreenStream=function(c){if(!a.supportMultipleStreams()){var d=b("RTCCallStore").getState();d=d.localUser;d=d.streams.first();b("RTCUtils").transferAudioTracks(c,d)}b("RTCCallActions").addLocalScreenStream(c)};c.stopScreenStream=function(c){__p&&__p();var d=b("RTCCallStore").getState();d=d.localUser;if(!d.screenStreams.includes(c))return;if(!a.supportMultipleStreams()){d=d.streams.first();b("RTCUtils").transferAudioTracks(d,c)}b("RTCCallActions").removeLocalScreenStream(c);b("RTCUtils").stopMediaStream(c)};c.updateScreenStream=function(a,c){b("RTCUtils").transferAudioTracks(c,a),b("RTCCallActions").replaceLocalScreenStream(a,c),b("RTCUtils").stopMediaStream(a)};c.$48=function(b){if(!a.supportMultipleStreams()&&b.hasScreenStream())return!0;else return!b.isVideoMuted()};c.$38=function(){__p&&__p();var a=this,c=b("RTCP2PCallStore").getState();c=c.isPeerOnMobile;c=new(b("FBRTCPeerConnection"))(j.P2P,b("FBRTCPCConfig").getConfig(),b("FBRTCPCConfig").getConstraints(c));var d,e=null,f,g;b("RTCCallStore").addListener(b("debounce")(function(){__p&&__p();var c=b("RTCCallStore").getState();c=c.localUser;if(!c||c===d)return;d=c;var h=a.$48(c);e!==h&&e!==null&&a.$10&&a.$10.sendMuteStateUpdate(a.$1,a.$2,h);e=h;h=c.streams;c=c.screenStreams;var i=c!==g,j=h!==f;j||i?(f=h,g=c,a.$39(i)):a.$24.update()},50));b("FBRTCConfig").isVCEndpointCall()&&c.createDataChannel("noop");c.addEventListener("icecandidate",this.$49);c.addEventListener("iceconnectionstatechange",this.$50);c.addEventListener("icegatheringstatechange",this.$51);c.addEventListener("icecandidateerror",this.$52);c.addEventListener("connectionstatechange",this.$53);c.addEventListener("signalingstatechange",this.$54);c.addEventListener("negotiationneeded",this.$55);c.addEventListener("addstream",this.$56);c.addEventListener("track",this.$57);c.addEventListener("removestream",this.$58);c.addEventListener("datachannel",this.$59);this.$60(c);return c};a.supportMultipleStreams=function(){var a=b("RTCP2PCallStore").getState();a=a.signalingExperiments;return a.support("multiple_streams_plan_b")||a.support("multiple_streams_unified")};c.$39=function(c){__p&&__p();c===void 0&&(c=!1);if(this.$3.getSignalingState()==="closed")return;var d=b("RTCCallStore").getState();d=d.localUser;if(!d)return;var e=d.getStream();d=d.getScreenStream();var f=[];a.supportMultipleStreams()?(d?(f.push(d),this.$26.track(d)):this.$26.update(),e?(f.push(e),this.$24.track(e)):this.$24.update()):d?(this.$26.track(d),this.$24.track(d),f.push(d)):(this.$26.update(),e&&(this.$24.track(e),f.push(e)));if(b("FBRTCPeerConnection").isTrackAPISupported()&&b("RTWebClientFeatureGating").restartVideoWithTrackAPI()&&f.length===1){d=b("FBRTCPeerConnectionHelper").resetLocalStreamWithTrackAPI(this.$3,f[0],c);this.$7=this.$7||d}else{e=b("FBRTCPeerConnectionHelper").resetLocalStreams(this.$3,f);this.$7=this.$7||e}};c.updateAddedTracksForFirefoxVideoEscalation=function(c){b("FBRTCPeerConnection").doesBrowserSupportAddTrack()||b("FBLogger")("rtc_www").mustfix("This function must be called within Firefox context"),this.$7=!0,this.$3.addStream(c),a.replaceLocalStream(c)};c.$61=function(a){this.$36(h.WEBRTC_ERROR,!1,!0,!1,a.message)};c.$66=function(a){__p&&__p();var c=this;this.$6=!0;this.$7=!1;this.$9="passive";this.internalResetConnection();this.$33("RTCP2PProtocolHandler_connection_recovery_"+a);this.$32("connection recovery",a);this.$67().then(function(a){b("RTCP2PCallActions").setConnectionStatus("RECONNECTING"),c.$68(a),c.$9="active"})["catch"](function(b){c.$61(new Error("Failed recovering from "+a))})};c.$67=function(){var a=!b("RTCP2PCallStore").isAudioOnly()||b("RTCP2PCallEscalator").initVideoInAudioCall(),c={ADD_AUDIO_NACK:b("RTCSignalingExperiments").shouldEnableAudioNack(),DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),SSRC_CONTENT_TYPE:b("RTWebClientFeatureGating").addScreenContentTypeInSDP()?b("RTCCallStore").getState().localUser.getMediaTypeForTracks():void 0};return this.$3.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:a},c)};c.$62=function(a){__p&&__p();var b=a.sdpMid;if(b!=null){b=this.$3.transformLocalIceCandidateMid(b);if(window.RTCIceCandidate){var c=a.sdpMLineIndex,d=a.candidate;a=new RTCIceCandidate(babelHelpers["extends"]({candidate:d,sdpMid:b},c!=null?{sdpMLineIndex:c}:null))}else a.sdpMid=b}this.$10.sendIceCandidate(this.$1,this.$2,a)};c.$53=function(a){a.target};c.$54=function(a){a.target};c.internalResetConnection=function(){__p&&__p();var a=this;this.$7=!1;var c=this.$1,d=b("RTCCallStore").getState().remoteUsers.first(),e=d.streams,f=d.screenStreams;this.$27=!0;this.$28.clear("add");this.$28.push("remove",function(){__p&&__p();for(var a=e,d=Array.isArray(a),g=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(d){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;b("RTCCallActions").removeRemoteStream(h,c)}for(var h=f,g=Array.isArray(h),d=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(d>=h.length)break;a=h[d++]}else{d=h.next();if(d.done)break;a=d.value}a=a;b("RTCCallActions").removeRemoteScreenStream(a,c)}});this.$3.reset().then(function(){a.$27=!1,a.$28.drain()})["catch"](function(b){a.$61(new Error("Failed to reset peer connection: "+b.message))});b("FBRTCConfig").isVCEndpointCall()&&this.$3.createDataChannel("noop")};c.$72=function(a){var c=b("FBRTCConstants").StreamType;try{switch(this.$4.streams[a.id].type){case c.SCREEN_CONTENT:return c.SCREEN_CONTENT;case c.AUDIO_VIDEO:return c.AUDIO_VIDEO;case c.AUDIO_ONLY:return c.AUDIO_ONLY;default:throw Error("no known stream type found, detecting")}}catch(b){return a.getVideoTracks().length>0?c.AUDIO_VIDEO:c.AUDIO_ONLY}};c.$63=function(){this.$24.isStarted()?this.$24.update():this.$24.start();var a=b("RTCP2PCallStore").getState();a=a.callType;a!==b("RTCCallType").AUDIO_ONLY&&(this.$25.isStarted()?this.$25.update():this.$25.start());this.$26.isStarted()?this.$26.update():this.$26.start()};c.$64=function(){var a=b("RTCP2PCallStore").getState().connectionStatus;if(a==="ESCALATING_TO_BJN")return;b("RTCP2PCallActions").setConnectionStatus("CONNECTED");this.$31||(this.$31=!0,this.$10.sendClientReportedEvent(this.$1,this.$2,l.MEDIA_CONNECTED),this.$33("RTCP2PProtocolHandler_first_time_media_connected"));r(function(a){a.onCallConnected(),a.onNetworkReady()})};c.$59=function(a){a.channel};c.startLocalVideoTracker=function(a){this.$24.track(a)};c.updateLocalVideoTracker=function(){this.$24.update()};a.initStream=function(c,d,e){b("RTWebUserActionLogger").startTimer("RTCP2PProtocolHandler_initStream");return a.internalInitStream(c,d,e).then(function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_success"});return a})["catch"](function(a){b("RTWebUserActionLogger").logStopTimer({timerName:"RTCP2PProtocolHandler_initStream",checkpointName:"RTCP2PProtocolHandler_initStream_failed"});throw a})};a.internalInitStream=function(c,d,e){__p&&__p();var f=b("RTCP2PCallStore").getState();f=f.isPeerOnMobile;var g=a.getDefaultVideoQuality();f&&(g=k.LQ_VIDEO);f=!c&&b("RTCP2PCallEscalator").initVideoInAudioCall();g=b("RTCUserMediaConstraints").video(g,e||"");var h=c||f?babelHelpers["extends"]({aspectRatio:{ideal:Number((16/9).toFixed(10))}},q(g)):!1;return b("RTCUtils").getUserMediaWithAudioFallback({audio:b("RTCUserMediaConstraints").audio(d||""),video:h},{optionalConstraintsOnly:!1,supportFilteredStreams:c&&b("RTWebClientFeatureGating").canUseP2PVideoFilters()}).then(function(a){__p&&__p();a.getVideoTracks().forEach(function(a){a.enabled=c});if(c)try{var b=a.getVideoTracks();b=b[0];b||p(function(a){return a.log("audio fallback",{eventDetails:{videoConstraints:h}})})}catch(a){p(function(b){return b.log("init stream error",{eventDetails:{error:a.name,message:a.message,videoConstraints:h}})})}return a})};a.replaceLocalStream=function(a,c){c===void 0&&(c=!1);var d=b("RTCCallStore").getState().localUser.streams.first();b("RTCCallActions").replaceLocalStream(d,a);c&&b("RTCUtils").stopMediaStream(d)};c.escalateToMultiway=function(){var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;if(d&&a){r(function(a){return a.setEscalationInitiated()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};c.handleSwitchToMultiway=function(){__p&&__p();var a=b("RTCP2PCallStore").getState(),c=a.callType,d=a.offerEscalationSupport;a=a.escalationConferenceName;this.$6=!1;if(d&&a){r(function(a){return a.setReceivedEscalationRequest()});d=c!==b("RTCCallType").AUDIO_ONLY&&(b("RTCCallStore").hasRemoteVideo()||b("RTCCallStore").hasLocalVideo());c=new(b("RTCGroupCallEscalator"))(a,d,this.$1,this.$2);c.startEscalationToMultiway()}};c.$74=function(a,c){var d=b("gkx")("678353"),e=a&&d&&b("FBRTCSupport").isGroupCallWebtrcSupported();this.$13=e;this.$14=c;b("RTCP2PCallActions").setMultiwayEscalationSupport(e,c);r(function(a){a.setConferenceName(c),e&&a.setEscalationAvailable()})};c.$46=function(){__p&&__p();b("FBRTCUrlManager").onCallStarted(this.$1);if(this.$19){this.$6=!0;this.$7=!1;var a=this.$19.msg,c=a.sdp,d=a.attributes,e=a.offer_escalation_support;a=a.escalation_conference_name;b("RTCP2PCallActions").setRemoteSignalingExperiments(this.$19.getSignalingExperiments());this.$74(!!e,a);this.onReceivedRemoteSDP(c,"offer",d);b("RTWebExperiments").passOfferWithWindowMessages()||b("FBRTCLocalMessageQueue").clearPeerOfferFromStorage(this.$1);this.$32("local message queue updates",{action:"removeOffer",offer:this.$19,callID:this.$2});this.$19=null}this.$32("call: try",{initialOffer:this.$19})};c.$68=function(a){__p&&__p();var c=this;this.$6=!0;return this.$3.setLocalDescription(a).then(function(a){return a.toDesc()}).then(function(a){var b=a.sdp;a=a.type;a==="offer"&&(b=c.$3.transformOfferSdp(b));return{type:a,sdp:b}}).then(function(a){var d=a.sdp;a=a.type;switch(a){case"offer":b("RTCP2PCallStore").getState().signalingExperiments.support("sdp_update")&&b("RTCCallStore").getState().callInfo.conferenceState==="CONNECTED"?c.$75(d):c.$76(d);c.$16=!1;break;case"answer":c.$77(d);break;default:break}})["catch"](function(a){c.$61(new Error("Failed to set local description: unexpected SDP type"))})};c.$78=function(){return{streams:this.$79()}};c.$79=function(){__p&&__p();var a={},c=b("RTCCallStore").getState();c=c.localUser.screenStreams;for(var d=this.$3.getLocalStreams(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=c.includes(g)?b("FBRTCConstants").StreamType.SCREEN_CONTENT:g.getVideoTracks().length?b("FBRTCConstants").StreamType.AUDIO_VIDEO:b("FBRTCConstants").StreamType.AUDIO_ONLY;a[g.id]={type:h}}return a};c.$75=function(a){var c=b("RTCCallStore").getState();c=c.localUser;this.$10.sendSdpUpdate(this.$1,this.$2,a,!b("RTCP2PCallStore").isAudioOnly()&&!c.isVideoMuted(),this.$78())};c.$76=function(a){var c=this,d=this.$8?b("FBRTCConstants").PayloadType.PCRESTART_OFFER:b("FBRTCConstants").PayloadType.OFFER,e=b("RTCCallStore").getState();e=e.callSummary;e=e?e.getCallTrigger():"";this.$11=new(b("FBRTCRetriableMessage"))(this.$10);this.$11.addListener("sendingRetry",this.$69);this.$11.addListener("timeoutFailure",this.$71);this.$11.sendMessage(d,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$78(),callTrigger:e});this.$20=b("setTimeout")(function(){c.$36(h.NO_ANSWER_TIMEOUT,!1,!0,!1,"NoAnswerTimeout")},m)};c.$80=function(a){__p&&__p();if(!Object.prototype.hasOwnProperty.call(a,"videoon"))return;a=!a.videoon;b("RTCCallActions").toggleMuteRemoteVideo(a,this.$1);for(var a=this.$3.getRemoteStreams(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.getAudioTracks().length>0){this.$32("remote steam: mute toggled",e);return}}this.$25.update()};c.$77=function(a){this.$12=new(b("FBRTCRetriableMessage"))(this.$10);this.$12.addListener("sendingRetry",this.$69);var c={escalationConferenceName:this.$14,negotiatedEscalationSupport:this.$13};this.$12.sendMessage(b("FBRTCConstants").PayloadType.ANSWER,this.$1,this.$2,{sdp:a,hasVideo:!b("RTCP2PCallStore").isAudioOnly(),attributes:this.$78(),multiwayInfo:c})};c.processQueuedMessages=function(){var a=this;b("FBRTCLocalMessageQueue").drainQueue(this.$1,function(b){a.$44(b,{skipDupeCheck:!0})})};c.$44=function(a,c){__p&&__p();var d;try{d=new(b("FBRTCMessage"))(a)}catch(b){this.$5.logError(this.$1,this.$2,"Unknown data: "+JSON.stringify(a));return}this.$5.logReceivedMessage(d.peerID,d.callID,d.msg);this.$32("message received",d.msg);if(this.$81()){this.$70("RTCP2PProtocolHandler: Ignoring message (call ended): "+d.msgID);return}if(!(c==null?void 0:c.skipDupeCheck)&&!b("FBRTCMessageDedup").check(d.peerID,d.callID,d.msgID)){this.$70("RTCP2PProtocolHandler: Ignoring message (duplicate): "+d.msgID);return}if(b("RTCCallStore").getState().callInfo.conferenceState==="AWAITING_USER_START"){this.$70("RTCP2PProtocolHandler: Ignoring message (awaiting user start): "+d.msgID);return}if(this.$1&&this.$1!==d.peerID){d.isOffer()&&this.$82(d);this.$70("RTCP2PProtocolHandler: Ignoring message (different peer): "+d.msgID);return}if(!d.isForCall(this.$2,this.$14)){this.$70("RTCP2PProtocolHandler: Ignoring message (different call): "+d.msgID+"(callID: "+d.callID+")");return}this.$2&&this.$2===d.callID&&r(function(a){return a.onFullMessageReceived(d)});a=b("RTCGroupCallEscalationStore").getState().inProgress;switch(d.msgType){case b("FBRTCConstants").PayloadType.ICERESTART_OFFER:case b("FBRTCConstants").PayloadType.PCRESTART_OFFER:this.internalResetConnection();this.$83(d);break;case b("FBRTCConstants").PayloadType.OFFER:this.$83(d);break;case b("FBRTCConstants").PayloadType.ANSWER:case b("FBRTCConstants").PayloadType.ICERESTART_ANSWER:case b("FBRTCConstants").PayloadType.PCRESTART_ANSWER:b("RTCP2PCallActions").setRemoteSignalingExperiments(d.getSignalingExperiments());this.$84(d);break;case b("FBRTCConstants").PayloadType.SDP_UPDATE:this.$85(d);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$86(d);break;case b("FBRTCConstants").PayloadType.HANGUP:this.$87(d);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$88(d);break;case b("FBRTCConstants").PayloadType.OFFER_NACK:this.$23=!0;break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$89();break;case b("FBRTCConstants").PayloadType.MSG_ACK:this.$90(d);break;case b("FBRTCConstants").PayloadType.SET_VIDEO:this.$91(d);break;case b("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY:a||this.handleSwitchToMultiway();break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:case b("FBRTCConstants").PayloadType.ACK:case b("FBRTCConstants").PayloadType.OK:case b("FBRTCConstants").PayloadType.PING:case b("FBRTCConstants").PayloadType.PING_ACK:case b("FBRTCConstants").PayloadType.OTHER_DISMISS:case b("FBRTCConstants").PayloadType.PRANSWER:break;default:break}this.$29.parseMessage(d)};c.$45=function(a){switch(a.msg_type){case"bjn_escalating":var c=b("RTCP2PCallStore").getState().connectionStatus;b("RTCP2PCallActions").setConnectionStatus("ESCALATING_TO_BJN");b("setTimeout")(function(){b("RTCP2PCallActions").setConnectionStatus(c)},n);break;case"participants":b("RTCOneVCActions").storeParticipants(JSON.parse(a.payload).list);break;default:break}};c.$82=function(a){__p&&__p();var c=a.peerID,d=a.callID;this.$33("RTCP2PProtocolHanlder_collision_offer_from_another_peer");var e=a.msg,f=new(b("FBRTCCallSummary"))({peerID:c,callID:d,isCaller:!1});f.setActiveConnection("p2p");f.onFullMessageReceived(a);f.setCallType(b("FBRTCSdpUtils").isVideoSupported(e.sdp)?i.DIRECT_VIDEO:i.VOIP);this.$10.sendOfferAck(c,d,e);f.onOfferAckSent(e);a=new(b("RTCEndCallReason"))(h.IN_ANOTHER_CALL);this.$92(c,d,a,!1);f.onCallEnded(a.getReasonID(),!1);f.save(b("FBRTCCallSummaryStore").getInstance())};c.$83=function(a){__p&&__p();var c=a.msg;if(!b("RTWebExperiments").enableCallCollisionFix()){this.$2&&c.call_id!==this.$2&&this.$33("RTCP2PProtcolHandler_call_collision");var d=this.$3.getSignalingState();if(d!=="stable")return}if(c.calltype){this.$10.sendOfferNack(this.$1,c.call_id,c);return}this.$10.sendOfferAck(this.$1,c.call_id,c);this.$10.sendOtherDismiss(c.call_id);this.$93(c)?this.$94(a):this.$95(a)};c.resetCollisionSummary=function(a,c){var d=a.msg;r(function(a){a.onCallEnded(h.OTHER_INSTANCE_HANDLED,!1,!1,"call_collision"+(c?"_resetConnection":"_atStart"))});var e=new(b("FBRTCCallSummary"))({peerID:this.$1,callID:d.call_id,isCaller:!1});b("RTCCallActions").setCallSummary(e);r(function(c){c.setActiveConnection("p2p"),c.onFullMessageReceived(a),c.onOfferAckSent(d),c.setCallType(b("FBRTCSdpUtils").isVideoSupported(d.sdp)?i.DIRECT_VIDEO:i.VOIP),c.setCallTrigger("call_collision")})};c.handleCallCollision=function(a,c){this.$5.logEvent(this.$1,this.$2,"Handling offer collision");this.resetCollisionSummary(a,c);if(b("RTWebExperiments").enableCallCollisionFix()){this.$2=a.callID;a=a.msg;c?this.internalResetConnection():this.$10.sendOtherDismiss(a.call_id);b("RTCCallActions").callCollision(a.call_id.toString(),this.$1);this.$33("RTCP2PProtocolHandler_handling_call_collision"+(c?"_resetConnection":"_atStart"))}};c.$94=function(a){__p&&__p();var c=a.msg;this.$80(c);this.$96();this.$97();this.$98();if(this.$2!==c.call_id){c=new(b("RTCEndCallReason"))(h.OTHER_INSTANCE_HANDLED);this.$92(this.$1,this.$2,c,!1);this.handleCallCollision(a,!0)}else this.$5.logEvent(this.$1,this.$2,"Handling offer refresh");this.$16=!1;this.$19=a;b("RTCP2PCallActions").processMessage(a);this.$46();this.$32("offer accepted",a.msgID)};c.$95=function(a){this.$5.logEvent(this.$1,this.$2,"Ignoring offer"),this.$32("offer ignored",a.msgID)};c.$85=function(a){__p&&__p();var c=this,d=a.msg;b("RTCP2PCallActions").processMessage(a);this.$80(d);switch(this.$3.getSignalingState()){case"stable":this.onReceivedRemoteSDP(this.$99("offer",a),"offer",d.attributes);break;case"have-local-offer":this.onReceivedRemoteSDP(this.$99("answer",a),"answer",d.attributes).then(function(){return c.$100()})["catch"](function(a){c.$61(new Error("Failed to handle sdp update when signaling state is 'have-local-offer': "+a.message))});break;case"have-remote-offer":b("setTimeout")(function(){return c.$85(a)},1e3);break;case"have-local-pranswer":case"have-remote-pranswer":break;case"closed":break}this.$32("SDP update",[d.sdp,d.attributes])};c.$99=function(a,c){c=c.msg;var d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;var e=b("RTCP2PCallStore").isCaller();return a==="offer"?!d&&e&&b("UserAgent").isBrowser("Firefox")?b("FBRTCSdpUtils").setDtlsRole(c.sdp,this.$9):c.sdp:b("FBRTCSdpUtils").setDtlsRole(c.sdp,d&&!e?"passive":this.$9)};c.$100=function(){this.$6=!1};c.$65=function(){__p&&__p();var a=this.$3.getSenders().find(function(a){var b;return(a==null?void 0:(b=a.track)==null?void 0:b.kind)==="audio"&&typeof a.getParameters==="function"&&typeof a.setParameters==="function"});if(a==null)return;if(b("RTCSignalingExperiments").shouldCapAudioBitrate()){var c=b("FBRTCExperiment").getMediaQualityExperiments().getInt("max_audio_bitrate",0);if(c>0){var d=a.getParameters();d.encodings!=null?d.encodings[0].maxBitrate=c:d.encodings=[{maxBitrate:c}];b("Promise").resolve(a.setParameters(d))}else this.$5.logError(this.$1,this.$2,"received 0 for max audio bitrate")}};c.onReceivedRemoteSDP=function(a,c,d){__p&&__p();var e=this;this.$101(d);d=b("RTCP2PCallStore").getState();d=d.isPeerOnMobile;d&&(a=b("FBRTCSdpUtils").setVideoBitrateConstraint(a));c==="answer"&&(a=this.$3.transformAnswerSdp(a));return this.$3.setRemoteDescription(new(b("RTCSessionDescription"))(j.P2P,{type:c,sdp:a})).then(function(){e.$16=!0,e.$15.drainCandidates(e.$1,e.$2,function(a){return e.$3.onReceivedRemoteIceCandidate(a)})}).then(function(){e.$64();return c!=="offer"?void 0:e.$3.createAnswer({DISABLE_OPUS_STEREO:b("RTWebClientFeatureGating").disableOpusStereo(),ADD_AUDIO_NACK:b("RTCSignalingExperiments").shouldEnableAudioNack()}).then(function(a){e.$68(a),e.$32("SDP update",{answer:a.toSdp()})})}).then(function(){e.$37()===b("RTCCallType").AUDIO_ONLY&&e.$10.sendMuteStateUpdate(e.$1,e.$2,!1)})["catch"](function(a){e.$61(a);throw a})};c.$101=function(a){__p&&__p();if(a){var c=a.streams;this.$4=babelHelpers["extends"]({},this.$4,a,{streams:babelHelpers["extends"]({},this.$4.streams,c)});Object.keys(c).some(function(a){if(c[a].type===b("FBRTCConstants").StreamType.SCREEN_CONTENT){b("RTCCallActions").removeAllLocalScreenStreams(!0);return!0}return!1})}};c.$93=function(a){return a.call_id===this.$2?!0:Boolean((this.$20||!this.$19)&&(!this.$2||a.call_id!==this.$2)&&b("RTCP2PCallStore").isCaller()&&(!a.handlescollision||a.call_id<this.$2))};c.$84=function(a){__p&&__p();var c=this,d=this.$3.getSignalingState();if(d!=="have-local-offer")return;d=a.msg;this.$74(!!d.negotiated_escalation_support,d.escalation_conference_name);this.$96();this.$97();this.$10.sendAnswerAck(this.$1,this.$2,d);b("RTCP2PCallActions").processMessage(a);b("RTCP2PCallActions").setConnectionStatus("CONNECTING");this.onReceivedRemoteSDP(d.sdp,"answer",d.attributes).then(function(){c.$100(),b("RTCCallActions").callSuccess(!0)})["catch"](function(a){c.$61(new Error("Failed to handle answer on receiving remote SDP"))});this.$80(d)};c.$90=function(a){var b=a.msg;this.$11&&this.$11.isAckMsg(b)?(r(function(b){b.onMsgAckReceived(a,!0)}),this.$88(a)):this.$12&&this.$12.isAckMsg(b)&&(r(function(b){b.onMsgAckReceived(a,!1)}),this.$89())};c.$88=function(a){b("RTCP2PCallActions").setConnectionStatus("RINGING"),r(function(c){c.setUploadLogLevel(b("FBRTCLocalUploadLogLevel").getUploadLogLevel(b("FBRTCConstants").convertToUploadLogLevel(a.msg.ull)))}),this.$96()};c.$89=function(){this.$98(),this.$100(),b("RTCCallActions").incomingCallSuccess()};c.$91=function(a){this.$18?this.$73(a):(this.$70("RTCP2PProtocolHandler: P2P message "+a.msgType+" queued for delay handling"),this.$17.push(a))};c.$73=function(a){b("RTCP2PCallStore").getState().isRemoteVideoSupported&&!b("RTCP2PCallStore").isAudioOnly()&&this.$80(a.msg)};c.$86=function(a){var b=this,c=a.msg;c.call_id===this.$2&&this.$16?this.$3.onReceivedRemoteIceCandidate(c)["catch"](function(a){b.$102(c)}):this.$102(c)};c.$102=function(a){this.$15.cacheCandidate(this.$1,a.call_id,a)};c.$87=function(a){a=a.msg;var b=a.call_id,c=a.reason;a=a.subreason;b===this.$2?this.$36(c,!0,!1,!1,a):(this.$5.logError(this.$1,this.$2,"Receiving hangup for a different call: "+b.toString()),this.$32("hangup callID missmatch",b.toString()))};c.$36=function(a,c,d,e,f){__p&&__p();var g=this,i=new(b("RTCEndCallReason"))(a).setSubreason(f).setRemoteEnded(c);b("RTCCallActions").setEndCallReason(i);b("RTCCallNUXActions").refreshNUXState();a=b("RTCP2PCallEscalationStore").getState().inProgress;a&&b("RTCP2PCallEscalationActions").cancel();this.$96();this.$97();this.$98();if(this.$81()){this.$5.logError(this.$1,this.$2,"Ending an already-ended call");return}this.$5.logCallAction(this.$1,this.$2,b("FBRTCLogger").CallAction.END_CALL,i.toStrName());this.$32("call: ended",{reason:i.toStrName(),reasonID:i.getReasonID(),subReason:i.getSubreason(),isRemoteEnded:c,userCallType:this.$37(),isCaller:b("RTCP2PCallStore").isCaller()});this.$33("callSummary onCallEnded reason "+i.toStrName()+" subreason "+((f=i.getSubreason())!=null?f:""));d&&this.$92(this.$1,this.$2,i,e);this.$24.stop();this.$25.stop();this.$26.stop();this.$3&&this.$3.close();b("RTCCallActions").hangupSuccess();this.$30||b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").removeAllRemoteStreams(this.$1);b("RTCP2PCallActions").setConnectionStatus("DISCONNECTED");r(function(a){a.setCallType(b("RTCP2PCallEscalationStore").getState().callType),a.setVideoDurations(g.$24.getDuration(),g.$25.getDuration()),a.setScreenDuration(g.$26.getDuration()),a.onCallEnded(i.getReasonID(),c,null,i.getSubreason()),g.$33("logged end call to call summary")});a=b("RTCCallStore").getState();f=a.callSummary;this.$33("RTCCallStore call summary has end call reason: "+f.getEndCallReason());this.$33("Getting call summary with callID: "+this.$2+" and peerId "+this.$1);d=b("FBRTCCallSummaryStore").getInstance().retrieveCallSummary(this.$1,this.$2);d!=null?this.$33("CallSummaryStore has end call reason: "+d.getEndCallReason()):this.$33("Could not find call summary");i.getReasonID()===h.HANGUP_CALL&&i.getSubreason()==="CallReset"&&c&&(this.$33("window.close call window was remotely reset"),b("RTCP2PCallWindowHandler").close())};c.$37=function(){var a=b("RTCCallStore").getState();a=a.localUser;return a.isVideoMuted()&&a.isAudioMuted()?b("RTCCallType").NO_AUDIO_VIDEO:a.isVideoMuted()&&!a.isAudioMuted()?b("RTCCallType").AUDIO_ONLY:b("RTCCallType").AUDIO_VIDEO};c.shutDownP2PListenersForMultiwayEscalation=function(){__p&&__p();var a=this;this.$96();this.$97();this.$98();this.$24.stop();this.$25.stop();this.$3&&this.$3.removeAllListeners();b("setTimeout")(function(){b("RTCGroupCallEscalationStore").logToP2PCallSummary(function(c){c.setCallType(b("RTCP2PCallEscalationStore").getState().callType),c.setVideoDurations(a.$24.getDuration(),a.$25.getDuration()),c.setScreenDuration(a.$26.getDuration()),c.onCallEnded(h.HANGUP_CALL,!1,!1,"multiway escalation")}),b("RTCCallActions").completeTransitionToMultiway()},100);this.destroy()};c.$92=function(a,b,c,d){if(!this.$10)return;this.$10.sendHangup(a,b,c.getReasonID(),d,c.getSubreason());this.$10.sendOtherDismiss(b)};c.$96=function(){this.$11&&this.$11.stopRetrying()};c.$98=function(){this.$12&&this.$12.stopRetrying()};c.$97=function(){this.$20&&b("clearTimeout")(this.$20),this.$20=null};c.$81=function(){return b("RTCCallStore").getState().callInfo.conferenceState==="TERMINATED"};c.$60=function(a){__p&&__p();var c=this;p(function(d){__p&&__p();d=d.logConnectionStats(function(){var c=a.getSignalingState();return c!=="closed"?a.getStats():b("Promise").reject("peer connection closed")},c.$1,c.$2);var e=d.start,f=d.stop;d=function b(d){d=d.target;d=d.iceConnectionState;(d==="completed"||d==="connected")&&(c.$33("RTCP2PProtocolHandler_call_connected"),c.$32("call: connected"),e(),a.removeEventListener("iceconnectionstatechange",b),a.addEventListener("iceconnectionstatechange",g))};var g=function b(c){c=c.target;c=c.iceConnectionState;c==="closed"&&(f(),a.removeEventListener("iceconnectionstatechange",b))};a.addEventListener("iceconnectionstatechange",d)})};c.$32=function(a,b){var c=this;p(function(d){return d.log(a,{peerID:c.$1,callID:c.$2,eventDetails:b})})};c.destroy=function(){this.$28.clear(),b("FBRTCMessageListener").removeMessageHandler(),b("FBRTCConfig").isVCEndpointCall()&&b("FBRTCMessageListener").removeOneVCMessageHandler(),(this.$10.onMessageSent=null,this.$10.onSendFailure=null)};c.generateEscalationRequestToken=function(a){return this.$29.generateRequestToken(a)};c.generateEscalationResponseToken=function(a,b){return this.$29.generateResponseToken(a,b)};a.getDefaultVideoQuality=function(){return b("FBRTCConfig").isVCEndpointCall()||b("FBRTCConfig").useHDVideoQuality()?k.HD_VIDEO:b("CurrentUser").isWorkUser()?k.SD_VIDEO:k.LQ_VIDEO};a.showRedialButton=function(){var a=b("RTCP2PCallStore").getState();a=a.endCallReason;var c=b("RTCCallStore").getState();c=c.callSummary;return a!=null&&(a.getReasonID()===h.IGNORE_CALL||a.getReasonID()===h.NO_ANSWER_TIMEOUT)||c.getCallDuration()<=o};a.showStarRating=function(){if(b("RTWebClientFeatureGating").shouldAlwaysShowStarRating()){var c=b("RTCP2PCallStore").getState(),d=c.endCallReason;c=c.wasConnected;return c&&d!=null&&d.getReasonID()===h.HANGUP_CALL}else return!a.showRedialButton()};c.$70=function(a){this.$5.logInfo(this.$1,this.$2,a)};c.$33=function(a){b("RTWebUserActionLogger").logCheckpoint({checkpoint:a,callId:this.$2?this.$2.toString():null,callType:"p2p"})};return a}();function p(a){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],a,"RTCP2PProtocolHandler")}function q(a){a instanceof Object||g(0,444);return a}function r(a){var c=b("RTCCallStore").getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())}e.exports=d}),null);
__d("FBRTCMediaStatsReport",["FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){return}var c=a.prototype;c.parseStatString=function(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null};c.parseMediaStat=function(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null};c.getAccelerateRate=function(a){return null};c.getAudioBytesReceived=function(a){return null};c.getAudioBytesSent=function(a){return null};c.getAudioDecodingCNG=function(a){return null};c.getAudioDecodingNormal=function(a){return null};c.getAudioDecodingPLC=function(a){return null};c.getAudioDecodingPLCCNG=function(a){return null};c.getAudioJitter=function(a){return null};c.getAudioPacketsReceived=function(a){return null};c.getAudioPacketsReceivedLost=function(a){return null};c.getAudioPacketsSent=function(a){return null};c.getAudioPacketsSentLost=function(a){return null};c.getAudioReceivedRtt=function(a){return null};c.getAudioRecvKeys=function(){return[]};c.getAudioSendCodec=function(a){return null};c.getAudioSendKeys=function(){return[]};c.getAudioSendRtt=function(a){return null};c.getConnectionType=function(){return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};c.getDiscardRate=function(a){return null};c.getExpandRate=function(a){return null};c.getFramesDecoded=function(a){return null};c.getFramesEncoded=function(a){return null};c.getInboundQpSum=function(a){return null};c.getJitterBufferDelay=function(a){return null};c.getOutboundQpSum=function(a){return null};c.getPreemptiveExpandRate=function(a){return null};c.getVideoBweKeys=function(){return[]};c.getVideoBweRetransmitBitrate=function(a){return null};c.getVideoBweSendBandwidth=function(a){return null};c.getVideoBweTransmitBitrate=function(a){return null};c.getVideoBytesReceived=function(a){return null};c.getVideoBytesSent=function(a){return null};c.getVideoFrameHeightReceived=function(a){return null};c.getVideoFrameHeightSent=function(a){return null};c.getVideoFrameRateReceived=function(a){return null};c.getVideoFrameRateSent=function(a){return null};c.getVideoFrameWidthReceived=function(a){return null};c.getVideoFrameWidthSent=function(a){return null};c.getVideoPacketsReceived=function(a){return null};c.getVideoPacketsReceivedLost=function(a){return null};c.getVideoPacketsSent=function(a){return null};c.getVideoPacketsSentLost=function(a){return null};c.getVideoRecvCodec=function(a){return null};c.getVideoRecvCodecImplementationName=function(a){return null};c.getVideoRecvKeys=function(){return[]};c.getVideoSendCodec=function(a){return null};c.getVideoSendCodecImplementationName=function(a){return null};c.getVideoSendKeys=function(){return[]};c.getVideoSentRtt=function(a){return null};c.getVideoRecvCodecForConnection=function(){var a=this,b=null;this.getVideoRecvKeys().forEach(function(c){var d=a.getVideoRecvCodec(c);c=a.getVideoRecvCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getVideoSendCodecForConnection=function(){var a=this,b=null;this.getVideoSendKeys().forEach(function(c){var d=a.getVideoSendCodec(c);c=a.getVideoSendCodecImplementationName(c);d!=null&&d!==""&&c!=null&&c!==""&&(b=d+c)});return b};c.getAudioSendCodecForConnection=function(){var a=this,b=null;this.getAudioSendKeys().forEach(function(c){c=a.getAudioSendCodec(c);c!=null&&c!==""&&(b=c)});return b};return a}();e.exports=a}),null);
__d("FBRTCChromeMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$FBRTCChromeMediaStatsReport1={};c.$FBRTCChromeMediaStatsReport2={};c.$FBRTCChromeMediaStatsReport3={};c.$FBRTCChromeMediaStatsReport4={};c.$FBRTCChromeMediaStatsReport5={};c.$FBRTCChromeMediaStatsReport6=[];if(b)for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="ssrc"&&f.audioOutputLevel!=null&&f.audioOutputLevel!==""?c.$FBRTCChromeMediaStatsReport1[f.id]=f:f.type==="ssrc"&&f.audioInputLevel!=null&&f.audioInputLevel!==""?c.$FBRTCChromeMediaStatsReport2[f.id]=f:f.type==="ssrc"&&f.mediaType==="video"?f.bytesReceived!=null?c.$FBRTCChromeMediaStatsReport3[f.id]=f:c.$FBRTCChromeMediaStatsReport4[f.id]=f:f.type==="VideoBwe"?c.$FBRTCChromeMediaStatsReport5[f.id]=f:f.type==="googCandidatePair"&&f.googActiveConnection!==null&&f.googActiveConnection==="true"&&c.$FBRTCChromeMediaStatsReport6.push(f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport4)};d.getVideoBweKeys=function(){return Object.keys(this.$FBRTCChromeMediaStatsReport5)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"bytesSent")};d.getAudioDecodingPLC=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLC")};d.getAudioDecodingPLCCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingPLCCNG")};d.getAudioDecodingCNG=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingCNG")};d.getAudioDecodingNormal=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googDecodingNormal")};d.getAudioPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsLost")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"packetsSent")};d.getAudioSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport2[a],"googCodecName")};d.getAudioSendRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport2[a],"googRtt")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googRtt")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"bytesReceived")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"packetsLost")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"framesDecoded")};d.getInboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"qpSum")};d.getVideoFrameHeightReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameHeightReceived")};d.getVideoFrameRateReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameRateReceived")};d.getVideoFrameWidthReceived=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport3[a],"googFrameWidthReceived")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"bytesSent")};d.getVideoFrameHeightSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameHeightSent")};d.getVideoFrameRateSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameRateSent")};d.getVideoFrameWidthSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googFrameWidthSent")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsSent")};d.getVideoPacketsSentLost=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"packetsLost")};d.getVideoSentRtt=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"googRtt")};d.getOutboundQpSum=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport4[a],"qpSum")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googJitterReceived")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googCurrentDelayMs")};d.getAccelerateRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googAccelerateRate")};d.getPreemptiveExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googPreemptiveExpandRate")};d.getExpandRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googExpandRate")};d.getDiscardRate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport1[a],"googSecondaryDiscardedRate")};d.getVideoBweRetransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googRetransmitBitrate")};d.getVideoBweSendBandwidth=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googAvailableSendBandwidth")};d.getVideoBweTransmitBitrate=function(a){return this.parseMediaStat(this.$FBRTCChromeMediaStatsReport5[a],"googTransmitBitrate")};d.getVideoRecvCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"googCodecName")};d.getVideoRecvCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport3[a],"codecImplementationName")};d.getVideoSendCodec=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"googCodecName")};d.getVideoSendCodecImplementationName=function(a){return this.parseStatString(this.$FBRTCChromeMediaStatsReport4[a],"codecImplementationName")};d.getConnectionType=function(){var a=this,c=null;this.$FBRTCChromeMediaStatsReport6.some(function(d){c=b("FBRTCStatsHelpers").connectionType(a.parseStatString(d,"googLocalCandidateType"),a.parseStatString(d,"googTransportType"),a.parseStatString(d,"googRemoteCandidateType"),a.parseStatString(d,"googTransportType"));return c!==null});if(c!==null)return c;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("FBRTCMediaStatsReport"));e.exports=a}),null);
__d("FBRTCMozMediaStatsReport",["FBRTCMediaStatsReport","FBRTCStatsHelpers","isFalsey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){__p&&__p();var c;c=a.call(this,b)||this;c.$FBRTCMozMediaStatsReport1={};c.$FBRTCMozMediaStatsReport2={};c.$FBRTCMozMediaStatsReport3={};c.$FBRTCMozMediaStatsReport4={};c.$FBRTCMozMediaStatsReport5={};c.$FBRTCMozMediaStatsReport6={};for(var b=b.values(),d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.type==="inbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport1[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="audio"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport2[f.id]=f:f.type==="inbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport3[f.id]=f:f.type==="outbound-rtp"&&f.mediaType==="video"&&f.isRemote===!1?c.$FBRTCMozMediaStatsReport4[f.id]=f:f.type==="candidate-pair"&&f.state==="succeeded"?c.$FBRTCMozMediaStatsReport6[f.id]=f:(f.type==="local-candidate"||f.type==="remote-candidate")&&(c.$FBRTCMozMediaStatsReport5[f.id]=f)}return c}var d=c.prototype;d.getAudioSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport2)};d.getAudioRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport1)};d.getVideoRecvKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport3)};d.getVideoSendKeys=function(){return Object.keys(this.$FBRTCMozMediaStatsReport4)};d.getAudioBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"bytesSent")};d.getAudioPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport2[a],"packetsSent")};d.getAudioBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"bytesReceived")};d.getAudioPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsReceived")};d.getAudioPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"packetsLost")};d.getAudioReceivedRtt=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"roundTripTime")};d.getFramesDecoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framesDecoded")};d.getFramesEncoded=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framesEncoded")};d.getVideoBytesReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"bytesReceived")};d.getVideoFrameRateReceived=function(a){var c=this.getFramesDecoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"framerateMean")};d.getVideoPacketsReceived=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsReceived")};d.getVideoPacketsReceivedLost=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport3[a],"packetsLost")};d.getVideoBytesSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"bytesSent")};d.getVideoFrameRateSent=function(a){var c=this.getFramesEncoded(a);return b("isFalsey")(c)?null:this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"framerateMean")};d.getVideoPacketsSent=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport4[a],"packetsSent")};d.getAudioJitter=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"jitter")};d.getJitterBufferDelay=function(a){return this.parseMediaStat(this.$FBRTCMozMediaStatsReport1[a],"mozJitterBufferDelay")};d.getConnectionType=function(){__p&&__p();var a=this,c=null;Object.keys(this.$FBRTCMozMediaStatsReport6).forEach(function(d){d=a.$FBRTCMozMediaStatsReport6[d];var e=a.parseStatString(d,"localCandidateId");d=a.parseStatString(d,"remoteCandidateId");e!==void 0&&e!==null&&d!==void 0&&d!==null&&(c=b("FBRTCStatsHelpers").connectionType(a.parseStatString(a.$FBRTCMozMediaStatsReport5[e],"candidateType"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[e],"transport"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[d],"candidateType"),a.parseStatString(a.$FBRTCMozMediaStatsReport5[d],"transport")));return c!==null});if(c!==null)return c;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};return c}(b("FBRTCMediaStatsReport"));e.exports=a}),null);
__d("FBRTCMediaMetricParser",["FBRTCChromeMediaStatsReport","FBRTCConstants","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMozMediaStatsReport","FBRTCNetworkQualityMonitor","FBRTCSupport","RTCCallStore","RTCWebMediaStreamsTypedLogger","RTWebClientFeatureGating","UserAgent","gkx","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol,h=5e3;function i(){if(b("gkx")("678354")){var a=b("RTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?"mw":"p2p")}return null}function j(a,c){a.getVideoSendKeys().forEach(function(d){var e=a.getOutboundQpSum(d),f=a.getFramesEncoded(d),g=a.getVideoBytesSent(d),h=a.getVideoPacketsSent(d),j=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").OUTBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_ENCODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT,h);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST,j);var k=i();k&&k.setIsLocal(!0).setStreamType("video").setStreamID(d).setFrames(f).setQpSum(e).setBytes(g).setPackets(h).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function k(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=i();f&&f.setIsLocal(!0).setStreamType("video").setStreamID(d).setBytes(e).log()})}function l(a,c){a.getVideoRecvKeys().forEach(function(d){var e=a.getInboundQpSum(d),f=a.getFramesDecoded(d),g=a.getVideoBytesReceived(d),h=a.getVideoPacketsReceived(d),j=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").INBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_DECODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED,h);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST,j);var k=i();k&&k.setIsLocal(!1).setStreamType("video").setStreamID(d).setBytes(g).setFrames(f).setQpSum(e).setPackets(h).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function m(a,c){a.getAudioSendKeys().forEach(function(d){var e=a.getAudioBytesSent(d),f=a.getAudioPacketsSent(d),g=a.getAudioPacketsSentLost(d),h=a.getAudioSendRtt(d);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT,h);var j=i();j&&j.setIsLocal(!0).setStreamType("audio").setStreamID(d).setPackets(f).setBytes(e).setRtt(h).setPacketsLost(g).log()})}function n(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e=a.getJitterBufferDelay(d),f=a.getAudioJitter(d),g=a.getAccelerateRate(d),h=a.getExpandRate(d),j=a.getPreemptiveExpandRate(d),k=a.getDiscardRate(d),l=a.getAudioBytesReceived(d),m=a.getAudioPacketsReceived(d),n=a.getAudioPacketsReceivedLost(d),o=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").JITTER,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").ACCELERATE_RATE,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DISCARD_RATE,k);c.addMetricStat(d,b("FBRTCMediaMetricsConst").EXPAND_RATE,h);c.addMetricStat(d,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE,j);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED,l);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,m);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,n);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED,o);g=i();g&&g.setIsLocal(!1).setStreamType("audio").setStreamID(d).setJitter(f).setJitterBufferDelay(e).setBytes(l).setPackets(m).setRtt(o).setPacketsLost(n).log()})}var o={lastProcessedTime:0,parseStats:function(a,c){__p&&__p();a=a.getStats();if(b("qex")._("885213")){var d,e=Date.now();b("qex")._("885214")&&(a=a.then(function(a){JSON.stringify(a);return a}));d=(d=b("qex")._("885215"))!=null?d:h;if(h-(e-o.lastProcessedTime)>d/2)return;o.lastProcessedTime=e}a.then(function(a){var d=null;b("FBRTCSupport").isChromiumBased()?d=new(b("FBRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("FBRTCMozMediaStatsReport"))(a));d&&o.parseStatsWithReport(d,c)})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},parseStatsWithReport:function(a,b){__p&&__p();var c=b.getMediaMetricTracker();n(a,c);m(a,c);l(a,c);j(a,c);k(a,c);b.setConnectionType(a.getConnectionType());c=a.getVideoRecvCodecForConnection();c!=null&&c!==""&&b.setVideoReceivedCodec(c);c=a.getVideoSendCodecForConnection();c!=null&&c!==""&&b.setVideoSentCodec(c);c=a.getAudioSendCodecForConnection();c!=null&&c!==""&&b.setAudioSentCodec(c)},startCollectingMediaStats:function(){__p&&__p();var a=null;(b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()||b("RTWebClientFeatureGating").shouldMonitorNetworkQuality())&&(a=new(b("FBRTCNetworkQualityMonitor"))());var c=function c(){var d=b("RTCCallStore").getState().callInfo.conferenceState,e=b("RTCCallStore").getState().callSummary,f=b("RTCCallStore").getState().connections.first();if(d!=="TERMINATED"){f&&(o.parseStats(f,e),a!=null&&a.determineQuality(e.getMediaMetricTracker()));if(b("qex")._("885213")){f=(d=b("qex")._("885215"))!=null?d:h;window.setTimeout(c,f)}else window.setTimeout(c,h)}};c()}};e.exports=o}),null);
__d("FBRTCNetworkQualityMonitor",["FBRTCExperiment","FBRTCMediaMetricsConst","RTCP2PCallActions","RTWebClientFeatureGating","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=2;a=function(){__p&&__p();function a(){this.$3=0;var a=b("FBRTCExperiment").getMediaQualityExperiments();this.$1=a.getInt("rtt_threshold",Number.POSITIVE_INFINITY);this.$2=parseFloat(a.getParam("packet_loss_rate_threshold",String(Number.POSITIVE_INFINITY)));b("RTWebUserActionLogger").logEvent({eventName:"checkpoint",checkpoint:"FBRTCNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}var c=a.prototype;c.$4=function(a,b,c){a=a.getMetricStats(b,c);return a!=null?a.current>this.$1:!1};c.$5=function(a,b){a=a/(a+b);return a>=this.$2};c.$6=function(a,b,c,d){c=a.getMetricStats(b,c);a=a.getMetricStats(b,d);return c!=null&&a!=null?this.$5(c.current,a.current):!1};c.$7=function(a,b,c){var d=this,e=c.packetLostKey,f=c.packetsKey,g=c.rttKey;c=b.some(function(b){var c=d.$6(a,b,e,f);return c||d.$4(a,b,g)});return c};c.getCount=function(){return this.$3};c.determineQuality=function(a){var c=this.$3,d=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,packetsKey:b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT,rttKey:b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT});a=this.$7(a,a.getAudioStreamReportKeys(),{packetLostKey:b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,packetsKey:b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,rttKey:b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED});d||a?this.$3<g&&this.$3++:this.$3>0&&this.$3--;c!==this.$3&&this.$3>=g?(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"poor_network_quality_exceeded_threshold_"+this.$3}),b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("RTCP2PCallActions").togglePoorNetworkQualityIndicator(!0)):c>0&&this.$3<=0&&(b("RTWebUserActionLogger").logCheckpoint({checkpoint:"network_quality_recovered_from_"+c}),b("RTWebClientFeatureGating").shouldShowNetworkQualityIndicator()&&b("RTCP2PCallActions").togglePoorNetworkQualityIndicator(!1))};return a}();e.exports=a}),null);
__d("RTCUIAddParticipantIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsxs("g",{transform:"translate(11 16)",children:[b("React").jsx("path",{d:"M13.21 1.644c-1.023.763-.748 1.669-.656 3.21-.421 0-.37.31-.29.709.073.364.11.838.283.838a.123.123 0 0 0 .053-.013c.604 2.518 1.073.438.712 2.73l-.292.067c-.038.136-.09.617-.293.94C8.281 12 8.24 11.397 7.8 16H24c-.441-4.603-.46-4-4.905-5.875-.203-.323-.255-.804-.293-.94l-.292-.066c-.362-2.293.082-.213.685-2.731a.12.12 0 0 0 .053.013c.174 0 .21-.474.283-.838.08-.398.146-.71-.276-.71.09-1.54.371-2.438-.595-3.209-.763-1.14-2.693-1.05-2.76-1.05 0 0-1.374.067-2.69 1.05z",fillRule:"evenodd"}),b("React").jsx("path",{d:"M5.738 4.407V0H4.463v4.407H0v1.26h4.463v4.407h1.275V5.667H10.2v-1.26z",fillRule:"evenodd"})]})})}))};e.exports=a}),null);
__d("RTCCallControlsAddGroupMembersButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCallNUXActions","RTCGroupCallDialogController","RTCUIAddParticipantIcon.react","RTWebUserActionLogger","XUIAmbientNUX.react","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c;this.props.thread?c=h._("Agregar miembros al grupo"):this.props.isP2P?c=h._("Agregar m\u00e1s personas"):c=h._("Ver participantes de la llamada");return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")("semiopaque icon-48",this.props.className),"data-testid":"addGroupMembersButton",disabled:this.props.disabled,onClick:function(){return a.$2()},ref:function(b){return a.$1=b},title:c,children:b("React").jsx(b("RTCUIAddParticipantIcon.react"),{})}),b("React").jsx(j,{contextRef:function(){return a.$1},shown:this.props.showNux})]})};d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"add_participant",conferenceState:this.props.conferenceState,surface:"call_controls"}),this.$3()};d.componentDidUpdate=function(){this.$3()};d.$2=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"add_participant",conferenceState:this.props.conferenceState,surface:"call_controls"}),this.props.showNux&&i(),this.$4()};d.$4=function(){var a=this.props,c=a.localUser,d=a.participants,e=a.remoteUsers;a=a.thread;b("RTCGroupCallDialogController").showAddGroupMembersDialog(d.filter(function(a){a=a.fbid;return a!==c.FBID}),b("immutable").Map(e.map(function(a){return[a.FBID,a.participantState]})),a,c.FBID,this.props.isP2P)};d.$3=function(){this.props.showNux&&b("RTCCallNUXActions").markNUXViewed(5609)};return c}(b("React").PureComponent);a.defaultProps={showNux:!1};function i(){b("RTCCallNUXActions").dismissNUX(5609)}var j=function(a){return b("React").jsx(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",offsetX:21,onCloseButtonClick:i,position:"above",width:"auto"},a,{children:h._("Agrega una persona a tu chat")}))};e.exports=a}),null);
__d("RTCUIScreenIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){var c=a.variant;a=babelHelpers.objectWithoutPropertiesLoose(a,["variant"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsx(g,{variant:c})})}))};var g=function(a){a=a.variant;switch(a){case"strike-through":return b("React").jsx("path",{d:"M18.475 17H12v14h14.887l-.6-1H13V18h6.076l-.6-1zm3.5 0H36v14h-5.613l-.6-1H35V18H22.576l-.6-1zm5.513 15H19v1h9.09l-.602-1zm-7.81-13H14v10h11.685l-6.008-10zm3.5 0H34v10h-4.815l-6.008-10zm7.183 16.087l.86-.515L18.858 14l-.858.515 12.36 20.572z"});case"x":return b("React").jsx("path",{d:"M24.706 18l3.182 3.183a.5.5 0 0 1-.707.707L24 18.708l-3.182 3.182a.5.5 0 0 1-.707-.707L23.292 18l-3.182-3.182a.5.5 0 0 1 .707-.707L24 17.294l3.182-3.182a.5.5 0 0 1 .707.707zM28.999 17v1h6v12h-22V18h6v-1h-7v14h24V17h-7zm-10 15h10v1h-10z"});case"normal":default:return b("React").jsx("path",{d:"M12 17v14h24V17H12zm23 13H13V18h22v12zm-16.001 2h10v1h-10zm-4.986-13.005h20.018v10.009H14.013z"})}};e.exports=a}),null);
__d("RTCCallControlsScreenSharingButton.react",["cx","React","RTCCallControlsButton.react","RTCUIScreenIcon.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.className,d=a.disabled;d=d===void 0?!1:d;var e=a.sharing;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","disabled","sharing"]);var f=d?"strike-through":e?"x":"normal";return b("React").jsx(b("RTCCallControlsButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"semiopaque icon-48"),"data-testid":"shareScreenButton",disabled:d,highlighted:e},a,{children:b("React").jsx(b("RTCUIScreenIcon.react"),{variant:f})}))}e.exports=a}),null);
__d("RTCDialog.react",["fbt","LayerFadeOnHide","LayerTabIsolation","React","XUIDialog.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c,d=a.children,e=a.label;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","label"]);return b("React").jsx(b("XUIDialog.react"),babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerTabIsolation:b("LayerTabIsolation")},hideOnEscape:!0,label:(c=e)!=null?c:g._("Comunicaci\u00f3n en tiempo real {child_label}",[g._param("child_label",e)]),shown:!0},a,{children:d}))};e.exports=a}),null);
__d("RTCDialogList.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("ul",{children:this.props.children})};return c}(b("React").Component);e.exports=a}),null);
__d("RTCDialogListItem.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_4gtz",this.props.className);return b("React").jsx("li",babelHelpers["extends"]({onClick:this.props.onClick},{className:a},{children:this.props.children}))};return c}(b("React").Component);e.exports=a}),null);
__d("RTCCallControlsScreenSharingDialog.react",["cx","fbt","React","RTCDialog.react","RTCDialogList.react","RTCDialogListItem.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var c=a.cancelLabel,d=a.dialogWidth;d=d===void 0?350:d;var e=a.onDialogHide,f=a.onDialogToggle,g=a.onStopScreenSharingClick,i=a.onUpdateScreenSharingClick,j=a.shareDifferentWindowLabel;a=a.stopScreenSharingLabel;j=j||h._("Compartir otra ventana");a=a||h._("Dejar de compartir pantalla");c=c||h._("Cancelar");return b("React").jsx(b("RTCDialog.react"),{className:"_1z6a",label:"Screen sharing call controls",onToggle:f,width:d,children:b("React").jsxs(b("RTCDialogList.react"),{children:[b("React").jsx(b("RTCDialogListItem.react"),{onClick:i,children:j}),b("React").jsx(b("RTCDialogListItem.react"),{className:"_1z6b",onClick:g,children:a}),b("React").jsx(b("RTCDialogListItem.react"),{onClick:e,children:c})]})})}e.exports=a}),null);
__d("RTWebCollabClientFeatureGating",["FBRTCConfig","gkx"],(function(a,b,c,d,e,f){"use strict";a={showPreCallSetup:function(a){var c=b("FBRTCConfig").getMeetingID()!=null;return!a&&!c?!1:b("FBRTCConfig").isVCEndpointCall()},showPushToTalk:function(){return b("FBRTCConfig").isVCEndpointCall()||b("gkx")("816089")},showParticipantsRoster:function(){var a=b("FBRTCConfig").getMeetingID()!=null;return!a?!1:b("gkx")("721113")},showTheNewEndCallSurvey:function(){return!b("FBRTCConfig").isVCEndpointCall()?!1:b("gkx")("771085")}};e.exports=a}),null);
__d("RTCHotKeysConfig",["fbt","FBRTCConfig","RTWebCollabClientFeatureGating","keyMirror","objectValues"],(function(a,b,c,d,e,f,g){"use strict";var h=b("keyMirror")({CAMERA_CONTROL:null,END_CALL:null,FULL_SCREEN:null,PUSH_TO_TALK:null,SCREEN_SHARE:null,SETTINGS:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_VIDEO:null}),i=(a={},a[h.CAMERA_CONTROL]={altKey:!0,key:"c",label:g._("Control de la c\u00e1mara")},a[h.END_CALL]={altKey:!0,key:"e",label:g._("Finalizar llamada")},a[h.FULL_SCREEN]={altKey:!0,key:"f",label:g._("Pantalla completa")},a[h.PUSH_TO_TALK]={altKey:!1,key:"m",label:g._("Presionar para hablar")},a[h.SCREEN_SHARE]={altKey:!0,key:"s",label:g._("Compartir pantalla")},a[h.SETTINGS]={altKey:!0,key:"p",label:g._("Configuraci\u00f3n")},a[h.TOGGLE_MUTE_AUDIO]={altKey:!0,key:"m",label:g._("Silenciar o activar sonido")},a[h.TOGGLE_VIDEO]={altKey:!0,key:"v",label:g._("Activar o desactivar video")},a);c=function(){var a=i;b("FBRTCConfig").isVCEndpointCall()||delete a[h.CAMERA_CONTROL];b("RTWebCollabClientFeatureGating").showPushToTalk()||delete a[h.PUSH_TO_TALK];return b("objectValues")(a)};e.exports={RTCHotKey:h,config:i,getSupportedHotKeys:c}}),null);
__d("RTCHotKeys",["KeyEventController","RTCHotKeysConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("RTCHotKeysConfig").config;a=function(){"use strict";__p&&__p();function a(){this.$1=[]}var c=a.prototype;c.register=function(a,c,d){var e=this,f={key:a,keyHandler:b("KeyEventController").registerKey(g[a].key,c,d!==void 0?d:function(b){return b.type==="keyup"?!1:b.altKey===g[a].altKey})};this.$1.push(f);return{remove:function(){return e.$2(f)}}};c.unregister=function(a){var b=this.$1.find(function(b){return b.key===a});b&&this.$2(b)};c.$2=function(a){a.keyHandler.remove(),this.$1.splice(this.$1.indexOf(a),1)};return a}();e.exports=new a()}),null);
__d("RTCInstallExtensionDialog.react",["fbt","Bootloader","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","React","RTCCallStore","RTCChromeScreenSharingExtension","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogHeaderReact.re").make,i=b("MessengerDialogTitleReact.re").make;a=b("React").PureComponent;var j=b("RTCChromeScreenSharingExtension").useWorkplaceExtension;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){d.props.onToggle(!1)},d.$3=function(){d.$1("screen sharing: user clicked on install link"),b("promiseDone")(d.props.onInstall(),function(){return d.$2()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1("screen sharing: extension install dialog")};d.render=function(){var a=g._("Agrega la extensi\u00f3n para compartir pantalla de Facebook"),c=g._("Agrega la extensi\u00f3n para compartir tu pantalla de Facebook durante las videollamadas en Messenger, Facebook y Workplace. Tambi\u00e9n podr\u00e1s compartirla durante los videos en vivo de Facebook. La extensi\u00f3n no guardar\u00e1 im\u00e1genes de tu pantalla durante la llamada ni compartir\u00e1 tus datos con otras apps o sitios web.");j()&&(a=g._("Agrega la extensi\u00f3n para compartir pantalla de Workplace"),c=g._("Agrega la extensi\u00f3n para compartir tu pantalla de Workplace durante las videollamadas en Workplace y Workplace Chat. Tambi\u00e9n podr\u00e1s compartirla durante los videos en vivo de Workplace. La extensi\u00f3n no guardar\u00e1 im\u00e1genes de tu pantalla durante las llamadas ni compartir\u00e1 tus datos con otras apps o sitios web."));return b("React").jsxs(b("MessengerDialog.react"),{layerHideOnBlur:!1,onToggle:this.props.onToggle,width:544,children:[b("React").jsx(h,{children:b("React").jsx(i,{children:a})}),b("React").jsx(b("MessengerDialogBody.react"),{"data-testid":"install_extension_dialog",children:b("React").jsx("div",{children:c})}),b("React").jsxs(b("MessengerDialogFooter.react"),{children:[b("React").jsx(b("MessengerDialogCancelButton.react"),{onClick:this.$2}),b("React").jsx(b("MessengerDialogButton.react"),{action:"confirm",label:g._("Agrega la extensi\u00f3n"),onClick:this.$3,type:"primary",use:"default"})]})]})};d.$1=function(a){b("Bootloader").loadModules(["CollabMessengerLogger"],function(c){var d=b("RTCCallStore").getState(),e=d.remoteUsers;d=d.callInfo;c.log(a,{peerID:e.first().FBID,callID:d.conferenceName})},"RTCInstallExtensionDialog.react")};return c}(a);e.exports=c}),null);
__d("RTCDialogBody.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className"]);return b("React").jsx("div",babelHelpers["extends"]({className:b("joinClasses")(d,"_zbh")},a,{children:c}))};e.exports=a}),null);
__d("RTCDialogHeader.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className"]);return b("React").jsx("header",babelHelpers["extends"]({className:b("joinClasses")(d,"_7xt")},a,{children:c}))};e.exports=a}),null);
__d("RTCDialogHeaderButton.react",["cx","AbstractButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["className"]);return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"_4py8"),type:"button"},a))};e.exports=a}),null);
__d("RTCUnsupportedBrowserDialog.react",["cx","fbt","ix","FBRTCVersionDetection","Image.react","Layout.react","Link.react","React","RTCDialog.react","RTCDialogBody.react","RTCDialogHeader.react","RTCDialogHeaderButton.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Layout.react").Column;a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){c.props.onToggle(!1)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return b("React").jsxs(b("RTCDialog.react"),{label:"Screen sharing update browser",layerHideOnBlur:!1,onToggle:this.props.onToggle,width:640,children:[this.$1(),this.$2()]})};d.$1=function(){var a=null;b("FBRTCVersionDetection").isChrome()?a=h._("Actualiza el navegador para compartir tu pantalla"):a=h._("Cambia de navegador para compartir la pantalla");return b("React").jsxs(b("RTCDialogHeader.react"),{children:[b("React").jsx("h1",{className:"_10mm",children:a}),b("React").jsx(b("RTCDialogHeaderButton.react"),{label:h._("Cancelar"),onClick:this.$3})]})};d.$2=function(){var a=b("FBRTCVersionDetection").isChrome()?this.$4():this.$5();return b("React").jsx(b("RTCDialogBody.react"),{children:b("React").jsxs("div",{children:[b("React").jsx("p",{className:"_2gx8",children:a}),this.$6()]})})};d.$4=function(){return h._("El uso compartido de la pantalla no funciona en la versi\u00f3n anterior de Google Chrome que est\u00e1s usando. Para compartir la pantalla, actualiza Google Chrome")};d.$5=function(){if(b("FBRTCVersionDetection").isFirefox())return h._("El uso compartido de la pantalla a\u00fan no funciona en Mozilla Firefox. Para compartir la pantalla, abre Facebook en Google Chrome.");else return h._("El uso compartido de la pantalla a\u00fan no funciona en tu navegador. Para compartir la pantalla, abre Facebook en Google Chrome.")};d.$6=function(){return b("React").jsx(b("Layout.react"),{children:b("React").jsx(j,{style:{width:"100%",textAlign:"center"},children:b("React").jsxs(b("Link.react"),{href:"https://www.google.com/chrome/index.html",target:"_blank",children:[b("React").jsx(b("Image.react"),{alt:"Chrome",className:"_4_if",src:i("28180"),width:"64"}),b("React").jsx(b("XUIText.react"),{display:"block",children:"Google Chrome"})]})})})};return c}(a);e.exports=c}),null);
__d("RTCCallControlsToggleScreenSharingButton.react",["fbt","Promise","CollabRTCChromeScreenSharingExtension","React","RTCCallControlsScreenSharingButton.react","RTCCallControlsScreenSharingDialog.react","RTCChromeScreenSharingUtils","RTCConfig","RTCHotKeys","RTCHotKeysConfig","RTCInstallExtensionDialog.react","RTCScreenSharing","RTCUnsupportedBrowserDialog.react","RTCUtils","RTWebUserActionLogger","UserAgent","WorkplaceChatHelper","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=b("RTCChromeScreenSharingUtils").getMediaRequestSourceAppId,i=b("RTCHotKeysConfig").RTCHotKey;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){__p&&__p();b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!d.props.isP2P),component:"screensharing",conferenceState:d.props.conferenceState,surface:"call_controls"});d.props.onClick!=null&&d.props.onClick();if(!b("RTCUtils").isScreenSharingSupported()){d.$3(b("React").jsx(b("RTCUnsupportedBrowserDialog.react"),{onToggle:function(){return d.$4()}}));return}if(d.props.stream!=null){d.$3(b("React").jsx(b("RTCCallControlsScreenSharingDialog.react"),{onDialogHide:function(){d.$4(),d.props.onDialogDismiss!=null&&d.props.onDialogDismiss()},onDialogToggle:d.$4,onStopScreenSharingClick:d.$5,onUpdateScreenSharingClick:d.$6}));d.props.onDialogShow!=null&&d.props.onDialogShow();return}d.$7()},d.$8=function(){d.$4();return d.props.onExtensionInstallStart().then(function(){d.props.onExtensionInstallComplete&&d.props.onExtensionInstallComplete(null),window.focus(),d.$7()})["catch"](function(a){d.props.onExtensionInstallComplete&&d.props.onExtensionInstallComplete(a),window.focus()})},d.$5=function(){var a=d.props.stream;if(a==null)return;d.$4();d.props.onShareStop!=null&&d.props.onShareStop(a);b("RTCScreenSharing").stop()},d.$6=function(){d.$4();var a=d.props.stream;if(a==null)return;d.props.onShareUpdateAttempt!=null&&d.props.onShareUpdateAttempt();d.$9().then(function(b){return d.props.onShareStreamUpdate(a,b)})["catch"](d.$10)},d.$10=function(a){d.$4();var c=a.message;switch(c){case b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND:d.$3(b("React").jsx(b("RTCInstallExtensionDialog.react"),{onInstall:d.$8,onToggle:d.$4}));break;case b("CollabRTCChromeScreenSharingExtension").DIALOG_USER_CANCEL:break;case b("RTCScreenSharing").SCREEN_SHARING_NOT_SUPPORTED:d.$3(b("React").jsx(b("RTCUnsupportedBrowserDialog.react"),{onToggle:d.$4}));break}d.props.onShareError!=null&&d.props.onShareError(a)},d.$4=function(){var a=babelHelpers.assertThisInitialized(d);a=a.context;a!=null&&typeof a.dialogHide==="function"&&a.dialogHide()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"screensharing",conferenceState:this.props.conferenceState,surface:"call_controls"}),this.$1=b("RTCHotKeys").register(i.SCREEN_SHARE,this.props.onClick?this.props.onClick:this.$2)};d.render=function(){var a=this.props.stream;return b("React").jsx(b("RTCCallControlsScreenSharingButton.react"),{disabled:this.props.disabled,onClick:this.$2,sharing:a!=null,title:a!=null?g._("Opciones para compartir pantalla"):g._("Compartir pantalla")})};d.$7=function(){this.props.onShareStartAttempt!=null&&this.props.onShareStartAttempt(),this.$4(),this.$9()["catch"](this.$10)};d.$9=function(){var a=this;return b("UserAgent").isBrowser("Chrome")&&!b("WorkplaceChatHelper").isDesktopChatApp()&&!b("CollabRTCChromeScreenSharingExtension").isInstalled()?b("Promise").reject(new Error(b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND)):b("RTCUtils").getUserScreenMedia({audio:!1,video:babelHelpers["extends"]({},b("RTCConfig").CollaborationCallQuality.screen_v2||b("RTCConfig").CollaborationCallQuality.screen,{mediaSource:"screen"})},h()).then(function(c){b("promiseDone")(j(c),a.$5);a.props.onShareStarted(c);return c})};d.$3=function(a){var b=this.context;b!=null&&typeof b.dialogShow==="function"&&b.dialogShow(a)};d.componentWillUnmount=function(){this.$4(),this.$1&&this.$1.remove()};return c}(b("React").PureComponent);c.defaultProps={disabled:!1};c.contextTypes={dialogHide:a.func,dialogShow:a.func};function j(a){return b("Promise").all(a.getVideoTracks().map(function(a){return new(b("Promise"))(function(b){return a.addEventListener("ended",b)})}))}e.exports=c}),null);
__d("RTCCallControlsToggleScreenSharingWithFunnelButton.react",["Promise","CollabRTCChromeScreenSharingExtension","FBRTCConfig","FBRTCConstants","FunnelLogger","React","RTCCallControlsToggleScreenSharingButton.react","RTCCallStore","RTCScreenSharing","UserAgentData","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol,h="WEB_RTC_SCREEN_SHARING_FUNNEL",i=Object.freeze({START_IN_P2P:"p2p_call",START_IN_MW:"mw_call",START_IN_VC:"vc_call",BUTTON_DISABLED:"button_disabled",BUTTON_ENABLED:"button_enabled",BUTTON_MOUNTED:"button_mounted",BUTTON_CLICK:"button_click",DIALOG_SHOW:"dialog_show",DIALOG_CANCEL:"dialog_cancel",START_SHARING:"start_sharing",UPDATE_SHARING:"update_sharing",STOP_SHARING:"stop_sharing",STREAM_ENDED:"stream_ended",SCREEN_SUCCEEDED:"screen_succeeded",SCREEN_FAILED:"screen_failed",FAILED_REASON_NO_EXTENSION:"no_extension",FAILED_REASON_NOT_SUPPORTED:"not_supported",FAILED_REASON_NO_PERMISSION:"no_permission",FAILED_REASON_OTHER:"other_reason",EXTENSION_INSTALL_START:"extension_install_start",EXTENSION_INSTALL_SUCCEED:"extension_install_succeed",EXTENSION_INSTALL_FAIL:"extension_install_fail"});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){k(i.BUTTON_CLICK),d.props.onClick!=null&&d.props.onClick()},d.$2=function(){k(i.DIALOG_CANCEL),d.props.onDialogDismiss!=null&&d.props.onDialogDismiss()},d.$3=function(){k(i.DIALOG_SHOW),d.props.onDialogShow!=null&&d.props.onDialogShow()},d.$5=function(){k(i.EXTENSION_INSTALL_START);return d.props.onExtensionInstallStart()},d.$4=function(a){a?l(i.EXTENSION_INSTALL_FAIL,a.toString()):k(i.EXTENSION_INSTALL_SUCCEED),d.props.onExtensionInstallComplete&&d.props.onExtensionInstallComplete(a)},d.$6=function(a){k(i.SCREEN_FAILED);switch(a.message){case b("CollabRTCChromeScreenSharingExtension").EXTENSION_NOT_FOUND:k(i.FAILED_REASON_NO_EXTENSION);break;case b("RTCScreenSharing").SCREEN_SHARING_NOT_SUPPORTED:k(i.FAILED_REASON_NOT_SUPPORTED);break;default:k(i.FAILED_REASON_OTHER);break}d.props.onShareError!=null&&d.props.onShareError(a)},d.$7=function(){k(i.START_SHARING),d.props.onShareStartAttempt!=null&&d.props.onShareStartAttempt()},d.$8=function(a){k(i.SCREEN_SUCCEEDED),b("promiseDone")(m(a),function(){b("FunnelLogger").appendAction(h,i.STREAM_ENDED)}),d.props.onShareStarted(a)},d.$9=function(a){k(i.STOP_SHARING),d.props.onShareStop(a)},d.$10=function(){d.props.onShareUpdateAttempt!=null&&d.props.onShareUpdateAttempt(),k(i.UPDATE_SHARING)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCCallControlsToggleScreenSharingButton.react"),{conferenceState:this.props.conferenceState,isP2P:this.props.isP2P,onClick:this.$1,onDialogDismiss:this.$2,onDialogShow:this.$3,onExtensionInstallComplete:this.$4,onExtensionInstallStart:this.$5,onShareError:this.$6,onShareStartAttempt:this.$7,onShareStarted:this.$8,onShareStop:this.$9,onShareUpdateAttempt:this.$10,disabled:this.props.disabled,onShareStreamUpdate:this.props.onShareStreamUpdate,stream:this.props.stream})};d.componentDidMount=function(){j(),k(i.BUTTON_MOUNTED),k(this.props.disabled?i.BUTTON_DISABLED:i.BUTTON_ENABLED)};d.componentDidUpdate=function(a){a.disabled!==this.props.disabled&&k(this.props.disabled?i.BUTTON_DISABLED:i.BUTTON_ENABLED)};d.componentWillUnmount=function(){b("FunnelLogger").endFunnel(h)};return c}(b("React").PureComponent);function j(){__p&&__p();b("FunnelLogger").startFunnel(h);b("FunnelLogger").addFunnelTag(h,"bn:"+(b("UserAgentData").browserName||"unknown"));b("FunnelLogger").addFunnelTag(h,"os:"+(b("UserAgentData").platformName||"unknown"));b("FBRTCConfig").isVCEndpointCall()&&k(i.START_IN_VC);var a=b("RTCCallStore").getState();a=a.callInfo;switch(a.protocol){case g.P2P:k(i.START_IN_P2P);break;case g.MULTIWAY:k(i.START_IN_MW);break}}function k(a){b("FunnelLogger").appendAction(h,a)}function l(a,c){b("FunnelLogger").appendActionWithTag(h,a,c)}function m(a){return b("Promise").all(a.getVideoTracks().map(function(a){return new(b("Promise"))(function(b){return a.addEventListener("ended",b)})}))}e.exports=a}),null);
__d("FBRTCCallControlPopover.react",["AlignmentEnum","PositionEnum","React","RTCCallControlsAddGroupMembersButton.react","RTCCallControlsButton.react","RTCCallControlsToggleScreenSharingWithFunnelButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){return c.props.referenceElement},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(this.props.referenceElement===null)return null;return this.props.title===null&&this.props.body===null?null:b("React").jsxs(b("XUIContextualDialog.react"),babelHelpers["extends"]({contextRef:this.$1,dialogRole:"dialog",hasActionableContext:!1,hoverContextRef:this.$1,label:this.props.label},this.props,{children:[this.props.title!==null?b("React").jsx(b("XUIContextualDialogTitle.react"),{className:this.props.className,children:this.props.title}):null,this.props.body!==null?b("React").jsx(b("XUIContextualDialogBody.react"),{className:this.props.className,children:this.props.body}):null]}))};return c}(b("React").PureComponent);a.defaultProps={alignment:b("AlignmentEnum").left,hideOnEscape:!0,hideOnBlur:!1,position:b("PositionEnum").above,shown:!1};e.exports=a}),null);
__d("FBRTCCallTimer.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={secondsElapsed:Math.floor(Date.now()/1e3)-c.props.start},c.$2=function(){c.setState({secondsElapsed:Math.floor(Date.now()/1e3)-c.props.start})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=window.setInterval(this.$2,1e3)};d.componentWillUnmount=function(){window.clearInterval(this.$1)};d.render=function(){var a=this.state.secondsElapsed;return b("React").jsxs("span",{"data-testid":"callTimer",children:[a>=3600?("0"+Math.floor(a/3600)).slice(-2)+":":"",("0"+Math.floor(a%3600/60)).slice(-2),":",("0"+a%60).slice(-2)]})};return c}(a);e.exports=c}),null);
__d("FBRTCVideo.react",["cx","FBRTCStreamWrapper","FBRTCUtils","React","ReactDOM","UserAgent","joinClasses","shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").Component;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={currentStream:null},c.streamListener=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){var b=this;a=a.stream;a!==this.props.stream&&(this.streamListener&&this.streamListener.remove(),this.streamListener=a?a.addListener("streamStarted",function(){return b.$1()}):null)};d.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)||this.$2(a)};d.$2=function(a){a=a.stream;a=a?a.getStream():null;return a!==this.state.currentStream};d.render=function(){return b("React").jsx("video",{autoPlay:!0,className:b("joinClasses")(this.props.className,"_1yvx"+(this.props.mirrorVideo?" _6olb":"")),"data-testid":this.props["data-testid"],muted:this.props.muted,onContextMenu:function(a){return a.preventDefault()},onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,playsInline:b("UserAgent").isBrowser("Mobile Safari")})};d.componentDidMount=function(){this.$3(),this.$1()};d.componentDidUpdate=function(a){(this.$2(a)||a.mediaStream!==this.props.mediaStream)&&this.$3(),a.audioSinkID!==this.props.audioSinkID&&this.$1()};d.$3=function(){var a=this.props,c=a.stream;a=a.mediaStream;var d=b("ReactDOM").findDOMNode(this);d&&(c?(c.attachToVideoTag(d),this.setState({currentStream:c.getStream()})):a&&b("FBRTCUtils").attachMediaStream(d,a))};d.$1=function(){var a=this.props.audioSinkID,c=b("ReactDOM").findDOMNode(this);a&&c&&typeof c.setSinkId==="function"&&c.setSinkId(a)};return c}(a);d.defaultProps={muted:!1};d.propTypes={audioSinkID:c.string,className:c.string,mediaStream:c.any,muted:c.bool,stream:c.instanceOf(b("FBRTCStreamWrapper"))};e.exports=d}),null);
__d("RTCCoExperienceActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={toggleChatWindow:function(){b("RTCAppDispatcher").dispatch({type:"TOGGLE_CHAT_WINDOW"})},setVideoFilter:function(a){b("RTCAppDispatcher").dispatch({type:"SET_FILTER",filter:a})},removeVideoFilter:function(){b("RTCAppDispatcher").dispatch({type:"SET_FILTER",filter:null})}};e.exports=a}),null);
__d("RTCUIXIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsx("path",{d:"M24 25.4l-4.9 4.9c-.4 .4-1 .4-1.4 0c-.4-.4-.4-1 0-1.4L22.6 24L17.6 19.1c-.4-.4-.4-1 0-1.4c.4-.4 1-.4 1.4 0L24 22.6l4.9-4.9c.4-.4 1-.4 1.4 0c.4 .4 .4 1 0 1.4L25.4 24l4.9 4.9c.4 .4 .4 1 0 1.4c-.4 .4-1 .4-1.4 0L24 25.4z"})})}))};e.exports=a}),null);
__d("RTCCloseChatPanelButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCCoExperienceActions","RTCUIXIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";function i(){b("RTCCoExperienceActions").toggleChatWindow()}a=function(){return b("React").jsx(b("RTCCallControlsButton.react"),{className:"icon-30 _31j4","data-testid":"closeChatButton",onClick:function(){return i()},title:h._("Cerrar chat"),children:b("React").jsx(b("RTCUIXIcon.react"),{})})};e.exports=a}),null);
__d("RTCChatPanel.react",["cx","CurrentUser","JSResource","MercurySyncEnvironment","MessengerReasonDialogContainerReact.bs","MessengerState.bs","React","RTCCloseChatPanelButton.react","RTWebUserActionLogger","XUISpinner.react","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReasonDialogContainerReact.bs").jsComponent,i=b("lazyLoadComponent")(b("JSResource")("MessengerDetailView.react").__setRef("RTCChatPanel.react")),j="chat_panel",k=!1;function l(){k||(b("MercurySyncEnvironment").setUp(),k=!0)}var m=function(a){var c=b("CurrentUser").isWorkUser();return b("React").jsxs("div",{children:[b("React").jsx(b("MessengerState.bs").jsComponent,{fbid:a.fbId,children:function(d){return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("XUISpinner.react"),{}),children:b("React").jsx(i,{activeThreadID:a.threadID,deliveryReceipts:b("MessengerState.bs").deliveryReceipts(d),hostProps:{renderMinimal:!0,hideActions:!0,messageSentCallback:function(){b("RTWebUserActionLogger").logClick({component:"chat_panel_message",surface:"chat_panel"})}},isWorkUser:c,messengerState:d,readReceipts:b("MessengerState.bs").readReceiptsPerThread(d),viewer:a.fbId})})}}),b("React").jsx(h,{})]})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").startTimer(j)};d.componentWillUnmount=function(){b("RTWebUserActionLogger").logStopTimer({timerName:j,event:{component:"toggle_chat",surface:"chat_panel"}})};d.render=function(){l();return b("React").jsxs("div",{children:[b("React").jsxs("div",{className:"_1a7p",children:[this.props.title,b("React").jsx(b("RTCCloseChatPanelButton.react"),{})]}),b("React").jsx("div",{className:"_1a7y",children:b("React").jsx(m,babelHelpers["extends"]({},this.props))})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCChatViewWrapper.react",["cx","fbt","InnerPane.react","React","RTCChatPanel.react","SplitPane.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var c=a.chatWindowVisible?.3:0;return b("React").jsx("div",{className:"_2txj",children:b("React").jsxs(b("SplitPane.react"),{className:"_6glo"+(a.chatWindowVisible?"":" _6glp"),heightPolicy:"full",proportion:c,widthPolicy:"full",children:[b("React").jsx(b("InnerPane.react"),{className:"_1a7z","data-testid":"chatPanel",children:a.chatWindowVisible?b("React").jsx(b("RTCChatPanel.react"),{fbId:a.callerID,threadID:a.threadID,title:h._("Chat")}):null}),b("React").jsx(b("InnerPane.react"),{children:b("React").jsx("div",{className:"_2tz1",children:a.children})})]})})}e.exports=a}),null);
__d("RTCAppSpinner.react",["cx","MessengerSpinner.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a=a.className;return b("React").jsx(b("MessengerSpinner.react"),{className:b("joinClasses")("_4ywx",a),color:"blue",size:32})};e.exports=a}),null);
__d("RTCUIM4VideoCameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function a(c){var d=c.strikeThrough;d=d===void 0?!1:d;c=babelHelpers.objectWithoutPropertiesLoose(c,["strikeThrough"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},c,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:d?b("React").jsx(a.StrikethroughPath,{transform:"translate(10,12)"}):b("React").jsx(a.NormalPath,{transform:"translate(13,15)"})})}))};a.StrikethroughPath=function(a){return b("React").jsx("path",babelHelpers["extends"]({d:"M3.52219159,16.73575 C3.00847773,17.24975 2.008035,17.00175 2.008035,16.01175 L2.008035,6.00725 C2.008035,3.79725 3.79803794,2.00525 6.00680761,2.00525 L16.1191748,2.00575 C16.9062364,2.00575 17.3005168,2.95775 16.7438269,3.51425 L3.52219159,16.73575 Z M24.1966755,1.70725 L21.589128,4.31625 C21.2143368,4.69125 21.0039539,5.19925 21.0039539,5.72875 L21.0019551,16.01175 C21.0019551,18.22175 19.2149504,20.00675 17.0061808,20.00675 L6.73590149,20.00675 C6.20569683,20.00675 5.69698019,20.21725 5.32218896,20.59225 L2.20642449,23.70925 C1.81614189,24.10025 1.18249484,24.10025 0.792711954,23.70925 C0.402429349,23.31875 0.402429349,22.68575 0.792711954,22.29525 L22.782963,0.29325 C23.1727459,-0.09775 23.8063929,-0.09775 24.1966755,0.29325 C24.5869581,0.68375 24.5869581,1.31725 24.1966755,1.70725 Z M27.5533058,16.41125 L23.8308793,14.54725 C23.3226624,14.29275 23.0018411,13.77225 23.0018411,13.20375 L23.0018411,8.81625 C23.0018411,8.24725 23.3226624,7.72725 23.8308793,7.47275 L27.5533058,5.60875 C28.2179356,5.27575 29,5.75975 29,6.50425 L29,15.51575 C29,16.25975 28.2179356,16.74425 27.5533058,16.41125 Z",fill:"#000000",fillRule:"evenodd"},a))};a.NormalPath=function(a){return b("React").jsx("path",babelHelpers["extends"]({d:"M13.3333333 16H3.55555556C1.592 16 0 14.408 0 12.4444444V3.55555556C0 1.592 1.592 0 3.55555556 0h9.77777774c1.9635556 0 3.5555556 1.592 3.5555556 3.55555556v8.88888884C16.8888889 14.408 15.2968889 16 13.3333333 16m9.38-3.2004444l-3.3097777-1.6564445c-.4515556-.2257778-.7368889-.688-.7368889-1.19377777V6.05155556c0-.50533334.2853333-.968.7368889-1.19377778l3.3097777-1.65644445C23.3048889 2.90577778 24 3.336 24 3.99733333v8.00622227c0 .6617777-.6951111 1.0915555-1.2866667.796",fill:"#ffffff",fillRule:"evenodd"},a))};e.exports=a}),null);
__d("RTCUIM4VideoCameraInlineIcon.react",["React","RTCSVGIcon.react","RTCUIM4VideoCameraIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 24 24",children:b("React").jsx(b("RTCUIM4VideoCameraIcon.react").NormalPath,{})})}))};e.exports=a}),null);
__d("FBRTCEnterRoomLinkButton.react",["cx","fbt","AbstractButton.react","FBRTCSupport","React","RTCAppSpinner.react","RTCUIM4VideoCameraInlineIcon.react","RTCUtils","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=babelHelpers["extends"]({},a);a=c.errorMessage;var d=c.isLoading,e=c.isRejoin;if(d===!0)return b("React").jsx("div",{className:"_6qy3",children:b("React").jsx(b("RTCAppSpinner.react"),{})});d=e===!0?h._("Volver a unirte"):h._("Unirte al videochat");return b("React").jsxs("div",{className:"_6qy3",children:[a===null?null:b("React").jsx("div",{className:"_6z0x",children:a}),b("React").jsx(b("AbstractButton.react"),{className:b("joinClasses")(c.className,"_6qy2"),"data-testid":"join_call_button",image:b("React").jsx(b("RTCUIM4VideoCameraInlineIcon.react"),{className:"_6_r- _6_r_"}),label:d,onClick:function(){b("FBRTCSupport").isMobileDevice()&&b("RTCUtils").requestFullScreen(),c.onClick&&c.onClick()}})]})};e.exports=a}),null);
__d("FBRTCGroupCallFluidGridView.react",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={landscape:!0},c.$1=function(){c.setState({landscape:window.innerHeight<=window.innerWidth})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(),window.addEventListener("resize",this.$1)};d.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};d.render=function(){return b("React").jsx("div",{className:"_2rid"+(this.state.landscape?"":" column")+(this.props.hidden?" hide":""),children:b("React").jsx(h,{landscape:this.state.landscape,remoteUsers:this.props.remoteUsers,renderUser:this.props.renderUser})})};return c}(b("React").PureComponent);var h=function a(c){var d=c.remoteUsers,e=c.landscape,f=c.renderUser;return d.size===1?f(d.first()):i(d).map(function(c,d){return b("React").jsx("div",{className:"_2rip"+(e?" column":"")+(c.size===3?" big":""),children:b("React").jsx(a,{landscape:!e,remoteUsers:c,renderUser:f})},d)})};function i(a){if(a.size===2)return a.map(function(a){return b("immutable").List([a])});else if(a.size<7||a.size%2===0)return b("immutable").Range(0,a.size,2).map(function(b){return a.slice(b,b+2)}).toList();else return b("immutable").Range(0,a.size-3,2).map(function(b){return a.slice(b,b+2)}).toList().push(a.takeLast(3))}e.exports=a}),null);
__d("FBRTCMobileDominantSpeakerView.react",["cx","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_71gx",children:a.renderUser(a.dominantSpeaker)}),b("React").jsx("div",{className:"_71gy"+(b("UserAgent").isBrowser("Mobile Safari")?" safari-mobile":""),children:a.renderUser(a.localUser)})]})}e.exports=a}),null);
__d("RTCAudio.react",["cx","FBRTCUtils","MediaStream","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return b("React").jsx("audio",{autoPlay:!0,className:b("joinClasses")(this.props.className,"_8md"),controls:!1,muted:this.props.muted,ref:function(b){return a.$1=b}})};d.componentDidMount=function(){this.$2(),this.$3()};d.$2=function(){__p&&__p();if(!this.$1)return;var a=this.props.mediaStream;if(a&&a.getVideoTracks().length>0){var c=new(b("MediaStream"))();for(var d=a.getAudioTracks(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;c.addTrack(g)}b("FBRTCUtils").attachMediaStream(this.$1,c)}else b("FBRTCUtils").attachMediaStream(this.$1,a)};d.$3=function(){if(!this.$1)return;var a=this.props.audioSinkID;a&&this.$1.setSinkId&&this.$1.setSinkId(a)};d.componentDidUpdate=function(a){var b=a.audioSinkID;a=a.mediaStream;a!==this.props.mediaStream&&this.$2();b!==this.props.audioSinkID&&this.$3()};return c}(a);c.defaultProps={muted:!1};e.exports=c}),null);
__d("RTCIncallAudio.react",["React","RTCAudio.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.audioSinkID;a.className;var d=a.mediaStream;a=babelHelpers.objectWithoutPropertiesLoose(a,["audioSinkID","className","mediaStream"]);return b("React").jsx("div",babelHelpers["extends"]({},a,{children:b("React").jsx(b("RTCAudio.react"),{audioSinkID:c,mediaStream:d})}))};return c}(a);e.exports=c}),null);
__d("RTCMobileBrowserUtils",["regeneratorRuntime","Promise","CurrentUser","FBRTCCallSummaryStore","FBRTCHangupReason","FBRTCSupport","RTCCallStore","RTCMWProtocolHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isLocalUser:function(a){return a.FBID===b("CurrentUser").getID()},isNewCall:function(a){return a==="NEW"||a==="CONNECTING"},getDefaultDownloadAppLink:function(){return b("FBRTCSupport").isSupportedSafariVersion()?"https://itunes.apple.com/us/app/messenger/id454638411":"https://play.google.com/store/apps/details?id=com.facebook.orca"},endOngoingCall:function(a){__p&&__p();var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:a===void 0&&(a="MWebMultitasking");c=b("RTCCallStore").getState().callInfo,d=c.serverInfoData,e=c.conferenceState,f=c.conferenceName;if(!(e!=="TERMINATED")){i.next=7;break}i.next=5;return b("regeneratorRuntime").awrap(b("RTCMWProtocolHandler").genEndCall(f,b("FBRTCHangupReason").HANGUP_CALL,{serverInfoData:d,endCallSubReason:a,keepLocalStream:!1}));case 5:(g=b("RTCCallStore").getState(),h=g.callSummary),h.logThisSummary(b("FBRTCCallSummaryStore").getInstance());case 7:return i.abrupt("return",b("Promise").resolve());case 8:case"end":return i.stop()}},null,this)}};e.exports=a}),null);
__d("FBRTCEndCallWarningOverlay.react",["cx","fbt","FBRTCParticipantCallState","React","memoizeLastByArgs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=15e3,j={areAllParticipantsGuests:!1,display:{visibility:"hidden"}};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=j,d.$3=b("memoizeLastByArgs")(function(a,c){return a.isGuestUser&&c.every(function(a){var c;return((c=a.participantState)==null?void 0:c.state)!==b("FBRTCParticipantCallState").CONNECTED||a.isGuestUser})}),d.$4=function(){d.setState({display:{visibility:"shown"}})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return this.state.display.visibility!=="shown"?null:b("React").jsxs("div",{className:"_7czx",children:[b("React").jsx("h2",{children:h._("Deber\u00e1s iniciar sesi\u00f3n en Messenger para continuar este videochat")}),b("React").jsx("p",{children:h._("La llamada finalizar\u00e1 en breve")})]})};d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(a){this.$1(a)};d.componentWillUnmount=function(){this.$2()};d.$1=function(a){__p&&__p();var b=this.props,c=b.callInfo,d=b.localUser;b=b.remoteUsers;d=this.$3(d,b);if(d===this.state.areAllParticipantsGuests&&c.conferenceState===(a==null?void 0:a.callInfo.conferenceState))return;if(d)if(c.conferenceState==="NEW"||c.conferenceState==="CONNECTING"){if(this.state.display.visibility==="will_show")return;this.setState({areAllParticipantsGuests:!0,display:{visibility:"will_show",timer:window.setTimeout(this.$4,i)}})}else this.$2(),this.setState({areAllParticipantsGuests:!0,display:{visibility:"shown"}});else this.$2(),this.setState({areAllParticipantsGuests:!1,display:{visibility:"hidden"}})};d.$2=function(){this.state.display.timer!==void 0&&window.clearTimeout(this.state.display.timer)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBRTCEndCallWarningOverlayContainer.react",["FBRTCEndCallWarningOverlay.react","FluxContainer","React","RTCCallStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("RTCCallStore")]};c.calculateState=function(){var a=b("RTCCallStore").getState(),c=a.callInfo,d=a.localUser;a=a.remoteUsers;return{callInfo:c,localUser:d,remoteUsers:a}};var d=c.prototype;d.render=function(){return b("React").jsx(b("FBRTCEndCallWarningOverlay.react"),babelHelpers["extends"]({},this.state))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCMediaStreamReadyContainer.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={active:!1},c.$2=function(){__p&&__p();var a=c.props.mediaStream;if(!a)return;if("active"in a){var b=a.active;c.setState({active:b});b||(c.$1=window.setTimeout(c.$2,100))}else{b=a.getVideoTracks();if(b.some(function(a){return a.readyState==="live"}))c.setState({active:!0});else for(var a=b,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.addEventListener("started",c.$3)}}},c.$3=function(){__p&&__p();var a=c.props.mediaStream;if(!a)return;c.setState({active:!0});for(var a=a.getVideoTracks(),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.removeEventListener("started",c.$3)}},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.render=function(){return this.props.children(this.state.active)};c.componentDidMount=function(){this.$2()};c.componentDidUpdate=function(a,b){this.props.mediaStream!==a.mediaStream&&(this.setState({active:!1}),window.clearTimeout(this.$1),this.$2())};c.componentWillUnmount=function(){this.setState({active:!1}),window.clearTimeout(this.$1)};return b}(b("React").Component);e.exports=a}),null);
__d("RTCSVGIconDropShadowFilter.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;var g=0;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="filter:blur."+g+++"."+Date.now().toString(24),b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.blur,d=a.x;a=a.y;var e=Math.ceil(c*3*Math.sqrt(2*Math.PI)/8);return b("React").jsxs("filter",{id:this.getID(),height:this.props.height+e*2,width:this.props.width+e*2,x:d-e,y:a-e,children:[b("React").jsx("feGaussianBlur",{"in":"SourceAlpha",result:"blur",stdDeviation:c}),b("React").jsx("feOffset",{dx:d,dy:a,"in":"blur",result:"offsetBlur"}),b("React").jsx("feFlood",{floodColor:this.props.color,floodOpacity:this.props.opacity}),b("React").jsx("feComposite",{in2:"offsetBlur",operator:"in",result:"shadow"}),b("React").jsx("feMorphology",{operator:"dilate",radius:"1","in":"SourceAlpha",result:"outline"}),b("React").jsx("feFlood",{floodColor:"#000",floodOpacity:.1}),b("React").jsx("feComposite",{in2:"outline",operator:"in",result:"stroke"}),b("React").jsxs("feMerge",{children:[b("React").jsx("feMergeNode",{"in":"shadow"}),b("React").jsx("feMergeNode",{"in":"stroke"}),b("React").jsx("feMergeNode",{"in":"SourceGraphic"})]})]})};d.getID=function(){return this.props.id||this.$1};d.getURL=function(){return"url(#"+this.getID()+")"};return c}(a);c.defaultProps={blur:2,color:"#000",opacity:.2,x:0,y:1};e.exports=c}),null);
__d("RTCUIM4MicrophoneIcon.react",["cx","React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.strikeThrough;c=c===void 0?!1:c;var d=a.fill;d=d===void 0?!1:d;var e=a.shadow;e=e===void 0?!1:e;a=a.className;return b("React").jsx(b("RTCSVGIcon.react"),{className:b("joinClasses")(a,"_7968"),children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:e?b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:b("React").jsx(h,{fill:d,strikeThrough:c})})]}):b("React").jsx(h,{fill:d,strikeThrough:c})})})};return c}(b("React").PureComponent);var h=function(a){if(a.strikeThrough)return b("React").jsx("path",{d:"M14.0098327,28.0001562 L22.0107909,28.0001562 C22.5632535,28.0001562 23.0112232,28.4478973 23.0112232,29.0000781 C23.0112232,29.5522589 22.5632535,30 22.0107909,30 L14.0098327,30 C13.4573701,30 13.0094004,29.5522589 13.0094004,29.0000781 C13.0094004,28.4478973 13.4573701,28.0001562 14.0098327,28.0001562 M9.00917125,17.5022253 C9.00917125,16.9500445 9.45714092,16.5023034 10.0091036,16.5023034 C10.5615661,16.5023034 11.0090358,16.9500445 11.0090358,17.5022253 C11.0090358,18.2512922 11.1275278,18.9728751 11.346013,19.6494839 C11.4595053,20.0017802 11.3620119,20.3875572 11.1000297,20.6499055 C10.5795649,21.1706045 9.67562613,20.9747177 9.44764157,20.2751222 C9.16366079,19.4016272 9.00917125,18.4701657 9.00917125,17.5022253 M23.0112232,17.5022253 C23.0112232,20.2631291 20.7718748,22.5013352 18.0100618,22.5013352 C17.2881107,22.5013352 16.6031571,22.3449256 15.984699,22.0670862 C15.7147172,21.9461561 15.3987386,22.0066212 15.1897528,22.2155004 L14.6942863,22.7112138 C14.3908069,23.0145385 14.4578023,23.5347377 14.8397765,23.7316239 C15.7912121,24.2213408 16.8661393,24.501179 18.0100618,24.501179 C21.8768,24.501179 25.0115878,21.3674907 25.0115878,17.5022253 L25.0110878,17.5022253 C25.0110878,16.9500445 25.4585575,16.5023034 26.0115201,16.5023034 C26.5634827,16.5023034 27.0114523,16.9500445 27.0114523,17.5022253 C27.0114523,22.4718522 22.9812252,26.5005231 18.0100618,26.5005231 C16.2806789,26.5005231 14.6712879,26.0053094 13.3023806,25.1568 C12.9194065,24.9194372 12.42494,24.9789028 12.1064615,25.2972188 L7.7072594,29.6946765 C7.31678584,30.0849509 6.68332873,30.0849509 6.29285517,29.6946765 C5.90238161,29.3039024 5.90238161,28.6717679 6.29285517,28.2809938 L28.2928656,6.29270578 C28.6833391,5.90243141 29.3167963,5.90243141 29.7067699,6.29270578 C30.0977434,6.68298015 30.0977434,7.31561441 29.7067699,7.70638849 L23.5971835,13.8128582 C23.2217089,14.1881412 23.0112232,14.6963474 23.0112232,15.2270406 L23.0112232,17.5022253 Z M22.2895221,9.46592126 L13.9005901,17.8510736 C13.5681126,18.1828818 13.000151,17.9475178 13.001151,17.4782891 L13.0091504,11.0035323 C13.0091504,8.24262848 15.2484988,6.00442244 18.0098118,6.00442244 C19.9141829,6.00442244 21.5680709,7.06930681 22.4120138,8.6349017 C22.5595038,8.90774396 22.5085072,9.2470478 22.2895221,9.46592126 Z",fill:a.fill?"#FFFFFF":"#000000",fillRule:"evenodd"});else return b("React").jsx("path",{d:"M14,28 L22,28 C22.552,28 23,28.448 23,29 C23,29.552 22.552,30 22,30 L14,30 C13.448,30 13,29.552 13,29 C13,28.448 13.448,28 14,28 M18,22.5 C15.239,22.5 13,20.2615 13,17.5 L13,11 C13,8.2385 15.239,6 18,6 C20.761,6 23,8.2385 23,11 L23,17.5 C23,20.2615 20.761,22.5 18,22.5 M18,26.5 C13.0295,26.5 9,22.4705 9,17.5 C9,16.948 9.448,16.5 10,16.5 C10.552,16.5 11,16.948 11,17.5 C11,21.366 14.134,24.5 18,24.5 C21.866,24.5 25.0005,21.366 25.0005,17.5 L25,17.5 C25,16.948 25.448,16.5 26,16.5 C26.552,16.5 27,16.948 27,17.5 C27,22.4705 22.9705,26.5 18,26.5",fill:"#FFFFFF",fillRule:"evenodd"})};e.exports=a}),null);
__d("RTWebRTCUserUtils",["FBRTCParticipantCallState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getRemoteUsers:function(a){return a!=null?a:b("immutable").List()},getAllConnectedUsers:function(a){return a!=null?a.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED}):null},combineLocalAndRemoteUsers:function(a,c){c=c!=null?b("immutable").List([a]).concat(c):b("immutable").List([a]);return c},isSelfVideoMuted:function(a){var b=a.streams.first();return!(b&&!a.areAllTracksMuted(b.getVideoTracks()))}};e.exports=a}),null);
__d("RTWebMobileUserStream.react",["cx","FBRTCConstants","FBRTCEndCallWarningOverlayContainer.react","FBRTCVideo.react","Image.react","React","RTCIncallAudio.react","RTCMediaStreamReadyContainer.react","RTCMobileBrowserUtils","RTCUIM4MicrophoneIcon.react","RTWebRTCUserUtils","RTWebStrings","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout;function a(a){var c=b("RTWebRTCUserUtils").isSelfVideoMuted(a.user);return b("React").jsx("div",{className:"_6npb",children:c?b("React").jsx(n,{conferenceState:a.conferenceState,isP2P:a.isP2P,layout:a.layout,rtcUsers:a.rtcUsers,user:a.user}):b("React").jsx(m,{conferenceState:a.conferenceState,isP2P:a.isP2P,layout:a.layout,rtcUsers:a.rtcUsers,user:a.user})})}function i(a){var c=a.user,d=a.conferenceState;a=a.rtcUsers;d=b("RTCMobileBrowserUtils").isNewCall(d)||a.size<=1;return b("React").jsx("div",{className:"_6nps"+(b("RTCMobileBrowserUtils").isLocalUser(c)&&!d&&c.isAudioMuted()?" _6np1":""),children:b("React").jsx(b("RTCUIM4MicrophoneIcon.react"),{fill:!0,shadow:!0,strikeThrough:!0})})}function j(a,c,d){if(c===h.DOMINANT_SPEAKER&&b("RTCMobileBrowserUtils").isLocalUser(d))return null;c=d.isGuestUser&&(c===h.DOMINANT_SPEAKER||c===h.GRID&&b("RTCMobileBrowserUtils").isLocalUser(d));return c?b("React").jsx(b("FBRTCEndCallWarningOverlayContainer.react"),{}):a?b("React").jsx("div",{className:"_6ov3"+(a?"":" hide"),children:b("RTWebStrings").waitingForOthers}):null}function k(a,c,d){return b("React").jsxs("div",{className:"_7ciq",children:[b("React").jsx(b("Image.react"),{alt:b("RTWebStrings").profilePictureAlt,className:"_6np9",src:c.profilePictureUrl}),b("React").jsx("div",{className:"_7cir",children:c.userName}),b("React").jsx("div",{className:"_6npa",children:l(d)})]})}function l(a){switch(a){case"NEW":return b("RTWebStrings").connecting;case"CONNECTING":return b("RTWebStrings").ringing;default:return null}}function m(a){var c=a.user,d=a.conferenceState,e=a.layout,f=a.rtcUsers;a=a.isP2P;var g=c.streams.first(),h=b("RTCMobileBrowserUtils").isNewCall(d)&&f.size<=1;a=a&&b("RTCMobileBrowserUtils").isNewCall(d)?k(c,f.first(),d):j(h,e,c);return b("React").jsxs("div",{className:"_6np2",children:[a,b("React").jsx(b("RTCMediaStreamReadyContainer.react"),{mediaStream:g,children:function(a){return b("React").jsx("div",{className:"_6np3"+(a?" active":"")+" _6np6"+(h?" _6np7":""),children:b("React").jsx(b("FBRTCVideo.react"),{mediaStream:g,muted:b("RTCMobileBrowserUtils").isLocalUser(c)})})}}),b("React").jsx(i,{conferenceState:d,rtcUsers:f,user:c})]})}function n(a){var c=a.user,d=a.conferenceState;a=a.rtcUsers;var e=c.streams.first();return b("React").jsxs("div",{className:"_6np2",children:[b("React").jsx(b("Image.react"),{className:"_6np8",src:c.profilePictureUrl}),b("React").jsx(b("Image.react"),{alt:b("RTWebStrings").profilePictureAlt,className:"_6np9",src:c.profilePictureUrl}),b("React").jsx("p",{className:"_6npa",children:b("RTCMobileBrowserUtils").isLocalUser(c)?b("RTWebStrings").viewerVideoOff:b("RTWebStrings").userVideoOff(c.userShortName)}),b("RTCMobileBrowserUtils").isLocalUser(c)?null:b("React").jsx(b("RTCIncallAudio.react"),{mediaStream:e}),b("React").jsx(i,{conferenceState:d,rtcUsers:a,user:c})]})}e.exports=a}),null);
__d("FBRTCMobileBrowserInCallView.react",["cx","FBRTCConstants","FBRTCGroupCallFluidGridView.react","FBRTCGroupCallStore","FBRTCMobileDominantSpeakerView.react","FluxContainer","React","RTCCallActions","RTCCallStore","RTCIncallAudio.react","RTCMobileBrowserUtils","RTCMWProtocolHandler","RTWebMobileUserStream.react","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout,i=b("FBRTCConstants").SignalingProtocol;a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("FBRTCGroupCallStore")]};c.calculateState=function(){var a=b("FBRTCGroupCallStore").getState(),c=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return{dominantSpeakerFBID:c,pinnedSpeakerFBID:a}};function c(d,e){__p&&__p();var f;f=a.call(this,d)||this;f.state=babelHelpers["extends"]({},c.calculateState());f.isVideoMutedByLocalUser=!1;f.$2=function(){switch(document.visibilityState){case"hidden":f.isVideoMutedByLocalUser=f.props.localUser.isVideoMuted();b("RTCCallActions").toggleMuteVideo(!1);break;case"visible":f.isVideoMutedByLocalUser||b("RTCCallActions").toggleMuteVideo(!0)}};f.$3=function(a){a&&(f.incallView=a)};document.body&&(document.body.style.overflow="hidden");return f}var d=c.prototype;d.componentDidMount=function(){this.incallView&&this.incallView.addEventListener("touchstart",this.$1),document.addEventListener("visibilitychange",this.$2)};d.componentDidUpdate=function(a){if(a.conferenceState!==this.props.conferenceState&&this.props.conferenceState==="CONNECTED"){a=b("RTCCallStore").getState();a=a.callInfo;var c=b("RTCCallStore").getConnection(i.MULTIWAY);c&&b("RTCMWProtocolHandler").subscription(a.conferenceName,a.serverInfoData,c.getRemoteStreams(),h.DOMINANT_SPEAKER,null,c.getRemoteMediaCnames())}};d.componentWillUnmount=function(){this.incallView&&this.incallView.removeEventListener("touchstart",this.$1),document.removeEventListener("visibilitychange",this.$2)};d.$1=function(a){a.touches.length>1&&a.preventDefault()};d.render=function(){__p&&__p();var a=this.props,c=a.isP2P,d=a.rtcUsers,e=a.layout,f=a.conferenceState,g=a.localUser,h=k(c,this.state.pinnedSpeakerFBID,this.state.dominantSpeakerFBID,d,g);if(c&&b("RTCMobileBrowserUtils").isNewCall(f))return b("React").jsx(b("RTWebMobileUserStream.react"),{conferenceState:f,isP2P:c,layout:e,rtcUsers:d,user:g});else if(j(c,e,d,h)){a=d.filter(function(a){return a.FBID!==g.FBID&&a.FBID!==h.FBID});return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("FBRTCMobileDominantSpeakerView.react"),{dominantSpeaker:h,localUser:g,renderUser:function(a){return b("React").jsx(b("RTWebMobileUserStream.react"),{conferenceState:f,isP2P:c,layout:e,rtcUsers:d,user:a})}}),a.map(function(a){return b("React").jsx(b("RTCIncallAudio.react"),{mediaStream:a.getStream()},a.FBID)})]})}else return b("React").jsx("div",{className:"_6npc",ref:this.$3,children:b("React").jsx(b("FBRTCGroupCallFluidGridView.react"),{hidden:!1,remoteUsers:d,renderUser:function(a){return b("React").jsx(b("RTWebMobileUserStream.react"),{conferenceState:f,isP2P:c,layout:e,rtcUsers:d,user:a})}})})};return c}(a);function j(a,b,c,d){return a||d&&b===h.DOMINANT_SPEAKER}function k(a,b,c,d,e){__p&&__p();if(a)return d.first();var f=(a=b)!=null?a:c;b=d.filter(function(a){return a.FBID!==e.FBID});return d.find(function(a){return a.FBID===f})||b&&(b.find(function(a){return!a.isAudioMuted()&&!a.isVideoMuted()})||b.find(function(a){return!a.isAudioMuted()})||b.find(function(a){return!a.isVideoMuted()})||b.first())||d.first()}e.exports=b("FluxContainer").create(c)}),null);
__d("XRegViewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/reg/",{reg_email__:{type:"String"},reg_second_contactpoint__:{type:"String"},reg_country:{type:"String"},firstname:{type:"String"},lastname:{type:"String"},birthday_day:{type:"String"},birthday_month:{type:"String"},birthday_year:{type:"String"},birthday_date:{type:"String"},sex:{type:"Int"},reg_passwd__:{type:"String"},reg_save_password:{type:"Bool",defaultValue:!1},suggestedpassword:{type:"String"},websubmit:{type:"Exists",defaultValue:!1},submission_request:{type:"Exists",defaultValue:!1},exclude_suggestions:{type:"Bool",defaultValue:!1},ns:{type:"Int"},korean_tos_is_present:{type:"Bool",defaultValue:!1},checkbox_privacy_policy:{type:"Bool",defaultValue:!1},checkbox_tos:{type:"Bool",defaultValue:!1},checkbox_location_policy:{type:"Bool",defaultValue:!1},ccp:{type:"Int"},helper:{type:"Int"},reg_impression_id:{type:"String"},tosv:{type:"Int"},rs:{type:"Enum",enumType:0},zero_header_af_client:{type:"String"},rid:{type:"Int"},upload_contacts:{type:"Bool",defaultValue:!1},gb:{type:"Bool",defaultValue:!1},suggested_name:{type:"String"},reg_flow:{type:"Enum",enumType:0},test_group:{type:"String"},key:{type:"String"},subno:{type:"String"},multi_page_js_state:{type:"String"},suma_create_event:{type:"Enum",enumType:1},reg_instance:{type:"String"},i:{type:"String"},cid:{type:"Int"},ref:{type:"String"},ad_category:{type:"String"},reg:{type:"String"},campaign_id:{type:"Int"},adgroupid:{type:"String"},extra_1:{type:"String"},extra_2:{type:"String"},_fb_noscript:{type:"Exists",defaultValue:!1},_fsp:{type:"Exists",defaultValue:!1},esn:{type:"String"},hidden_error_fields:{type:"String"},current_step:{type:"Int"},locs:{type:"Exists",defaultValue:!1},multistep_next_logging:{type:"String"},ty:{type:"Bool",defaultValue:!1}})}),null);
__d("RTCAnonGuestPostCallMessengerUpsellFooter.react",["cx","fbt","ix","AbstractButton.react","Image.react","MessengerChatLinksFunnelLogger","React","URI","XRegViewController"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(){return b("React").jsx("div",{className:"_7hy3",children:b("React").jsxs("div",{className:"_7hy4",children:[b("React").jsxs("div",{className:"_7hy5",children:[b("React").jsx("div",{className:"_7hy6",children:h._("Siempre conectado, est\u00e9s donde est\u00e9s.")}),b("React").jsx("div",{className:"_7hy7",children:h._("Messenger es una manera sencilla de enviar mensajes, realizar videochats y planificar tus cosas desde un solo lugar.")}),b("React").jsx(b("AbstractButton.react"),{className:"_7hy8",label:h._("Crear cuenta"),onClick:function(){b("MessengerChatLinksFunnelLogger").appendAction("anon_clicked_create_account");var a=new(b("URI"))(document.URL);a=b("XRegViewController").getURIBuilder().getURI().setDomain(a.getDomain().replace(/messenger\.com$/,"facebook.com")).setProtocol("https");a.go()}})]}),b("React").jsx("div",{className:"_7hy9",children:b("React").jsx(b("Image.react"),{alt:"Messenger App Preview",height:"200",src:i("953485"),width:"200"})})]})})}e.exports=a}),null);
__d("RTCNotificationUtils",["fbt","immutable","intlList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={addingUsersToCallText:function(a,c){if(c&&c.size>0){c=c.toArray().map(function(a){return a.short_name});c=a?g._("Agregando a {names of users being added to call} a la llamada...",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.AND))]):g._("Agregando a {names of users being added to call} al videochat...",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.AND))])}else c=a?g._("Agregando a alguien a la llamada..."):g._("Agregando a alguien al videochat...");return c},unableToAddUsersToCallText:function(a,c){if(c&&c.size>0){c=c.toArray().map(function(a){return a.short_name});return g._("No se puede agregar a {names of users being added to call}",[g._param("names of users being added to call",b("intlList")(c,b("intlList").CONJUNCTIONS.OR))])}return a?g._("No se puede agregar a la persona a la llamada"):g._("No se puede agregar a la persona al videochat")}};e.exports=a}),null);
__d("RTCCallNotificationReducer",["RTCAppDispatcher","RTCCallActionTypes","RTCCallStore","RTCGroupCallEscalationActionTypes","RTCGroupCallEscalationStore","RTCNotificationUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case"GROUP_ESCALATION_START":c=!b("RTCCallStore").hasRemoteVideo()&&!b("RTCCallStore").hasLocalVideo();c=b("RTCNotificationUtils").addingUsersToCallText(c,b("RTCGroupCallEscalationStore").getState().usersToRing);return a.set("notificationText",c).set("useTimeout",!1)}return a}function c(a,c){switch(c.type){case"ON_CONFERENCE_STATE":b("RTCAppDispatcher").waitFor([b("RTCGroupCallEscalationStore").getDispatchToken()]);return b("RTCGroupCallEscalationStore").getState().readyToTransition?a.set("notificationText",null).set("useTimeout",!1):a}return a}function d(a,c){switch(c.type){case"GROUP_ESCALATION_CANCEL":c=!b("RTCCallStore").hasRemoteVideo()&&!b("RTCCallStore").hasLocalVideo();c=b("RTCNotificationUtils").unableToAddUsersToCallText(c,b("RTCGroupCallEscalationStore").getState().usersToRing);return a.set("notificationText",c).set("useTimeout",!0)}return a}function f(a,b){switch(b.type){case"HANGUP":case"END_CALL":case"HANGUP_ERROR":case"HANGUP_SUCCESS":return a.withMutations(function(a){a.set("notificationText",null).set("useTimeout",!0)})}return a}e.exports={clearStore:f,onEscalationStarted:a,onEscalationCompletion:c,onAbortedEscalation:d}}),null);
__d("RTCCallNotificationStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={useTimeout:!0,notificationText:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("RTCCallNotificationStore",["FluxReduceStore","RTCAppDispatcher","RTCCallNotificationReducer","RTCCallNotificationStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCCallNotificationReducer").clearStore,b("RTCCallNotificationReducer").onEscalationStarted,b("RTCCallNotificationReducer").onEscalationCompletion,b("RTCCallNotificationReducer").onAbortedEscalation];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCCallNotificationStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCallNotificationContainer.react",["PageHooks","FluxContainer","RTCCallNotificationStore","MessengerBannerOverlay.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("PageHooks");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("RTCCallNotificationStore")]};c.calculateState=function(){var a=b("RTCCallNotificationStore").getState(),c=a.notificationText;a=a.useTimeout;return{notificationText:c,useTimeout:a}};function c(b){b=a.call(this,b)||this;b.state=babelHelpers["extends"]({},c.calculateState());return b}var d=c.prototype;d.render=function(){var a=this.state,c=a.notificationText;a=a.useTimeout;return b("React").jsx(b("MessengerBannerOverlay.react"),{display:this.props.conferenceState!=="TERMINATED",useTimeout:a,children:c})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCInCallSlidingLogoContainer.react",["cx","fbt","FBRTCConstants","Link.react","MessengerChatLinksFunnelLogger","React","RTCMobileBrowserUtils","XUIText.react","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=function(){b("MessengerChatLinksFunnelLogger").appendAction("click_app_download_in_call"),b("promiseDone")(b("RTCMobileBrowserUtils").endOngoingCall("clickedDownloadAppBanner"),function(a){return d.props.onClick()})};return d}var d=c.prototype;d.componentDidMount=function(){this.props.userActionsLogger().setEvent("impression").log()};d.render=function(){return b("React").jsx(b("Link.react"),{onClick:this.$1,children:b("React").jsxs("div",{className:"_723-",children:[b("React").jsx(b("XUIText.react"),{className:"_723_",display:"block",size:"body2",children:this.props.layout===i.GRID?h._("Descarga Messenger"):h._({"*":"{number} personas en este chat","_1":"1 persona en este chat"},[h._plural(this.props.connectedRemoteUsersSize+1,"number")])}),b("React").jsx(b("XUIText.react"),{className:"_7240",display:"block",size:"body2",children:this.props.layout===i.GRID?h._("Disfruta de una experiencia completa con la app"):h._("Disfruta de una experiencia en grupo \u00f3ptima con la app")})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("RTCUIXIconM4.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.isDarkMode;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["isDarkMode"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{height:"28",width:"28",children:b("React").jsxs("g",{fillRule:"evenodd",children:[b("React").jsx("circle",{cx:"14",cy:"14",fillOpacity:c?".2":".04",r:"14"}),b("React").jsx("path",{d:"M14 12.350084l3.299832-3.299831c.455611-.455612 1.194304-.455612 1.649915 0 .455612.455611.455612 1.194304 0 1.649915L15.649916 14l3.299831 3.299832c.455612.455611.455612 1.194304 0 1.649915-.455611.455612-1.194304.455612-1.649915 0L14 15.649916l-3.299832 3.299831c-.455611.455612-1.194304.455612-1.649915 0-.455612-.455611-.455612-1.194304 0-1.649915L12.350084 14l-3.299831-3.299832c-.455612-.455611-.455612-1.194304 0-1.649915.455611-.455612 1.194304-.455612 1.649915 0L14 12.350084z"})]})})}))};e.exports=a}),null);
__d("RTCM4CloseButton.react",["cx","React","RTCCallControlsButton.react","RTCUIXIconM4.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.isDarkMode;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["isDarkMode"]);return b("React").jsx("div",{className:a.className,children:b("React").jsx(b("RTCCallControlsButton.react"),{className:(c?"closeM4Dark":"")+(c?"":" closeM4Light")+" _4uwq",highlighted:!1,onClick:a.onClick,shouldThrottle:!1,title:a.title,children:b("React").jsx(b("RTCUIXIconM4.react"),{isDarkMode:c})})})};e.exports=a}),null);
__d("RTCMobileFlyout.react",["cx","invariant","AbstractDialog.react","AccessibleLayer","CSS","React","ReactLayer","SubscriptionsHandler","UserAgent","debounce","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$4=function(){var a=c.$1.getContentRoot();a!=null||h(0,70);return!0};this.$5=function(){b("requestAnimationFrame")(function(){var a=c.$1.getContentRoot();a!=null||h(0,70);a.addEventListener("transitionend",function(){c.$1.finishHide()});b("CSS").addClass(a,"_71p8")});return!1};this.$1=a;this.$3=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.enable=function(){this.$2=[this.$1.subscribe("show",this.$4),this.$1.subscribe("starthide",this.$5)]};c.disable=function(){this.$2&&(this.$2.forEach(function(a){a.unsubscribe()}),this.$2=null),this.$3.release()};return a}();var i=b("ReactLayer").createClass(b("AbstractDialog.react").createSpec({displayName:"RTCMobileFlyoutLayer",addedBehaviors:{AccessibleLayer:b("AccessibleLayer"),SlideInFromBottom:a},fixedTopPosition:0}));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={width:window.innerWidth};d.$1=b("debounce")(function(){d.setState({width:window.innerWidth});var a=window.innerHeight*.01,b=document.documentElement;b!=null&&b.style.setProperty("--vh",a+"px")},150);c=window.innerHeight*.01;var e=document.documentElement;e!=null&&e.style.setProperty("--vh",c+"px");window.addEventListener("resize",d.$1);return d}var d=c.prototype;d.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};d.render=function(){var a=b("UserAgent").isPlatform("iOS");return b("React").jsx(i,{className:"_71p9 _72pp"+(a?"":" _85xn")+(a?" _85xo":""),onToggle:this.props.onToggle,shown:!0,width:this.state.width,children:this.props.children},"dialog")};return c}(b("React").PureComponent);e.exports=c}),null);
__d("RTCMobileFlyoutBody.react",["React","joinClasses"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").jsx("section",{className:b("joinClasses")(a.className),children:a.children})}e.exports=a}),null);
__d("RTCMobileFlyoutHeader.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").jsx("header",{className:b("joinClasses")(a.className,"_71p7"),children:a.children})}e.exports=a}),null);
__d("MessengerCollisionContextQuery",["RelayFBEnvironment","RelayModern","VideoChatLinksUserActionsTypedLogger","MessengerCollisionContextQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").fetchQuery;b("RelayModern").graphql;var h=function(){return b("MessengerCollisionContextQuery.graphql")};function a(a){return g(b("RelayFBEnvironment"),h,{conference_name:a},{force:!0}).then(function(a){a=a.messenger_collision_context_query;return a==null?{peerID:null,groupThreadID:null}:{peerID:a.peer_id,groupThreadID:a.group_thread_id}})["catch"](function(a){i(a);throw a})}function i(a){new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface("www_incall").setEvent("error").setErrorType("MessengerCollisionContextQueryError").setErrorDetails(a).log()}e.exports=a}),null);
__d("RTCMobileGroupCallRosterRow.react",["ix","cssVar","cx","fbt","regeneratorRuntime","ClickableArea.react","FDSButton.react","Image.react","MessengerContactImage.react","React","RTCGroupCallDialogController","RTCUtils","asset","cxMargin"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=parseInt("36px",10);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.render=function(){var a=this.props,c=a.checked,d=a.isLocalUser,e=a.isLocalUserThreadMember,f=a.isParticipantGuest,h=a.onClick,i=a.participant;a=a.subtitle;d=b("React").jsxs("div",{className:"_71p4",role:"group",children:[b("React").jsx(b("MessengerContactImage.react"),{className:"_71p5",isMessengerUser:i.is_messenger_user,isPartiesUser:i.is_parties_user,size:k,src:i.image_src}),b("React").jsxs("div",{className:"_71jj",children:[b("React").jsxs("div",{className:"_71jk",children:[b("React").jsx("div",{className:"_71jl",children:d===!0?j._("T\u00fa"):i.name}),a!=null?b("React").jsx("div",{className:"_71jm",children:a}):null]}),c===!0?b("React").jsx(b("Image.react"),{className:"_73kp",src:g("505224")}):null,e===!0&&f===!0?b("React").jsx(b("FDSButton.react"),{icon:b("React").jsx(b("Image.react"),{src:g("480719")}),label:"",labelIsHidden:!0,margin:"_3-8x",onClick:function(){return b("RTCGroupCallDialogController").showRemoveGuestDialog(b("RTCUtils").payloadParticipantsToRTCUsers([i])[0])},size:"small",use:"flat"}):null]})]});if(h)return b("React").jsx(b("ClickableArea.react"),{onClick:h,children:d});else return d};return c}(b("React").Component);e.exports=a}),null);
__d("RTCMobileGroupCallRosterBody.react",["fbt","regeneratorRuntime","FBRTCConstants","FBRTCGroupCallStore","FBRTCGuestUtils","FluxContainer","MercuryIDs","MessengerCollisionContextQuery","MessengerState.bs","React","RTCCallStore","RTCGroupCallActions","RTCMobileGroupCallRosterRow.react","RTCMobileRosterSorter","RTWebUserActionLogger","emptyFunction","immutable","memoizeWithArgs","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=b("immutable").Map(),d.$3=b("memoizeWithArgs")(function(a){return function(){b("RTWebUserActionLogger").logClick({component:"mweb_roster_row",surface:"mweb_roster_view"}),b("RTCGroupCallActions").setPinnedSpeaker(d.state.pinnedSpeakerFBID===a?null:a)}},b("emptyFunction").thatReturnsArgument,"_bindOnRowClick"),c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("FBRTCGroupCallStore"),b("RTCCallStore")]};var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this,c,d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:b("RTWebUserActionLogger").logImpression({surface:"mweb_roster_view"});c=b("FBRTCGroupCallStore").getState(),d=c.thread;if(!(d!=null)){m.next=6;break}this.$2(d);m.next=18;break;case 6:e=b("RTCCallStore").getState(),f=e.callInfo.conferenceName,g=e.localUser;if(!(f!=null)){m.next=18;break}m.next=10;return b("regeneratorRuntime").awrap(b("MessengerCollisionContextQuery")(f));case 10:h=m.sent;i=h.groupThreadID;j=h.peerID;k=j!=null?j:i;if(!(k==null)){m.next=16;break}return m.abrupt("return");case 16:l=k!=null?b("MercuryIDs").getThreadIDFromUserID(k):b("MercuryIDs").getThreadIDFromThreadFBID(k),b("MessengerState.bs").getThreadMeta(g.FBID,l,function(c){a.$2(c),b("RTCGroupCallActions").initThread(c,null)});case 18:case"end":return m.stop()}},null,this)};d.componentDidUpdate=function(a,c){a=b("FBRTCGroupCallStore").getState();c=a.thread;c!=null&&this.$2(c)};c.calculateState=function(){var a=b("FBRTCGroupCallStore").getState(),c=a.layout,d=a.participants,e=a.pinnedSpeakerFBID;a=a.thread;var f=b("RTCCallStore").getState(),g=f.localUser;f=f.remoteUsers;return{isLocalUserThreadMember:b("FBRTCGuestUtils").isAnonOrAuthGuestUser(g,a),layout:c,pinnedSpeakerFBID:e,roster:b("RTCMobileRosterSorter").sort(d,f,g.get("FBID"))}};d.render=function(){var a=this,c=this.state,d=c.isLocalUserThreadMember,e=c.layout,f=c.pinnedSpeakerFBID;c=c.roster;var i=c.activeParticipants;c=c.localUser;var j=e===h.DOMINANT_SPEAKER;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("RTCMobileGroupCallRosterRow.react"),{isLocalUser:!0,participant:c.payload}),i.map(function(c){c=c.payload;return b("React").jsx(b("RTCMobileGroupCallRosterRow.react"),{checked:c.fbid===f,isLocalUserThreadMember:d,isParticipantGuest:a.$1.contains(c),onClick:j?a.$3(b("nullthrows")(c.fbid)):null,participant:c,subtitle:j&&c.fbid===f?g._("Participante seleccionado"):null},c.id)})]})};d.$2=function(a){var c=b("RTCCallStore").getState();c=c.localUser;var d=b("FBRTCGroupCallStore").getState();d=d.participants;d=b("FBRTCGuestUtils").fetchGuestParticipantsInCall(a,d);this.setState({isLocalUserThreadMember:!b("FBRTCGuestUtils").isAnonOrAuthGuestUser(c,a)});this.$1=d};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCMobileGroupCallRosterView.react",["cx","fbt","ErrorBoundary.react","React","RTCM4CloseButton.react","RTCMobileFlyout.react","RTCMobileFlyoutBody.react","RTCMobileFlyoutHeader.react","RTCMobileGroupCallRosterBody.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return b("React").jsxs(b("RTCMobileFlyout.react"),{onToggle:a.onToggle,children:[b("React").jsx(b("RTCMobileFlyoutHeader.react"),{children:b("React").jsxs("div",{className:"_858p",children:[b("React").jsx("div",{children:h._("En este chat")}),b("React").jsx(b("RTCM4CloseButton.react"),{isDarkMode:!0,onClick:a.onToggle,title:h._("Cerrar lista de participantes")})]})}),b("React").jsx(b("RTCMobileFlyoutBody.react"),{children:b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("RTCMobileGroupCallRosterBody.react"),{})})})]})}e.exports=a}),null);
__d("RTCMobileGroupCallDialogController",["DOM","React","ReactDOM","RTCMobileGroupCallRosterView.react"],(function(a,b,c,d,e,f){"use strict";var g={_container:b("DOM").create("div"),showRoster:function(){b("ReactDOM").render(b("React").jsx(b("RTCMobileGroupCallRosterView.react"),{onToggle:this._onUnmount}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(g._container)}};e.exports=g}),null);
__d("RTCMobilePostCallHeaderBanner.react",["cx","fbt","ix","FlexLayout.react","Image.react","Link.react","MessengerChatLinksFunnelLogger","React","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=function(){b("MessengerChatLinksFunnelLogger").appendAction("click_app_download_post_call"),d.props.onClick()};return d}var d=c.prototype;d.componentDidMount=function(){this.props.userActionsLogger().setEvent("impression").log()};d.render=function(){return b("React").jsxs(b("FlexLayout.react"),{align:"center",className:"_6qxt",children:[b("React").jsx(b("Link.react"),{className:"_6qy5",onClick:this.$1,target:"_blank",children:b("React").jsx(b("Image.react"),{height:32,src:i("955014"),width:32})}),b("React").jsxs(b("FlexLayout.react"),{direction:"vertical",children:[b("React").jsx(b("XUIText.react"),{className:"_6qxu",display:"block",size:"body2",children:h._("Descargar Messenger")}),b("React").jsx(b("XUIText.react"),{className:"_6qxv",color:"secondary",display:"block",size:"body2",children:h._("\u00danete a este chat con la app de Messenger")})]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerRTCUserMediaErrorDialog.react",["cx","fbt","FluxContainer","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogTitleReact.re","React","RTCCallStore","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogTitleReact.re").make,j=300,k=function(a){return b("React").jsx("h2",{className:b("joinClasses")("_4ebz","_6dxt"),children:a.children})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.state=babelHelpers["extends"]({},c.calculateState()),b)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("RTCCallStore")]};c.calculateState=function(){return{conferenceState:b("RTCCallStore").getState().callInfo.conferenceState}};var d=c.prototype;d.componentDidMount=function(){var a=this.props,c=a.conferenceName;a=a.isGroupCall;b("RTWebUserActionLogger").logImpression({surface:"audio_fallback_dialog",conferenceState:this.state.conferenceState,callType:b("RTWebUserActionLogger").getCallType(a),conferenceName:c})};d.render=function(){if(this.state.conferenceState!=="TERMINATED")return b("React").jsxs(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:j,children:[b("React").jsx(k,{children:b("React").jsx(i,{children:h._("No se encuentra la c\u00e1mara")})}),b("React").jsx(b("MessengerDialogBody.react"),{className:"_233q",children:h._("Conecta la c\u00e1mara y actualiza la p\u00e1gina para activar el video. Si ya est\u00e1 conectada, vuelve a abrir el navegador.")}),b("React").jsx(b("MessengerDialogFooter.react"),{children:b("React").jsx(b("MessengerDialogButton.react"),{className:"_30vt _233r",label:h._("Aceptar"),onClick:this.props.onUnmount,type:"primary",use:"default"})})]});else return null};return c}(b("React").Component);e.exports=b("FluxContainer").create(a)}),null);
__d("RTCUserMediaErrorDialogController",["DOM","MessengerRTCUserMediaErrorDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";a={_container:b("DOM").create("div"),_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(this._container)},showMediaErrorDialog:function(a,c){var d=this;b("ReactDOM").render(b("React").jsx(b("MessengerRTCUserMediaErrorDialog.react"),{conferenceName:c,isGroupCall:a,onUnmount:function(){return d._onUnmount()}}),this._container)}};e.exports=a}),null);
__d("RTCMediaDevicesActions",["RTCAppDispatcher"],(function(a,b,c,d,e,f){"use strict";a={enumerate:function(a){b("RTCAppDispatcher").dispatch({type:"ENUMERATE_MEDIA_DEVICES",devices:a})}};e.exports=a}),null);
__d("RTCUserMediaRequestState",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({FULFILLED:null,PENDING:null,REJECTED:null});e.exports=a}),null);
__d("RTCDialogProvider.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialog:null},c.$1=function(a){c.setState({dialog:a})},c.$2=function(a){a===void 0&&(a=!1),a||c.setState({dialog:null})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getChildContext=function(){return{dialogShow:this.$1,dialogHide:this.$2}};d.render=function(){return b("React").jsxs("div",babelHelpers["extends"]({},this.props,{children:[this.props.children,this.state.dialog]}))};return c}(a);d.childContextTypes={dialogShow:c.func,dialogHide:c.func};e.exports=d}),null);
__d("RTCUserActivityProvider.react",["React","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").Children;a=b("React").PureComponent;var h=500;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=i(function(){window.clearTimeout(c.$1),c.props.onActive(),c.$1=window.setTimeout(c.props.onIdle,c.props.idleDelay)},h),b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return g.only(this.props.children)};d.componentDidMount=function(){window.addEventListener("mousemove",this.$2),window.addEventListener("keydown",this.$2),b("UserAgent").isBrowser("Mobile Safari")&&window.addEventListener("touchstart",this.$2),this.$2()};d.componentWillUnmount=function(){window.removeEventListener("mousemove",this.$2),window.removeEventListener("keydown",this.$2),b("UserAgent").isBrowser("Mobile Safari")&&window.removeEventListener("touchstart",this.$2),window.clearTimeout(this.$1),this.$2.cancel()};return c}(a);c.defaultProps={idleDelay:3e3};function i(a,b){__p&&__p();b===void 0&&(b=100);var c=0,d=null,e=function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=Date.now(),i=function(){c=h,a.apply(void 0,f)};c&&h<c+b?(window.clearTimeout(d),d=window.setTimeout(i,b)):i()};e.cancel=function(){return window.clearTimeout(d)};return e}e.exports=c}),null);
__d("RTCExpressionWWWLogger",["invariant","FBRTCConsoleLogger","FBRTCParticipantCallState","RtcExpressionWWWTypedLogger","immutable","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;a=function(){__p&&__p();function a(){this.$1=h()}var c=a.prototype;c.logStartTimer=function(a){var c=b("performanceNow")(),d=a.rtcExpressionIntent;this.$1=this.$1.set(d,c);a.rtcExpressionAction="enabled";this.logEvent(a);this.$2(d,{startTime:c})};c.$3=function(a){var c=this.$1.get(a);c||g(0,2586);this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)};c.logStopTimer=function(a){var b=a.rtcExpressionIntent;b=this.$3(b);a.rtcExpressionDuration=b;a.rtcExpressionAction="disabled";this.logEvent(a);return b};c.logEvent=function(a){var c=new(b("RtcExpressionWWWTypedLogger"))().setCallID(a.callID||123).setConferenceName(a.conferenceName).setPeerID(a.peerID).setRawClientTime(b("performanceNow")()).setRtcExpressionAction(a.rtcExpressionAction).setRtcExpressionDuration(a.rtcExpressionDuration).setRtcExpressionID(a.rtcExpressionId).setRtcExpressionIntent(a.rtcExpressionIntent).setRtcExpressionName(a.rtcExpressionName).setRtcExpressionParticipantCount(a.rtcExpressionParticipantCount).setRtcExpressionType(a.rtcExpressionType),d=c.getData();this.$2(a.rtcExpressionName,d);c.log()};c.getExpressionLoggerInfoFromStore=function(a){var c=a.callInfo,d=c.callID;c=c.conferenceName;a=a.remoteUsers;a=a.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size+1;return{callID:d,conferenceName:c,rtcExpressionParticipantCount:a}};c.$2=function(a,b){};return a}();e.exports=new a()}),null);
__d("RTCCoExperienceReducer",["RTCCallActionTypes","RTCCallStore","RTCCoExperienceActionTypes","RTCCoExperienceStore","RTCExpressionWWWLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case"TOGGLE_CHAT_WINDOW":c=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState());a.chatWindowVisible?b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:"chat"})):b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:"chat"}));return a.set("chatWindowVisible",!a.chatWindowVisible);default:return a}}function c(a,c){__p&&__p();switch(c.type){case"HANGUP":case"END_CALL":case"HANGUP_ERROR":case"HANGUP_SUCCESS":case"SET_FILTER":var d=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState()),e=a.currentVideoFilter,f=a.videoFilterHistory;if(e){var g=b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},d,{rtcExpressionName:e,rtcExpressionIntent:"effect"})),h=f.get(e)||0;f=f.set(e,h+g);b("RTCCoExperienceStore").logCoExperienceDurationToSummary(f)}c.filter&&b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},d,{rtcExpressionName:c.filter,rtcExpressionIntent:"effect"}));return a.set("currentVideoFilter",c.filter).set("videoFilterHistory",f);default:return a}}e.exports={processChatWindowToggle:a,processSetVideoFilter:c}}),null);
__d("RTCCoExperienceStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={chatWindowVisible:!1,currentVideoFilter:null,videoFilterHistory:b("immutable").Map()};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("RTCCoExperienceStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCCallStore","RTCCoExperienceReducer","RTCCoExperienceStoreState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCCoExperienceReducer").processChatWindowToggle,b("RTCCoExperienceReducer").processSetVideoFilter];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCCoExperienceStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};d.logCoExperienceDurationToSummary=function(a){var c=b("RTCCallStore").getState();c=c.callSummary;c.setEffectCount(a.size);var d=0;a.reduce(function(a,b){d+=b},0);c.setTotalVideoFilterDuration(d);c.setCoExperienceEffectDuration(d);c.save(b("FBRTCCallSummaryStore").getInstance())};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCMediaDevicesStore",["FBRTCConsoleLogger","FluxReduceStore","RTCAppDispatcher","RTCMediaDevices","RTCMediaDevicesActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("RTCAppDispatcher"))||this;c.$RTCMediaDevicesStore1();b("RTCMediaDevices").addEventListener("devicechange",c.$RTCMediaDevicesStore1);return c}var d=c.prototype;d.$RTCMediaDevicesStore1=function(){b("RTCMediaDevices").enumerateDevices().then(function(a){return b("RTCMediaDevicesActions").enumerate(a)})["catch"](function(a){})};d.getInitialState=function(){return null};d.reduce=function(a,b){var c=b.type;b=b.devices;switch(c){case"ENUMERATE_MEDIA_DEVICES":return[].concat(b);default:return a}};d.refresh=function(){this.$RTCMediaDevicesStore1()};d.getByLabel=function(a,b){var c=this.getState();return!c?null:c.find(function(c){return c.kind===b&&c.label===a})||c.find(function(c){return c.kind===b&&h(c.label,a)})};return c}(b("FluxReduceStore"));a.__moduleID=e.id;var g=/#\d+\s(\([\da-f]{4}:[\da-f]{4}\))$|\s#\d+$/;function h(a,b){return a.replace(g,"$1")===b.replace(g,"$1")}e.exports=new a()}),null);
__d("RTCUserSettingsReducers",["RTCMediaDevicesStore"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){switch(b.type){case"USER_SETTINGS_EDIT":return a.set("editing",!0);case"USER_SETTINGS_CANCEL_EDITING":return a.set("editing",!1);case"USER_SETTINGS_SAVE":return a.set("audioInput",b.audioInput).set("audioOutput",b.audioOutput).set("editing",!1).set("videoInput",b.videoInput);case"USER_SETTINGS_SET_AUDIO_INPUT":return a.set("audioInput",b.audioInput);case"USER_SETTINGS_SET_AUDIO_OUTPUT":return a.set("audioOutput",b.audioOutput);case"USER_SETTINGS_SET_VIDEO_INPUT":return a.set("videoInput",b.videoInput);default:return a}}function c(a,b){switch(b.type){case"ADD_LOCAL_STREAM":return a.set("audioInput",g(b.stream.getAudioTracks()[0],"audioinput")||a.audioInput).set("videoInput",g(b.stream.getVideoTracks()[0],"videoinput")||a.videoInput);default:return a}}function g(a,c){if(!a)return null;a=b("RTCMediaDevicesStore").getByLabel(a.label,c);return a?a.deviceId:null}e.exports={activelySetSettings:a,passivelySetSettings:c}}),null);
__d("RTCUserSettingsStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({audioInput:null,audioOutput:null,editing:!1,videoInput:null}));e.exports=a}),null);
__d("RTCUserSettingsStore",["FluxReduceStore","RTCAppDispatcher","RTCUserSettingsReducers","RTCUserSettingsStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("RTCUserSettingsReducers").activelySetSettings,b("RTCUserSettingsReducers").passivelySetSettings];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.call(this,b("RTCAppDispatcher"))||this}var d=c.prototype;d.getInitialState=function(){return new(b("RTCUserSettingsStoreState"))()};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("RTCCallConnectionStatus.react",["cx","FBRTCCallTimer.react","FDSSpinner.react","React","RTWebStrings","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className"]);return b("React").jsx("div",babelHelpers["extends"]({className:b("joinClasses")(d,"_46la")},a,{children:c!=null?c:this.$2()}))};d.$2=function(){__p&&__p();switch(this.props.connectionStatus){case"CONTACTING":return b("RTWebStrings").contacting;case"RINGING":return b("RTWebStrings").ringing;case"CONNECTING":return b("RTWebStrings").connecting;case"ESCALATING_TO_BJN":return b("React").jsxs("div",{children:[b("RTWebStrings").pleaseWait,"  ",b("React").jsx(b("FDSSpinner.react"),{size:"small"})]});case"RECONNECTING":return b("RTWebStrings").reconnecting;case"CONNECTED":this.$1==null&&(this.$1=Math.floor(Date.now()/1e3));return b("React").jsx(b("FBRTCCallTimer.react"),{start:this.$1});case"DISCONNECTED":return b("RTWebStrings").callEnded;default:return null}};return c}(a);e.exports=c}),null);
__d("RTCFeedbackView.react",["cx","fbt","AbstractTextArea.react","FDSDropdownSelector.react","FDSDropdownSelectorOption.react","React","RTCCallActions","RTCDialog.react","RTCDialogBody.react","RTCDialogHeader.react","RTCDialogHeaderButton.react","RTWebClientFeatureGating","RTWebStrings","immutable","isStringNullOrEmpty","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PureComponent;function i(a){return b("React").jsxs(b("RTCDialogHeader.react"),{children:[b("React").jsx("h1",{className:"_10mm",children:h._("Enviar comentarios")}),b("React").jsx(b("RTCDialogHeaderButton.react"),{label:b("RTWebStrings").notNow,onClick:a.onCancel}),b("React").jsx(b("RTCDialogHeaderButton.react"),{disabled:!a.submitEnabled,label:h._("Enviar"),onClick:a.onSubmit})]})}var j=b("keyMirror")({AUDIO_ISSUE:null,VIDEO_ISSUE:null,DEVICE_ISSUE:null});function k(a){return a.keySeq().toArray().map(function(c){return b("React").jsx(b("FDSDropdownSelectorOption.react"),{value:c,children:a.get(c)},c)})}function l(a){return a.keySeq().toArray().map(function(c){return b("React").jsx(b("FDSDropdownSelectorOption.react"),{value:c,children:a.get(c)},c)})}function m(a){var c;c=a.isAudioCall?b("immutable").Map((c={},c[j.AUDIO_ISSUE]=h._("Problema con el sonido"),c[j.DEVICE_ISSUE]=h._("Problema con el dispositivo"),c)):b("immutable").Map((c={},c[j.AUDIO_ISSUE]=h._("Problema con el sonido"),c[j.VIDEO_ISSUE]=h._("Problema con el video"),c[j.DEVICE_ISSUE]=h._("Problema con el dispositivo"),c));var d={};d[j.AUDIO_ISSUE]=b("immutable").Map({audio_volume_low:h._("El volumen del dispositivo estaba demasiado bajo"),audio_no_audio:h._("No escuchaba ning\u00fan sonido"),audio_echo:h._("El sonido ten\u00eda eco"),audio_background_noise:h._("Hab\u00eda demasiado ruido de fondo"),audio_robotic:h._("El sonido se escuchaba rob\u00f3tico o estaba distorsionado"),audio_lagged:h._("El sonido estaba desfasado")});d[j.VIDEO_ISSUE]=b("immutable").Map({video_av_sync:h._("El sonido no coincid\u00eda con el video"),video_froze:h._("El video se interrumpi\u00f3"),video_blurry:h._("El video estaba borroso o pixelado"),video_no_video:h._("Ve\u00eda una pantalla negra en lugar del video"),video_cut_out:h._("El sonido se cortaba mientras el video segu\u00eda reproduci\u00e9ndose")});d[j.DEVICE_ISSUE]=b("immutable").Map({device_battery_drained:h._("La llamada agot\u00f3 la bater\u00eda del dispositivo"),device_temp_hot:h._("El dispositivo se recalent\u00f3"),device_slowed:h._("El dispositivo funcionaba lento durante la llamada")});return b("React").jsxs(b("RTCDialogBody.react"),{children:[b("RTWebClientFeatureGating").endCallSurveyDropdownOptions()?b("React").jsxs("div",{children:[b("React").jsx(b("FDSDropdownSelector.react"),{onChange:a.generalIssueOnChange,placeholder:h._("\u00bfCu\u00e1l fue el principal problema durante la llamada?"),value:a.generalIssueValue,children:k(c)}),b("React").jsx("br",{}),b("React").jsx("br",{}),a.generalIssueValue?b("React").jsxs("div",{children:[b("React").jsx(b("FDSDropdownSelector.react"),{onChange:a.specificIssuesOnChange,placeholder:h._("\u00bfQu\u00e9 problema tuviste?"),value:a.specificIssuesValue,children:l(d[a.generalIssueValue])}),b("React").jsx("br",{}),b("React").jsx("br",{})]}):null]}):null,b("React").jsx(b("AbstractTextArea.react"),{className:"_6162",onChange:a.textAreaOnChange,placeholder:h._("Describe el problema..."),value:a.textAreaValue})]})}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={generalIssue:null,feedbackMessage:null,specificIssues:null},d.$1=function(){d.props.rating!=null&&b("RTCCallActions").submitRating(d.props.rating),d.props.onDone()},d.$2=function(){d.props.rating!=null&&b("RTCCallActions").submitRating(d.props.rating),d.state.feedbackMessage&&b("RTCCallActions").submitFeedback(d.state.feedbackMessage),d.state.specificIssues?b("RTCCallActions").submitSurveyChoice(d.state.specificIssues):d.state.generalIssue&&b("RTCCallActions").submitSurveyChoice(d.state.generalIssue.toLowerCase()),d.props.onDone()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this;return b("React").jsx("section",{children:b("React").jsxs(b("RTCDialog.react"),{height:447,hideOnEscape:!1,label:"Video call feedback",layerHideOnBlur:!1,width:544,children:[b("React").jsx(i,{onCancel:this.$1,onSubmit:this.$2,submitEnabled:!b("isStringNullOrEmpty")(this.state.feedbackMessage)||!b("isStringNullOrEmpty")(this.state.generalIssue)&&!b("isStringNullOrEmpty")(this.state.specificIssues)}),b("React").jsx(m,{generalIssueOnChange:function(b){return a.setState({generalIssue:b})},generalIssueValue:this.state.generalIssue,isAudioCall:this.props.isAudioCall,specificIssuesOnChange:function(b){return a.setState({specificIssues:b})},specificIssuesValue:this.state.specificIssues,textAreaOnChange:function(b){return a.setState({feedbackMessage:b.target.value})},textAreaValue:this.state.feedbackMessage})]})})};return c}(a);e.exports=c}),null);
__d("RTCLogo.react",["cx","ix","CurrentUser","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={messenger:{color:h("28187"),mono:h("28188")},workplace:{color:h("28198"),mono:h("28199")}};a=function(a){var c=a.className,d=a.mode;d=d===void 0?"color":d;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","mode"]);var e=j();return b("React").jsx(b("Image.react"),babelHelpers["extends"]({alt:"",className:b("joinClasses")(c,"_4ytt"),src:i[e][d]},a))};function j(){return b("CurrentUser").isWorkUser()?"workplace":"messenger"}e.exports=a}),null);
__d("RTCRingBackTone.react",["FBRTCSoundController","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").Component;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isPlaying:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.active)};d.componentDidUpdate=function(){this.$1(this.props.active)};d.componentWillUnmount=function(){this.$2()};d.render=function(){if(this.props.active)return b("React").jsx("div",{display:"none",id:"RingTonePlaying"});else return null};d.$1=function(a){a?this.$3():this.$2()};d.$3=function(){this.state.isPlaying||this.setState({isPlaying:!0},function(){b("FBRTCSoundController").playRingbackTone()})};d.$2=function(){this.state.isPlaying&&(b("FBRTCSoundController").stopRingbackTone(),this.setState({isPlaying:!1}))};return c}(a);c.defaultProps={active:!1};e.exports=c}),null);
__d("RTCSVGIconCatalog",["React"],(function(a,b,c,d,e,f){"use strict";a={noCameraIcon:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsx("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z",fillRule:"evenodd"})}),noMicIcon:b("React").jsx("svg",{viewBox:"0 0 48 48",children:b("React").jsx("path",{d:"M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5-2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3zm-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5zm-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5-3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z"})})};e.exports=a}),null);
__d("RTCTextButton.react",["cx","AbstractButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["className"]);return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"_5lc4")},a))};e.exports=a}),null);
__d("RTCStarRating.react",["cx","fbt","FBRTCSupport","React","RTCCallActions","RTCCallStore","RTCFeedbackView.react","RTCStarRatingInput.react","RTCTextButton.react","RTWebStrings","RTWebUserActionLogger","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PureComponent;function i(a){return b("React").jsx("p",{className:a.isConfirmed?"_66tb":"_4a-c",children:a.ratingText})}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={confirmedRating:null,previewRating:null,promptFeedback:!1},d.$3=function(a){d.setState({previewRating:a})},d.$2=function(a){b("FBRTCSupport").isMobileDevice()&&d.state.previewRating!==a?d.setState({previewRating:a}):(b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:"star_rating",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"star_rating_surface"}),d.setState({confirmedRating:a}))},d.$5=function(){b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:"rating_not_now",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"star_rating_surface"}),d.props.onDone(),d.props.shouldCloseWindow&&window.close()},d.$6=function(){__p&&__p();b("RTWebUserActionLogger").logClick({callID:b("RTCCallStore").getState().callInfo.callID,component:"submit_feedback",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"star_rating_surface"});if(d.state.confirmedRating!=null){if(d.state.confirmedRating<=2){d.setState({promptFeedback:!0});return}b("RTCCallActions").submitRating(d.state.confirmedRating)}d.props.onDone();d.props.shouldCloseWindow&&window.close()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callID:b("RTCCallStore").getState().callInfo.callID,component:"star_rating",conferenceName:b("RTCCallStore").getState().callInfo.conferenceName,surface:"star_rating_surface"}),window.setTimeout(function(){return b("RTCCallActions").ratingShown()})};d.render=function(){return this.state.promptFeedback?b("React").jsx(b("RTCFeedbackView.react"),{isAudioCall:this.props.isAudioCall,onDone:this.props.onDone,rating:this.state.confirmedRating}):b("React").jsxs("section",{className:"_4a-a","data-testid":"starRatingView",children:[this.$1(),b("React").jsx(b("RTCStarRatingInput.react"),{className:"_4a-b",onClick:this.$2,onHover:b("FBRTCSupport").isMobileDevice()?b("emptyFunction"):this.$3,rating:this.state.previewRating||this.state.confirmedRating}),b("React").jsx(i,{isConfirmed:this.state.confirmedRating!=null&&(this.state.previewRating==null||this.state.previewRating==this.state.confirmedRating),ratingText:c.SelectedRatingLabelText(this.state.previewRating||this.state.confirmedRating)}),this.$4()]})};d.$1=function(){var a=this.props.isAudioCall?h._("Califica la calidad de la llamada de audio"):h._("Califica la calidad de la videollamada");return b("React").jsx("p",{className:"_4a-d",children:a})};d.$4=function(){var a=this.props,c=a.isAudioCall;a=a.isGroupCall;return this.state.confirmedRating===null?b("React").jsx(b("RTCTextButton.react"),{className:"_4a-e hollow"+(!c&&!a?" white":"")+(c||a?" blue":""),"data-testid":"starRatingNotNowButton",label:b("RTWebStrings").notNow,onClick:this.$5}):b("React").jsx(b("RTCTextButton.react"),{className:"_4a-e"+(!c&&!a?" white":"")+(c||a?" blue":""),"data-testid":"submitStarRatingButton",label:h._("Enviar"),onClick:this.$6})};c.SelectedRatingLabelText=function(a){__p&&__p();var b="";switch(a){case 1:b=h._("Mala");break;case 2:b=h._("Aceptable");break;case 3:b=h._("Buena");break;case 4:b=h._("Muy buena");break;case 5:b=h._("Excelente");break}return b};return c}(a);c.defaultProps={shouldCloseWindow:!1};e.exports=c}),null);
__d("RTCStarRatingInput.react",["cx","React","RTCStarRating.react","RTCSVGIcon.react","TooltipLink.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;var h="STAR_DATA_ID_";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={starsShown:null},c.$3=function(){c.setState({starsShown:null}),c.props.onHover(null)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.props.rating,d=this.state.starsShown,e=d!=null?d:c||0;d=Array.from({length:this.props.count}).map(function(c,d){return b("React").jsx(b("TooltipLink.react"),{alignH:"center",className:"_2r1w","data-testid":h+d,onClick:function(){return a.$1(d+1)},onMouseEnter:function(){return a.$2(d+1)},onMouseLeave:a.$3,position:"above",children:b("React").jsx(i,{"aria-label":b("RTCStarRating.react").SelectedRatingLabelText(d+1),selected:d<e})},d)});return b("React").jsx("div",{className:b("joinClasses")("_2r1x",this.props.className),children:d})};d.$2=function(a){this.setState({starsShown:a}),this.props.onHover(a)};d.$1=function(a){this.props.onClick(a)};return c}(a);c.defaultProps={count:5};var i=function(a){a.className;var c=a.selected;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","selected"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({className:"_2r1y"},a,{children:b("React").jsx("svg",{viewBox:"0 0 25 23",children:b("React").jsx("path",{d:"M12.1 1L9.5 9H1l6.9 5-2.7 8 6.9-5 6.8 5-2.6-8 6.8-5h-8.5z",fill:c?"":"none"})})}))};e.exports=c}),null);
__d("RTCThreadInfo.react",["cx","CurrentUser","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadTitle_DEPRECATED.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","RTCCallTitle.react"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerProfileImageWrapperReact.bs").jsComponent,i=b("MessengerThreadImageReact.bs").jsComponent;a=function(a){var c=a.participants;a=a.thread;return b("React").jsxs("div",{className:"_dzr",children:[a&&a.image_src?b("React").jsx(i,{className:"_dzs",participants:c,size:100,thread:a,viewer:b("CurrentUser").getID()}):b("React").jsx(h,{className:"_4j_j",showBadge:!1,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,children:b("React").jsx(b("MercuryParticipantsImage.react"),{participants:Object.keys(c.toJS()),size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE})}),a&&a.name?b("React").jsx(b("MercuryThreadTitle_DEPRECATED.react"),{className:"_dzt",thread:a,viewer:b("CurrentUser").getID()}):b("React").jsx(b("RTCCallTitle.react"),{className:"_dzt",participants:c,viewer:b("CurrentUser").getID()})]})};e.exports=a}),null);
__d("RTCElementResizeListener.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){c.$1=a&&a.getDOMNode?a.getDOMNode():a},c.$4=function(a){a&&a.contentWindow?a.contentWindow.addEventListener("resize",c.$5,!1):c.$2&&c.$2.contentWindow&&c.$2.contentWindow.removeEventListener("resize",c.$5,!1),c.$2=a},c.$5=h(function(a){a=a.target;var b=c.props.onResize;b&&a&&b({height:a.innerHeight,width:a.innerWidth})},32),b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getDOMNode=function(){return this.$1};d.render=function(){var a=this.props,c=a.children,d=a.className,e=a.component,f=a.onResize;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","component","onResize"]);return b("React").jsxs(e,babelHelpers["extends"]({className:b("joinClasses")("_3u0-",d),ref:this.$3},a,{children:[c,f?b("React").jsx("iframe",{className:"_3u11",ref:this.$4}):null]}))};d.componentDidMount=function(){this.$2&&this.$5({target:this.$2.contentWindow})};d.componentDidUpdate=function(a){var b=this.props.onResize;this.$2&&b&&b!==a.onResize&&this.$5({target:this.$2.contentWindow})};d.componentWillUnmount=function(){this.$2&&this.$2.contentWindow&&this.$2.contentWindow.removeEventListener("resize",this.$5,!1),this.$5.cancel()};return c}(a);c.defaultProps={component:"div"};function h(a,b){var c=0,d=null,e=function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=Date.now();c&&h<c+b?(window.clearTimeout(d),d=window.setTimeout(function(){c=h,a.apply(void 0,f)},b)):(c=h,a.apply(void 0,f))};e.cancel=function(){return window.clearTimeout(d)};return e}e.exports=c}),null);
__d("RTCCallControls.react",["cx","React","RTCElementResizeListener.react","RTCUserActivityProvider.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasFocus:!1,isMouseActive:!0},c.$6=function(a){c.$1=a&&a.getDOMNode?a.getDOMNode():a},c.$2=function(){c.setState({isMouseActive:!0}),c.$7(!0)},c.$3=function(){c.setState({isMouseActive:!1}),c.$7(!1)},c.$5=function(){c.setState({hasFocus:!0})},c.$4=function(){c.setState({hasFocus:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getDOMNode=function(){return this.$1};d.render=function(){var a=this.props,c=a.children,d=a.className,e=a.compact;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","compact"]);return b("React").jsx(b("RTCUserActivityProvider.react"),{onActive:this.$2,onIdle:this.$3,children:b("React").jsx(b("RTCElementResizeListener.react"),babelHelpers["extends"]({className:b("joinClasses")("_2eaq"+(e?" compact":"")+(!this.props.autoHide||this.state.isMouseActive||this.state.hasFocus?" visible":""),d),component:"section","data-testid":"CallControls",onBlur:this.$4,onFocus:this.$5,ref:this.$6},a,{children:c}))})};d.$7=function(a){this.props.onUpdateVisibility&&this.props.onUpdateVisibility(a)};return c}(a);c.defaultProps={autoHide:!0,compact:!1};e.exports=c}),null);
__d("RTCCallControlsButtonWithLabel.react",["cx","React","RTCAbstractButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=babelHelpers["extends"]({},this.props);return b("React").jsxs("div",{className:"_6-lr",children:[b("React").jsx(b("RTCAbstractButton.react"),babelHelpers["extends"]({"data-hover":"none",labelIsHidden:!0},a)),b("React").jsx("div",{className:"_6-ls",children:this.props.title})]})};return c}(b("React").PureComponent);a.defaultProps={highlighted:!1,disabled:!1,labelIsHidden:!0,shouldThrottle:!0};e.exports=a}),null);
__d("RTCChatPanelIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 50 50",children:b("React").jsx("path",{d:"M24.999,35.9861483 C23.837,35.9861483 22.73,35.8825981 21.6915,35.6289751 C20.828,35.4183729 19.9265,35.4398834 19.0845,35.7270226 L15.083,36.9551183 C14.4385,37.175225 13.813,36.5489213 14.0315,35.8795966 L14.826,33.2498212 C15.1235,32.3378789 15.008,31.3373937 14.5085,30.5224984 C13.4515,28.7971616 13.0005,26.7361621 13,24.4545555 C13.001,17.7953257 18.0255,13 24.999,13 C31.973,13 36.9975,17.7953257 36.9985,24.4525545 C36.9975,31.1122845 31.973,35.9861483 24.999,35.9861483 Z",id:"path-1"})})}))};e.exports=a}),null);
__d("RTCCallControlsChatButton.react",["cx","fbt","FluxContainer","React","RTCCallControlsButton.react","RTCChatPanelIcon.react","RTCCoExperienceActions","RTCCoExperienceStore","RTWebClientFeatureGating","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"toggle_chat",conferenceState:this.props.conferenceState,surface:"call_controls"})};d.render=function(){var a=this;return b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")("transparent icon-50 _3n07",this.props.className),"data-testid":"toggleChatButton",onClick:function(){return a.$1()},title:h._("Abrir chat"),children:b("React").jsx(b("RTCChatPanelIcon.react"),{})})};d.$1=function(){b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"toggle_chat",conferenceState:this.props.conferenceState,surface:"call_controls"}),b("RTCCoExperienceActions").toggleChatWindow()};return a}(b("React").PureComponent);a=b("FluxContainer").createFunctional(function(a){var c=a.isP2P?b("RTWebClientFeatureGating").isChatEnabled():b("RTWebClientFeatureGating").isGroupChatEnabled();return c&&!a.chatWindowVisible?b("React").jsx(i,{conferenceState:a.conferenceState,isP2P:a.isP2P}):null},function(){return[b("RTCCoExperienceStore")]},function(a,c,d){return babelHelpers["extends"]({},c,{chatWindowVisible:b("RTCCoExperienceStore").getState().chatWindowVisible})},{withProps:!0});e.exports=a}),null);
__d("RTCCallControlsCloseWindowButton.react",["cx","React","RTCCallControlsButton.react","RTCCallControlsButtonWithLabel.react","RTCUIXIcon.react","RTWebStrings","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.className;a=a.label;return b("React").jsx(h,{className:b("joinClasses")("closeWindow icon-48",c),label:(c=a)!=null?c:b("RTWebStrings").close,onClick:function(){return window.close()},children:b("React").jsx(b("RTCUIXIcon.react"),{})})};var h=function(a){var c=a.children,d=a.className,e=a.label;a=a.onClick;return e!=null?b("React").jsx(b("RTCCallControlsButtonWithLabel.react"),{className:d,"data-testid":"closeCallWindowButton",onClick:a,title:e,children:c}):b("React").jsx(b("RTCCallControlsButton.react"),{className:d,"data-testid":"closeCallWindowButton",onClick:a,title:e,children:c})};e.exports=a}),null);
__d("RTCCallControlsDisappearingNUX.react",["FBRTCCallControlPopover.react","React","RTCCallControlsButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=3e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showNux:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){return this.state.showNux?b("React").jsx(b("FBRTCCallControlPopover.react"),{alignment:this.props.alignment,body:this.props.label,className:this.props.className,label:this.props.label,referenceElement:this.props.referenceElement,shown:!0,title:null}):null};d.componentDidMount=function(){var a=this;window.setTimeout(function(){a.setState({showNux:!1})},g)};return c}(b("React").PureComponent);a.defaultProps={showNux:!0};e.exports=a}),null);
__d("RTCUIDominantSpeakerLayoutIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.shadow;a=babelHelpers.objectWithoutPropertiesLoose(a,["shadow"]);return c?b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsxs("svg",{viewBox:"0 0 50 50",children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:b("React").jsx(g,{})})]})})):b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 50 50",children:b("React").jsx(g,{})})}))};return c}(b("React").PureComponent);a.defaultProps={shadow:!1};var g=function(){return b("React").jsx("path",{d:"M16.5 14.5h17a2 2 0 0 1 2 2v17a2 2 0 0 1-2 2h-17a2 2 0 0 1-2-2v-17a2 2 0 0 1 2-2zm0 2h17v11h-17zm0 13h4v4h-4zm6.5 0h4v4h-4zm6.5 0h4v4h-4z",fillRule:"evenodd"})};e.exports=a}),null);
__d("RTCCallControlsDominantSpeakerSwitchButton.react",["cx","fbt","FBRTCConstants","React","RTCCallControlsButton.react","RTCGroupCallActions","RTCUIDominantSpeakerLayoutIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCCallControlsButton.react"),{className:"transparent icon-50","data-testid":"dominantSpeakerSwitchButton",onClick:this.$1,title:h._("Cambiar a vista de orador principal"),children:b("React").jsx(b("RTCUIDominantSpeakerLayoutIcon.react"),{shadow:!0})})};d.$1=function(){b("RTCGroupCallActions").setLayout(i.DOMINANT_SPEAKER)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCUIPhoneIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.variant;c=c===void 0?"start call":c;a=babelHelpers.objectWithoutPropertiesLoose(a,["variant"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:c==="start call"?b("React").jsx("path",{d:"M32.3 33.3c-4.2 3.5-12.6-4.7-12.8-4.9C19.4 28.3 10.9 20 14.5 15.9C17.2 12.8 17.9 14 18.3 14.3c.3 .3 2.9 4 3 4.7C21.5 19.7 20 21.5 20 22.1c.1 .6 1.8 2.5 2.6 3.3c.7 .7 2.7 2.4 3.3 2.5c.6 .1 2.4-1.4 3.1-1.3c.8 .1 4.5 2.7 4.8 3C34.2 29.9 35.4 30.7 32.3 33.3"}):b("React").jsx("path",{d:"M12.054 24.58C12.52 19.102 24.34 19.002 24.54 19c.202 0 12.024-.1 12.408 5.37.284 4.048-1.092 3.74-1.56 3.778-.41.033-4.823-.767-5.452-1.19-.63-.422-.785-2.703-1.293-3.094-.507-.39-3.092-.51-4.134-.502-1.043.01-3.63.174-4.143.572-.513.4-.702 2.683-1.337 3.117-.636.434-5.062 1.31-5.47 1.283-.47-.03-1.85.3-1.506-3.753"})})}))};e.exports=a}),null);
__d("RTCCallControlsEndCallButton.react",["cx","fbt","AlignmentEnum","React","RTCCallControlsButton.react","RTCCallControlsDisappearingNUX.react","RTCHotKeys","RTCHotKeysConfig","RTCUIPhoneIcon.react","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("RTCHotKeysConfig").RTCHotKey;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(){b("RTWebUserActionLogger").logClick({component:"end_call_button",surface:"call_controls"}),d.props.onClick&&d.props.onClick()},d.$3=function(){window.confirm(h._("\u00bfQuieres finalizar la llamada?"))&&d.$4()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({component:"end_call_button",surface:"call_controls"}),this.$1=b("RTCHotKeys").register(i.END_CALL,this.$3)};d.componentWillUnmount=function(){this.$1&&this.$1.remove()};d.render=function(){var a=this;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")("opaque endCall icon-48",this.props.className),"data-testid":"endCallButton",disabled:this.props.disabled,onClick:this.$4,ref:function(b){return a.$2=b},title:h._("Finalizar llamada"),children:b("React").jsx(b("RTCUIPhoneIcon.react"),{variant:"end call"})}),this.props.showNux?b("React").jsx(b("RTCCallControlsDisappearingNUX.react"),{alignment:this.props.nuxAlignment,className:"_26bw",label:h._("Haz clic para salir cuando quieras"),referenceElement:this.$2}):null]})};return c}(b("React").PureComponent);a.defaultProps={showNux:!1,nuxAlignment:b("AlignmentEnum").center};e.exports=a}),null);
__d("RTCUIGridLayoutIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.shadow;a=babelHelpers.objectWithoutPropertiesLoose(a,["shadow"]);return c?b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsxs("svg",{viewBox:"0 0 50 50",children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:b("React").jsx(g,{})})]})})):b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 50 50",children:b("React").jsx(g,{})})}))};return c}(b("React").PureComponent);a.defaultProps={shadow:!1};var g=function(){return b("React").jsx("path",{d:"M16.5 14.5h17a2 2 0 0 1 2 2v17a2 2 0 0 1-2 2h-17a2 2 0 0 1-2-2v-17a2 2 0 0 1 2-2zm0 2H24V24h-7.5zm9.5 0h7.5V24H26zM16.5 26H24v7.5h-7.5zm9.5 0h7.5v7.5H26z",fillRule:"evenodd"})};e.exports=a}),null);
__d("RTCCallControlsGridSwitchButton.react",["cx","fbt","FBRTCConstants","React","RTCCallControlsButton.react","RTCGroupCallActions","RTCUIGridLayoutIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCCallControlsButton.react"),{className:"transparent icon-50","data-testid":"gridSwitchButton",onClick:this.$1,title:h._("Cambiar a vista de cuadr\u00edcula"),children:b("React").jsx(b("RTCUIGridLayoutIcon.react"),{shadow:!0})})};d.$1=function(){b("RTCGroupCallActions").setLayout(i.GRID)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCUIRosterIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{height:"22",viewBox:"0 0 60 44",width:"30",children:b("React").jsx("g",{fill:"#FFF",fillRule:"evenodd",transform:"translate(12,4)",children:b("React").jsx("path",{d:"M14.9797896 20.4724735c.4975058.1515207.7025082.8041097.3605042 1.2181661-1.1630136 1.4061918-1.8405215 3.1129245-1.8405215 4.9756785v.014502C13.5022724 27.398918 12.9987665 28 12.3252586 28H4.3121651c-.7265085 0-1.3230155-.6345865-1.3120154-1.4091922.0530007-3.6474973 3.9475461-6.5918989 8.7496022-6.5918989 1.1420133 0 2.231026.1690231 3.2300377.4735646m-3.2300377-1.9682684c-2.6275307 0-4.368051-2.0342774-4.710055-4.7246443-.342004-.1950265-.5435063-.6485884-.5435063-1.2786743 0-.5975815.182502-1.0321408.4925057-1.2421694.0765009-2.6783652.8995105-4.6761377 1.7760207-4.6761377.8660102 0 1.194014.285039 1.194014.285039 0-.542074.3645042-.865118 1.7910209-.865118 3.4880407 0 4.6865547 1.8092467 4.7680557 5.2607173.3055035.2120289.4855056.645088.4855056 1.2376688 0 .6300859-.2015023 1.0836478-.5435063 1.2786743-.342004 2.6903669-2.0825243 4.7246443-4.710055 4.7246443zM33 26.6663181C33 27.4029186 32.3774927 28 31.6874847 28H16.812311c-.6905081 0-1.3125153-.5970814-1.3125153-1.3336819 0-3.6825021 3.9150457-6.6674092 8.7501021-6.6674092C29.0844543 19.9989089 33 22.983816 33 26.6663181zm-4.3165504-9.1627494c-.6345074 0-1.2080141-.065509-1.7245201-.1665227-.683008.7145974-1.6430192 1.1616584-2.7090317 1.1616584-.9965116 0-1.8995221-.3915534-2.57153-1.0256399-.1270015.0180025-.258003.0305042-.3965046.0305042-1.627019 0-2.7820325-2.5198436-2.7820325-5.2667182 0-2.632359 2.5390296-5.7617857 4.0000467-5.7617857.6105071 0 1.0950128.241533 1.0950128.241533C23.9998949 6.3695503 24.4309 6 25.4454118 6c1.9345226 0 5.054559 3.0254126 5.054559 6.2368505 0 1.4296949-.5000058 2.1732963-.5000058 2.8698913 0 1.1766605.9965116 1.0806474.9965116 1.5502114 0 .3895531-.9360109.8466155-2.313027.8466155z"})})})}))}e.exports=a}),null);
__d("RTCCallControlsParticipantsRosterButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCGroupCallDialogController","RTCUIRosterIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";function a(){return b("React").jsx(b("RTCCallControlsButton.react"),{className:"semiopaque icon-48",onClick:i,title:h._("Mostrar participantes de la llamada"),children:b("React").jsx(b("RTCUIRosterIcon.react"),{})})}function i(){b("RTCGroupCallDialogController").showParticipantsRoster()}e.exports=a}),null);
__d("RTCCallControlsRosterButton.react",["cx","fbt","FBRTCConstants","React","RTCCallControlsButton.react","RTCMobileGroupCallDialogController","RTCUIRosterIcon.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("FBRTCConstants").GroupVideoViewLayout;function a(a){return a.connectedRemoteUsersSize===0?null:b("React").jsxs("div",{className:"_4uwq _720p",children:[b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")(a.className,"semiopaque icon-48"),highlighted:!1,onClick:j,title:h._("Ver participantes"),children:b("React").jsx(b("RTCUIRosterIcon.react"),{})}),!a.isP2P&&a.layout===i.DOMINANT_SPEAKER&&b("React").jsx("div",{className:"_720q",children:1+a.connectedRemoteUsersSize})]})}function j(){b("RTCMobileGroupCallDialogController").showRoster()}e.exports=a}),null);
__d("RTCUIMicrophoneIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.shadow,d=a.strikeThrough;a=babelHelpers.objectWithoutPropertiesLoose(a,["shadow","strikeThrough"]);return c?b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsxs("svg",{viewBox:"0 0 48 48",children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:d?b("React").jsx(g,{}):b("React").jsx(h,{})})]})})):b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:d?b("React").jsx(g,{}):b("React").jsx(h,{})})}))};return c}(b("React").PureComponent);a.defaultProps={shadow:!1,strikeThrough:!1};var g=function(){return b("React").jsx("path",{d:"M25 31c.7-.1 1.3-.3 1.9-.6l-.5-.9c-.6.3-1.2.5-1.9.5-2.5 0-4.5-2.2-4.5-5v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3zm-.5-2c.5 0 1-.1 1.4-.3L21 20.6v4.9c0 1.9 1.6 3.5 3.5 3.5zm-5.8-16l-.9.5L30.3 34l.9-.5L18.7 13zM30 25.2V20h-1v5c0 .8-.2 1.6-.5 2.2l.6 1c.6-.8.9-1.9.9-3zm-2 .3v-9c0-1.9-1.6-3.5-3.5-3.5-1.5 0-2.7.9-3.2 2.2L28 26.3v-.8z"})},h=function(){return b("React").jsx("path",{d:"M29 20v5c0 2.7-2 5-4.5 5S20 27.8 20 25v-5h-1v5.2c0 3.1 2.2 5.6 5 5.8v3h-3v1h7v-1h-3v-3c2.8-.3 5-2.8 5-5.8V20h-1zm-4.5 9c1.9 0 3.5-1.6 3.5-3.5v-9c0-1.9-1.6-3.5-3.5-3.5S21 14.6 21 16.5v9c0 1.9 1.6 3.5 3.5 3.5z"})};e.exports=a}),null);
__d("RTCCallControlsToggleAudioButton.react",["cx","fbt","React","RTCCallActions","RTCCallControlsButton.react","RTCHotKeys","RTCHotKeysConfig","RTCUIM4MicrophoneIcon.react","RTCUIMicrophoneIcon.react","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("RTCHotKeysConfig").RTCHotKey;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){b("RTWebUserActionLogger").logClick({component:"toggle_audio",surface:"call_controls"}),b("RTCCallActions").toggleMuteAudio(d.props.audioMuted)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({component:"toggle_audio",surface:"call_controls"}),this.$1=b("RTCHotKeys").register(i.TOGGLE_MUTE_AUDIO,this.$2)};d.componentWillUnmount=function(){this.$1&&this.$1.remove()};d.render=function(){var a=this.props,c=a.audioMuted,d=a.className,e=a.disabled;a=a.isM4;return b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")(d,"semiopaque icon-48"),"data-testid":"toggleAudioButton",disabled:e,highlighted:c,onClick:this.$2,title:c?h._("Reactivar micr\u00f3fono"):h._("Silenciar micr\u00f3fono"),children:a===!0?b("React").jsx(b("RTCUIM4MicrophoneIcon.react"),{strikeThrough:c||e}):b("React").jsx(b("RTCUIMicrophoneIcon.react"),{strikeThrough:c||e})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCUIFullscreenIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.direction,d=a.shadow;a=babelHelpers.objectWithoutPropertiesLoose(a,["direction","shadow"]);return d?b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsxs("svg",{viewBox:"0 0 50 50",children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:b("React").jsx(g,{direction:c})})]})})):b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 50 50",children:b("React").jsx(g,{direction:c})})}))};return c}(b("React").PureComponent);a.defaultProps={shadow:!1};var g=function(a){a=a.direction;return a==="in"?b("React").jsx("path",{d:"M25.8 24.2c.2.2.4.3.7.3h6c.5 0 1-.4 1-1s-.4-1-1-1h-3.6l4.8-4.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0l-4.8 4.8v-3.6c0-.5-.4-1-1-1s-1 .4-1 1v6c0 .3.1.5.3.7zM24.2 25.8c.2.2.3.5.3.8v6c0 .6-.4 1-1 1s-1-.5-1-1V29l-4.8 4.7c-.4.4-1 .4-1.4 0s-.4-1 0-1.4l4.8-4.8h-3.6c-.6 0-1-.4-1-1s.5-1 1-1h6c.3 0 .5.1.7.3z"}):b("React").jsx("path",{d:"M33.7 16.3c-.2-.2-.4-.3-.7-.3h-6c-.5 0-1 .4-1 1s.4 1 1 1h3.6l-4.8 4.8c-.4.4-.4 1 0 1.4s1 .4 1.4 0l4.8-4.8V23c0 .5.4 1 1 1s1-.4 1-1v-6c0-.3-.1-.5-.3-.7zM16.3 33.7c-.2-.2-.3-.4-.3-.7v-6c0-.5.4-1 1-1s1 .4 1 1v3.6l4.8-4.8c.4-.4 1-.4 1.4 0s.4 1 0 1.4L19.5 32h3.6c.5 0 1 .4 1 1s-.4 1-1 1h-6c-.3 0-.6-.1-.8-.3z"})};e.exports=a}),null);
__d("RTCUIM4FullscreenIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{height:"36px",viewBox:"0 0 36 36",width:"36px",children:b("React").jsx("g",{transform:"translate(9, 9)",children:a.direction==="out"?b("React").jsx("path",{d:"M5.06543333,13.2112667 L6.47943333,14.6249333 C6.85576667,15.0012667 6.6601,15.6452667 6.1381,15.7499333 L1.46443333,16.6532667 C0.9981,16.7466 0.586766667,16.3359333 0.680433333,15.8696 L1.5841,11.1976 C1.68876667,10.6756 2.33343333,10.4802667 2.70976667,10.8566 L4.1231,12.2696 L6.86576667,9.52526667 C7.1261,9.26526667 7.54776667,9.26526667 7.8081,9.52526667 C8.0681,9.7856 8.0681,10.2069333 7.8081,10.4672667 L5.06543333,13.2112667 Z M16.6533013,1.46393333 L15.7500361,6.1356 C15.6452614,6.65793333 15.0012637,6.85326667 14.6248754,6.47693333 L13.211751,5.06393333 L10.4699225,7.80793333 C10.2099877,8.06793333 9.78821926,8.06793333 9.52828444,7.80793333 C9.26834963,7.54793333 9.26834963,7.12626667 9.52828444,6.86626667 L12.2701129,4.12193333 L10.8566548,2.70826667 C10.4802665,2.33193333 10.6758016,1.68826667 11.1976732,1.58326667 L15.869159,0.679933333 C16.3359739,0.586266667 16.746731,0.997266667 16.6533013,1.46393333 Z"}):b("React").jsx("path",{d:"M7.08336945,14.8000994 C6.9785947,15.3218852 6.33459702,15.5171384 5.95820874,15.1409595 L4.54541798,13.7285391 L1.80358951,16.4717467 C1.54332102,16.73164 1.12188627,16.73164 0.861617778,16.4717467 C0.601682963,16.2115201 0.601682963,15.7903596 0.861617778,15.5301331 L3.60344624,12.7872587 L2.18998812,11.374172 C1.81359984,10.997993 2.00913489,10.3542572 2.53100658,10.2496335 L7.20249234,9.34667072 C7.66930724,9.25337567 8.08006431,9.66387387 7.98663459,10.1300159 L7.08336945,14.8000994 Z M16.4717376,1.80320271 L13.730068,4.54590401 L15.1438872,5.95929607 C15.5197505,6.3353331 15.3244882,6.97896702 14.8023447,7.08373687 L10.1307105,7.98662613 C9.66421346,8.08005148 9.25336289,7.66964727 9.34666229,7.20318785 L10.2500004,2.53325508 C10.354629,2.01140778 10.9990613,1.81621553 11.3752578,2.19225256 L12.7880773,3.60464363 L15.53008,0.861608666 C15.7899855,0.601686 16.2118321,0.601686 16.4717376,0.861608666 C16.731643,1.12186499 16.731643,1.54294639 16.4717376,1.80320271 Z"})})})}))}e.exports=a}),null);
__d("RTCCallControlsToggleFullScreenButton.react",["cx","fbt","FBRTCVersionDetection","React","RTCCallControlsButton.react","RTCHotKeys","RTCHotKeysConfig","RTCUIFullscreenIcon.react","RTCUIM4FullscreenIcon.react","RTCUtils","RTWebUserActionLogger","debounce","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("RTCHotKeysConfig").RTCHotKey,j=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={highlighted:!1},d.$3=function(a){d.setState({highlighted:!0}),d.$1=window.setTimeout(function(){return d.setState({highlighted:!1})},100),b("RTWebUserActionLogger").logClick({component:b("RTCUtils").isFullScreen()?"fullscreen_disable":"fullscreen_enable",surface:"call_container"}),b("RTCUtils").toggleFullScreen()},d.$5=b("debounce")(function(){return d.forceUpdate()},10),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("RTCUtils").isFullScreen()||this.state.highlighted,c=this.props.isAudioOnly,d=this.props.className;this.props.isM4!==!0&&(d=b("joinClasses")("transparent icon-50",d));d;return b("React").jsx(b("RTCCallControlsButton.react"),{className:d,"data-testid":"fullScreenButton",onClick:this.$3,shouldThrottle:this.$4(),title:a?h._("Salir de pantalla completa"):h._("Ver en pantalla completa"),children:this.props.isM4===!0?b("React").jsx(b("RTCUIM4FullscreenIcon.react"),{direction:a?"in":"out"}):b("React").jsx(b("RTCUIFullscreenIcon.react"),{direction:a?"in":"out",shadow:!c})})};d.$4=function(){return!b("FBRTCVersionDetection").isFirefox()};c.getDocument=function(){return document};d.componentDidMount=function(){for(var a=0;a<j.length;a++){var d=j[a];c.getDocument().addEventListener(d,this.$5)}b("RTWebUserActionLogger").logImpression({component:"fullscreen",surface:"call_container"});this.$2=b("RTCHotKeys").register(i.FULL_SCREEN,this.$3)};d.componentWillUnmount=function(){window.clearTimeout(this.$1);for(var a=0;a<j.length;a++){var b=j[a];c.getDocument().removeEventListener(b,this.$5)}this.$2&&this.$2.remove()};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCUICameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.strikeThrough;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["strikeThrough"]);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 48 48",children:c?b("React").jsx("path",{d:"M36 29h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546zM19.344 17H26c1.126 0 2 .938 2 2v10c0 .54-.225 1.047-.595 1.415L19.345 17zm-3.5 0H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h9.257l-8.413-14zm11.408 17.044l.857-.516-12.362-20.572-.857.516 12.362 20.572z"}):b("React").jsx("path",{d:"M26 17H15c-1.126 0-2 .938-2 2v10c0 1.062.874 2 2 2h11c1.126 0 2-.938 2-2V19c0-1.062-.874-2-2-2zm10 12h1V19h-1v10zm-6-2.727L35 29V19l-5 2.727v4.546z"})})}))};e.exports=a}),null);
__d("RTCCallControlsVideoButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCUICameraIcon.react","RTCUIM4VideoCameraIcon.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.className,d=a.disabled;d=d===void 0?!1:d;var e=a.onClick,f=a.nodeRef,g=a.videoMuted;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","disabled","onClick","nodeRef","videoMuted"]);return b("React").jsx(b("RTCCallControlsButton.react"),babelHelpers["extends"]({className:b("joinClasses")(c,"semiopaque icon-48"),disabled:d,highlighted:g,onClick:e,ref:f,title:g?h._("Activar video"):h._("Desactivar video")},a,{children:a.isM4===!0?b("React").jsx(b("RTCUIM4VideoCameraIcon.react"),{strikeThrough:g||d}):b("React").jsx(b("RTCUICameraIcon.react"),{strikeThrough:g||d})}))};e.exports=a}),null);
__d("RTCCallControlsToggleVideoButton.react",["React","RTCCallActions","RTCCallControlsButton.react","RTCCallControlsVideoButton.react","RTCHotKeys","RTCHotKeysConfig","RTCP2PCallStore","RTCP2PProtocolHandler","RTWebClientFeatureGating","RTWebUserActionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RTCHotKeysConfig").RTCHotKey;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!0,d.$3=function(){!d.props.initializeVideo&&d.$1&&!b("RTWebClientFeatureGating").stopVideoWhenMute()&&(h(),d.$1=!1),b("RTWebUserActionLogger").logClick({callType:b("RTWebUserActionLogger").getCallType(!d.props.isP2P),component:"toggle_video",conferenceState:d.props.conferenceState,surface:"call_controls"}),d.props.onToggle?d.props.onToggle(d.props.videoMuted):b("RTCCallActions").toggleMuteVideo(d.props.videoMuted)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:"toggle_video",conferenceState:this.props.conferenceState,surface:"call_controls"}),this.$2=b("RTCHotKeys").register(g.TOGGLE_VIDEO,this.$3)};d.componentWillUnmount=function(){this.$2&&this.$2.remove()};d.render=function(){return b("React").jsx(b("RTCCallControlsVideoButton.react"),{className:this.props.className,"data-testid":"toggleVideoButton",disabled:this.props.disabled,isM4:this.props.isM4,nodeRef:this.props.nodeRef,onClick:this.$3,videoMuted:this.props.videoMuted})};return c}(b("React").PureComponent);function h(){var a=b("RTCP2PCallStore").getState(),c=a.protocolHandler;return b("RTCP2PProtocolHandler").initStream(!0).then(function(a){c.startLocalVideoTracker(a);return a}).then(function(a){b("RTCP2PProtocolHandler").replaceLocalStream(a);return a})["catch"](function(a){})}e.exports=a}),null);
__d("RTCUIVideoChatLinkIcon.react",["React","RTCSVGIcon.react","RTCSVGIconDropShadowFilter.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1="",c.$2=function(a){a&&(c.$1=a.getURL(),c.forceUpdate())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.shadow;a=babelHelpers.objectWithoutPropertiesLoose(a,["shadow"]);return c?b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsxs("svg",{viewBox:"0 0 50 50",children:[b("React").jsx("defs",{children:b("React").jsx(b("RTCSVGIconDropShadowFilter.react"),{height:20,ref:this.$2,width:20})}),b("React").jsx("g",{filter:this.$1,children:b("React").jsx(g,{})})]})})):b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"0 0 50 50",children:b("React").jsx(g,{})})}))};return c}(b("React").PureComponent);a.defaultProps={shadow:!1};var g=function(){return b("React").jsx("path",{d:"M18.1441167,16.5110556 C17.2205056,17.4315556 15.9888944,17.8888889 14.7767278,17.8888889 C14.0440611,17.8888889 12.0568389,17.6621667 12.0568389,16.3737778 C12.0568389,15.7068333 12.6036167,15.1938889 13.2332278,15.1938889 C13.7663944,15.1938889 13.8993944,15.5555556 14.7767278,15.5555556 C15.3892278,15.5555556 16.0211722,15.3257222 16.48745,14.8606111 C16.9541167,14.3958889 19.8151722,11.5445556 20.2837833,11.0778889 C20.7520056,10.6112222 20.99895,9.94427778 20.99895,9.33333333 C20.99895,7.97455556 19.9485611,7 18.6656167,7 C18.0523389,7 17.3581722,7.22983333 16.8938389,7.70038889 C16.5376167,8.06088889 16.2167833,8.40194444 16.0087278,8.60961111 C15.8006722,8.81688889 15.5202833,8.94133333 15.2006167,8.94133333 C14.4846722,8.94133333 14.0016722,8.40583333 14.0016722,7.784 C14.0016722,7.49427778 14.1097833,7.20066667 14.3423389,6.96888889 C14.5741167,6.7375 14.8475056,6.44 15.2371722,6.04994444 C16.1596167,5.12477778 17.4526722,4.66666667 18.6656167,4.66666667 C21.19845,4.66666667 23.3322833,6.64183333 23.3322833,9.33333333 C23.3322833,10.542 22.8660056,11.8062778 21.94045,12.7283333 C21.0148944,13.6511667 19.0677278,15.5909444 18.1441167,16.5110556 Z M9.85592222,11.4889444 C10.7795333,10.5684444 12.0111444,10.1111111 13.2233111,10.1111111 C13.9559778,10.1111111 15.9432,10.3378333 15.9432,11.6262222 C15.9432,12.2931667 15.3964222,12.8061111 14.7668111,12.8061111 C14.2336444,12.8061111 14.1006444,12.4444444 13.2233111,12.4444444 C12.6112,12.4444444 11.9792556,12.6742778 11.5125889,13.1393889 C11.0459222,13.6041111 8.18486667,16.4554444 7.71625556,16.9221111 C7.24803333,17.3887778 7.00108889,18.0557222 7.00108889,18.6666667 C7.00108889,20.0254444 8.05147778,21 9.33442222,21 C9.9477,21 10.6418667,20.7701667 11.1065889,20.2996111 C11.4624222,19.9391111 11.7832556,19.5980556 11.9913111,19.3903889 C12.1993667,19.1831111 12.4797556,19.0590556 12.7994222,19.0590556 C13.5153667,19.0590556 13.9983667,19.5941667 13.9983667,20.216 C13.9983667,20.5057222 13.8902556,20.7993333 13.6577,21.0311111 C13.4259222,21.2625 13.1525333,21.56 12.7628667,21.9500556 C11.8404222,22.8752222 10.5473667,23.3333333 9.33442222,23.3333333 C6.80158889,23.3333333 4.66775556,21.3581667 4.66775556,18.6666667 C4.66775556,17.458 5.13403333,16.1937222 6.05958889,15.2716667 C6.98514444,14.3488333 8.93231111,12.4090556 9.85592222,11.4889444 Z",id:"path-1",transform:"translate(11.0, 11.0)"})};e.exports=a}),null);
__d("RTCCallControlsVideoChatLinkButton.react",["cx","fbt","React","RTCCallControlsButton.react","RTCGroupCallDialogController","RTCUIVideoChatLinkIcon.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCCallControlsButton.react"),{className:"transparent icon-50","data-testid":"createVideoChatLinkButton",onClick:this.$1,title:h._("Crear enlace de invitaci\u00f3n"),children:b("React").jsx(b("RTCUIVideoChatLinkIcon.react"),{shadow:!0})})};d.$1=function(){b("RTCGroupCallDialogController").showVideoChatLinkDialog()};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCCallControlsVideoEscalationButton.react",["React","RTCCallControlsVideoButton.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.videoMuted;d=d===void 0?!0:d;a=babelHelpers.objectWithoutPropertiesLoose(a,["disabled","videoMuted"]);return b("React").jsx(b("RTCCallControlsVideoButton.react"),{className:a.className,"data-testid":"toggleVideoButton",disabled:c,isM4:a.isM4,onClick:a.onClick,videoMuted:d})};e.exports=a}),null);
__d("RTCUISwitchCameraIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){a=babelHelpers["extends"]({},a);return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{viewBox:"-9 -9 48 48",children:b("React").jsx("path",{d:"M24.239 14.156l-1.74-.002c-.007-4.143-3.357-7.507-7.5-7.5a1.154 1.154 0 0 0 0 2.307 5.189 5.189 0 0 1 5.19 5.183l-1.724.012a.576.576 0 0 0-.47.91l2.887 4.03c.23.322.71.322.94 0l2.886-4.03a.576.576 0 0 0-.47-.91zm-12.704-.005c.469 0 .742-.53.47-.91l-2.887-4.03a.579.579 0 0 0-.94 0l-2.887 4.03c-.271.38.002.91.47.91l1.739.003c.008 4.142 3.359 7.506 7.5 7.5a1.154 1.154 0 1 0 0-2.308 5.188 5.188 0 0 1-5.19-5.182l1.725-.013zm13.273 11.541H5.192a4.616 4.616 0 0 1-4.615-4.615V8.385a4.616 4.616 0 0 1 4.615-4.616h.577a4.18 4.18 0 0 0 2.955-1.223L9.738 1.53A4.18 4.18 0 0 1 12.692.308h4.616c1.108 0 2.171.44 2.955 1.223l1.013 1.015a4.178 4.178 0 0 0 2.955 1.223h.577a4.616 4.616 0 0 1 4.615 4.616v12.692a4.616 4.616 0 0 1-4.615 4.615z",fill:"#FFF",fillRule:"evenodd"})})}))};e.exports=a}),null);
__d("RTCMWebSwitchCameraButton.react",["cx","fbt","invariant","React","RTCCallControlsButton.react","RTCMWProtocolHandler","RTCUISwitchCameraIcon.react","RTWebUserActionLogger","joinClasses","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("RTWebUserActionLogger").logClick({component:"toggle_camera",surface:"call_controls"});var a=navigator;a=a.mediaDevices;a!=null||i(0,19135);b("promiseDone")(a.getUserMedia({video:{facingMode:d.props.currentCameraMode}}).then(function(a){b("RTCMWProtocolHandler").updateLocalStream(a);d.props.onToggleCameraMode();return a}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({component:"toggle_camera",surface:"call_controls"})};d.render=function(){var a=this.props.className;return b("React").jsx(b("RTCCallControlsButton.react"),{className:b("joinClasses")(a,"semiopaque icon-48"),"data-testid":"toggleCameraButton",onClick:this.$1,title:h._("Cambiar de c\u00e1mara"),children:b("React").jsx(b("RTCUISwitchCameraIcon.react"),{})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCCallStateInfo.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className"]);return b("React").jsx("div",babelHelpers["extends"]({className:b("joinClasses")("_2_my",d)},a,{children:c}))};e.exports=a}),null);
__d("RTCPeerConnectionStats.react",["FBRTCLogger","React","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={stats:[]},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){if(!b("RTCConfig").PeerConnectionStatsGK)return null;if(this.state.stats.length<1)return null;var a={background:"white",bottom:0,color:"black",fontSize:10,left:0,margin:0,opacity:.7,padding:"1em",position:"absolute",textAlign:"left",zIndex:9};return b("React").jsx("pre",{style:babelHelpers["extends"]({},a,this.props.style),children:[this.$2("in"),this.$2("out")].filter(Boolean).join("\n")})};d.$2=function(a){__p&&__p();var b=this.state.stats.filter(function(b){return b.direction===a}).map(function(b){__p&&__p();b.id;var c=b.type,d=b.packetsLost,e=b.resolution,f=b.frameRate;b=babelHelpers.objectWithoutPropertiesLoose(b,["id","type","packetsLost","resolution","frameRate"]);if(a==="in"){var g=b.bytesReceived,h=b.packetsReceived,i=d/(h+d)||0;g=["b:  "+g,"p:  "+d+" / "+h,"l:  "+i.toFixed(4).replace(/\.?0+$/,"")+"%"]}else{h=b.bytesSent;i=b.packetsSent;b=d/(i+d)||0;g=["b:  "+h,"p:  "+d+" / "+i,"l:  "+b.toFixed(4).replace(/\.?0+$/,"")+"%"]}f&&g.unshift("fr: "+f);e&&g.unshift("r:  "+e);return c+" "+a+":\n  "+g.join("\n  ")}).join("\n");return!b.length?"":b};d.componentDidMount=function(){__p&&__p();var a=this;if(!b("RTCConfig").PeerConnectionStatsGK)return;this.$1=window.setInterval(function(){__p&&__p();var c=a.props.connection;if(!c||c.getIceConnectionState()==="closed"||c.getIceConnectionState()==="disconnected")return;c.getStats().then(function(a){__p&&__p();var b=[];for(var a=a.values(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.type==="ssrc"){var f={id:e.id,packetsLost:e.packetsLost||0,type:e.mediaType};if(e.mediaType==="video"){var g=e.googBandwidthLimitedResolution?" (BW limited)":"";if("googFrameWidthSent"in e){var h=e.googFrameWidthSent,i=e.googFrameHeightSent;f.resolution=h+"x"+i+g}else if("googFrameWidthReceived"in e){h=e.googFrameWidthReceived;i=e.googFrameHeightReceived;f.resolution=h+"x"+i+g}if("googFrameRateInput"in e){h=e.googFrameRateInput;i=e.googFrameRateSent;f.frameRate=h+" -> "+i}else if("googFrameRateOutput"in e){g=e.googFrameRateOutput;h=e.googFrameRateReceived;f.frameRate=g+" -> "+h}}"bytesSent"in e?(f.bytesSent=e.bytesSent,f.packetsSent=e.packetsSent,f.direction="out"):(f.bytesReceived=e.bytesReceived,f.packetsReceived=e.packetsReceived,f.direction="in");b.push(f)}}return b}).then(function(b){return a.setState({stats:b})})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole(JSON.stringify(a))})},1e3)};d.componentWillUnmount=function(){window.clearInterval(this.$1)};return c}(a);e.exports=c}),null);
__d("RTCMessengerM4LogoIcon.react",["React","RTCSVGIcon.react"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("React").jsx(b("RTCSVGIcon.react"),babelHelpers["extends"]({},a,{children:b("React").jsx("svg",{height:"32",width:"32",children:b("React").jsx("path",{d:"M16 0c9.01328 0 16 6.60232 16 15.52 0 8.91776-6.98672 15.52-16 15.52-1.61904 0-3.17216-.21384-4.63152-.61512-.28376-.07808-.58544-.05592-.85464.06288l-3.17568 1.40192c-.16928.07472-.34304.10968-.51264.11032h-.00928c-.6588-.00248-1.2524-.5228-1.2744-1.24208l-.08712-2.84648c-.01072-.35048-.16848-.67832-.42984-.91208C1.91168 24.21528 0 20.18448 0 15.52 0 6.60232 6.98672 0 16 0zM6.3677386 19.9366326c-.4521827.6940678.4296457 1.4762033 1.1051929.9802301l5.0613504-3.7162303c.3423852-.2514007.8155008-.2527198 1.1593297-.0032589l3.7476305 2.7193178c1.124602.8160436 2.729618.5294934 3.4791922-.6209753l4.7118271-7.2323486c.4521827-.6940678-.4296457-1.4762033-1.1051929-.9802301l-5.0613504 3.7162303c-.3423852.2514007-.8155008.2527198-1.1593297.0032589l-3.7476305-2.7193178c-1.124602-.8160436-2.729618-.5294934-3.479112.6209753l-4.7119073 7.2323486z",fill:"#FFF",fillRule:"evenodd"})})}))};e.exports=a}),null);
__d("RTCIncallVideo.react",["cx","FBRTCVideo.react","React","RTCMediaStreamReadyContainer.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.state={mounted:!1},d.$2=function(a){var c=d.props,e=c.audioMuted,f=c.audioSinkID,g=c.className,h=c.mediaStream,i=c.muted;c=babelHelpers.objectWithoutPropertiesLoose(c,["audioMuted","audioSinkID","className","mediaStream","muted"]);return b("React").jsxs("div",babelHelpers["extends"]({className:b("joinClasses")(g,"_chh"+(a&&!i&&d.state.mounted?" active":""))},c,{children:[b("React").jsx(b("FBRTCVideo.react"),babelHelpers["extends"]({"data-testid":"RTCIncallVideo",muted:e},{audioSinkID:f,mediaStream:h})),d.props.children]}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCMediaStreamReadyContainer.react"),{mediaStream:this.props.mediaStream,children:this.$2})};d.componentWillUnmount=function(){window.clearTimeout(this.$1)};d.componentDidMount=function(){var a=this;this.$1=window.setTimeout(function(){return a.setState({mounted:!0})})};return c}(a);c.defaultProps={audioMuted:!1,muted:!1};e.exports=c}),null);
__d("RTCUIVideo.react",["cx","invariant","FBLogger","FBRTCUtils","React","RTWebUserActionLogger","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$5=function(a){d.$1=a,d.props.videoRef&&d.props.videoRef(d.$1)},d.$3=function(a){b("RTWebUserActionLogger").logError({errorDomain:"video_element_rendering_error",errorType:a.toString()}),d.$4()},d.$4=function(){d.props.onReady&&d.props.onReady()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props;a.audioSinkID;a.stream;var c=a.className,d=a.mirror;a=babelHelpers.objectWithoutPropertiesLoose(a,["audioSinkID","stream","className","mirror"]);return b("React").jsx("video",babelHelpers["extends"]({autoPlay:!0,className:b("joinClasses")("_1yvx"+(d?" _6olb":""),c),onContextMenu:this.$2,onError:this.$3,onLoadedMetadata:this.$4,ref:this.$5},a))};d.componentDidMount=function(){i(this.$1,this.props.stream),j(this.$1,this.props.audioSinkID)};d.componentDidUpdate=function(a){this.props.stream!==a.stream&&i(this.$1,this.props.stream),this.props.audioSinkID!==a.audioSinkID&&j(this.$1,this.props.audioSinkID)};d.$2=function(a){a.preventDefault()};return c}(b("React").PureComponent);a.defaultProps={muted:!1,mirror:!1};function i(a,c){if(a==null||c==null)return;try{b("FBRTCUtils").attachMediaStream(a,c)}catch(a){b("RTWebUserActionLogger").logError({errorDomain:"video_attach_media_stream_error",errorType:a.toString()}),b("FBLogger")("rtc_www").catching(a).warn("Encountered error while calling attachMediaStream")}}function j(a,c){if(!b("FBRTCUtils").supportsSetSink()||a==null||c==null||c==="")return;try{typeof a.setSinkId==="function"||h(0,3783),a.setSinkId(c)}catch(a){b("FBLogger")("rtc_www").catching(a).warn("Encountered error while calling attachAudioSink")}}e.exports=a}),null);
__d("RTCVideoWithUserAndOrientation.react",["FBLogger","FBRTCConstants","React","RTCUIVideo.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").Orientation,h=1e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.videoRef=function(a){d.$1=a},d.checkOrientation=function(){if(d.$1!=null){var a=d.$1,c=a.videoHeight;a=a.videoWidth;if(c!=null&&a!=null){a=a>c?g.LANDSCAPE:g.PORTRAIT;a!==d.$3&&(d.props.onOrientationChanged({user:d.props.user,orientation:a}),d.$3=a)}else b("FBLogger")("rtc_www").warn("Unable to get video dimension")}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2=window.setInterval(this.checkOrientation,h)};d.componentWillUnmount=function(){window.clearInterval(this.$2)};d.render=function(){var a=this.props;a.user;a.onOrientationChanged;a=babelHelpers.objectWithoutPropertiesLoose(a,["user","onOrientationChanged"]);return b("React").jsx(b("RTCUIVideo.react"),babelHelpers["extends"]({videoRef:this.videoRef},a))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCGroupCallDraggableComponent.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;var g=5;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=!1,c.$3=0,c.$4=0,c.$5=0,c.$10=function(a){a&&(c.$1=a)},c.$8=function(a){c.$2&&(a.stopPropagation(),c.$2=!1)},c.$9=function(a){var b=a.clientX;a=a.clientY;c.$1&&(c.$3=b,c.$4=a,c.$5=c.$1.scrollLeft+b,document.addEventListener("mousemove",c.$6),document.addEventListener("mouseup",c.$7))},c.$6=function(a){var b=a.clientX;a=a.clientY;c.$1&&(c.$1.scrollLeft=c.$5-b,(Math.abs(b-c.$3)>g||Math.abs(a-c.$4)>g)&&(c.$2=!0))},c.$7=function(){document.removeEventListener("mousemove",c.$6),document.removeEventListener("mouseup",c.$7)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){document.removeEventListener("mousemove",this.$6),document.removeEventListener("mouseup",this.$7)};d.render=function(){return b("React").jsx("div",{className:this.props.className,onClickCapture:this.$8,onMouseDown:this.$9,ref:this.$10,children:this.props.children})};return c}(a);e.exports=c}),null);
__d("FBRTCGroupCallUserPopoverMenu.react",["cx","fbt","FBRTCGroupCallStore","FBRTCGuestUtils","MessengerMenu.react","MessengerPopoverMenu.react","React","RTCGroupCallDialogController","URI","XFacebookMessengerInboxController","XMessengerDotComMainController","gkx","isMessengerDotComURI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerMenu.react").Item,j=b("MessengerMenu.react").Separator;a=function(a){__p&&__p();var c=a.children,d=a.isGuestFromLink;d=d===void 0?!1:d;var e=a.user;a=h._("Opciones del men\u00fa");var f=b("FBRTCGroupCallStore").getState();f=f.thread;a=b("React").jsxs(b("MessengerMenu.react"),{"aria-label":a,className:"_2vmq",label:a,children:[b("React").jsx(i,{disabled:!0,label:e.userName}),b("React").jsx(j,{}),e.isGuestUser?null:b("React").jsx(i,{label:h._("Enviar mensaje"),onclick:function(){return k(e.FBID)}}),e.isGuestUser?null:b("React").jsx(i,{label:h._("Ver perfil"),onclick:function(){return l(e.profileUrl)}}),b("gkx")("838472")&&!d&&b("FBRTCGuestUtils").isAnonOrAuthGuestUser(e,f)?b("React").jsx(i,{label:h._("Eliminar invitado"),onclick:function(){return b("RTCGroupCallDialogController").showRemoveGuestDialog(e)}}):null]});return b("React").jsx(b("MessengerPopoverMenu.react"),{menu:a,children:c})};function k(a){var c=b("isMessengerDotComURI")(b("URI").getRequestURI())?b("XMessengerDotComMainController"):b("XFacebookMessengerInboxController");window.open(c.getURIBuilder().setString("thread_key",a).getURI())}function l(a){a&&window.open(a)}e.exports=a}),null);
__d("RTCRemoteViewPopoverMenuButton.react",["cx","fbt","FBRTCGroupCallUserPopoverMenu.react","React","RTCSVGIcon.react","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.isGuestFromLink;a=a.user;var d=h._("Opciones del men\u00fa");return b("React").jsx(b("FBRTCGroupCallUserPopoverMenu.react"),{isGuestFromLink:c,user:a,children:b("React").jsx(b("ShimButton.react"),{"aria-label":d,className:"_1b12",label:d,onClick:i,role:"presentation",children:b("React").jsx(b("RTCSVGIcon.react"),{children:b("React").jsx("svg",{viewBox:"-10 -6 24 24",children:b("React").jsx("path",{d:"M2.157 11.057c-1.013 0-1.843.83-1.843 1.843 0 1.014.83 1.843 1.843 1.843C3.17 14.743 4 13.913 4 12.9c0-1.014-.83-1.843-1.843-1.843zm0-1.843C3.17 9.214 4 8.384 4 7.37c0-1.012-.83-1.84-1.843-1.84S.314 6.357.314 7.37c0 1.015.83 1.844 1.843 1.844zm0-5.528C3.17 3.686 4 2.856 4 1.843 4 .83 3.17 0 2.157 0S.314.83.314 1.843s.83 1.843 1.843 1.843z"})})})})})};function i(a){a.stopPropagation()}e.exports=a}),null);
__d("RTCGroupCallRemoteViewThumbnail.react",["cx","FBRTCVideo.react","Image.react","React","RTCRemoteViewPopoverMenuButton.react","RTCSVGIcon.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.isDominantSpeaker,d=a.isPinnedSpeaker,e=a.onClick;a=a.user;return b("React").jsxs("div",{className:"_30dp"+(c?" dominant":""),"data-testid":"remoteViewThumbnail"+a.FBID,onClick:e,children:[b("React").jsx("div",{className:"_30dq",children:b("React").jsx(b("RTCRemoteViewPopoverMenuButton.react"),{user:a})}),d?b("React").jsxs("div",{children:[b("React").jsx(b("RTCSVGIcon.react"),{className:"_5-vf",children:b("React").jsx("svg",{viewBox:"0 0 36 36",children:b("React").jsx("path",{d:"M0 0h32a4 4 0 0 1 4 4v32"})})}),b("React").jsx(b("RTCSVGIcon.react"),{className:"_5-vg",children:b("React").jsx("svg",{viewBox:"0 0 19 19",children:b("React").jsx("path",{d:"M2.5 6.65h13a1 1 0 0 1 1 1v9.637a1 1 0 0 1-1 1H3.5a1 1 0 0 1-1-1V7.65a1 1 0 0 1 1-1M9.192 0h.616a4 4 0 0 1 4 4v.313a4 4 0 0 1-.754 2.337H5.946a4 4 0 0 1-.754-2.337V4a4 4 0 0 1 4-4m0 1h.616a3 3 0 0 1 3 3v.313a3 3 0 0 1-1.12 2.337H7.312a3 3 0 0 1-1.12-2.337V4a3 3 0 0 1 3-3",fillRule:"evenodd"})})})]}):null,c||a.isVideoMuted()?b("React").jsx(b("Image.react"),{src:a.profilePictureUrl}):b("React").jsx(b("FBRTCVideo.react"),{mediaStream:a.getStream()})]})};e.exports=a}),null);
__d("RTCGroupCallRemoteView.react",["cx","FBRTCGroupCallStore","FluxContainer","React","RTCGroupCallActions","RTCGroupCallDraggableComponent.react","RTCGroupCallRemoteViewThumbnail.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();d=function(a){var c=a.dominantSpeakerFBID,d=a.pinnedSpeakerFBID;a=a.remoteUsers;return b("React").jsx(b("RTCGroupCallDraggableComponent.react"),{className:"_1qwn",children:a.map(function(a){return b("React").jsx(b("RTCGroupCallRemoteViewThumbnail.react"),{isDominantSpeaker:a.FBID===(d||c),isPinnedSpeaker:a.FBID===d,onClick:function(){a.FBID===d?b("RTCGroupCallActions").setPinnedSpeaker(null):b("RTCGroupCallActions").setPinnedSpeaker(a.FBID)},user:a},a.FBID)})})};function a(){return[b("FBRTCGroupCallStore")]}function c(a,c){a===void 0&&({});a=b("FBRTCGroupCallStore").getState();var d=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return babelHelpers["extends"]({dominantSpeakerFBID:d,pinnedSpeakerFBID:a},c)}e.exports=b("FluxContainer").createFunctional(d,a,c,{withProps:!0})}),null);
__d("RTCInCallFeaturesUtils",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({NO_CORNER:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4});a={BOUNDING_BOX_MARGIN:10,SETTINGS_HEIGHT:40,SELF_VIEW_WIDTH:178,SELF_VIEW_HEIGHT:100,SNAP_DISTANCE:100,Corners:g,getCornerPosition:function(a,b,c){switch(c){case g.TOP_LEFT:return{offsetLeft:0+this.BOUNDING_BOX_MARGIN,offsetTop:0+this.BOUNDING_BOX_MARGIN+this.SETTINGS_HEIGHT};case g.TOP_RIGHT:return{offsetLeft:a-this.SELF_VIEW_WIDTH-this.BOUNDING_BOX_MARGIN,offsetTop:0+this.BOUNDING_BOX_MARGIN+this.SETTINGS_HEIGHT};case g.BOTTOM_RIGHT:return{offsetLeft:a-this.SELF_VIEW_WIDTH-this.BOUNDING_BOX_MARGIN,offsetTop:b-this.SELF_VIEW_HEIGHT-this.BOUNDING_BOX_MARGIN};case g.BOTTOM_LEFT:return{offsetLeft:0+this.BOUNDING_BOX_MARGIN,offsetTop:b-this.SELF_VIEW_HEIGHT-this.BOUNDING_BOX_MARGIN};default:return null}},snapToCorner:function(a,b,c){__p&&__p();if(a.offsetLeft<this.SNAP_DISTANCE&&a.offsetTop<this.SNAP_DISTANCE+this.SETTINGS_HEIGHT){var d=this.getCornerPosition(b,c,g.TOP_LEFT);d.snappedCorner=g.TOP_LEFT;return d}if(a.offsetLeft>b-this.SELF_VIEW_WIDTH-this.SNAP_DISTANCE&&a.offsetTop<this.SNAP_DISTANCE+this.SETTINGS_HEIGHT){d=this.getCornerPosition(b,c,g.TOP_RIGHT);d.snappedCorner=g.TOP_RIGHT;return d}if(a.offsetLeft>b-this.SELF_VIEW_WIDTH-this.SNAP_DISTANCE&&a.offsetTop>c-this.SELF_VIEW_HEIGHT-this.SNAP_DISTANCE){d=this.getCornerPosition(b,c,g.BOTTOM_RIGHT);d.snappedCorner=g.BOTTOM_RIGHT;return d}if(a.offsetLeft<this.SNAP_DISTANCE&&a.offsetTop>c-this.SELF_VIEW_HEIGHT-this.SNAP_DISTANCE){d=this.getCornerPosition(b,c,g.BOTTOM_LEFT);d.snappedCorner=g.BOTTOM_LEFT;return d}return{offsetLeft:a.offsetLeft,offsetTop:a.offsetTop,snappedCorner:this.Corners.NO_CORNER}}};e.exports=a}),null);
__d("RTCSelfViewAnimationConfig",[],(function(a,b,c,d,e,f){"use strict";a={stiffness:200,damping:25};e.exports={springConfig:a}}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("performance-now-0.2.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();(function(){var a,b,c;typeof performance!=="undefined"&&performance!==null&&performance.now?g.exports=function(){return performance.now()}:typeof process!=="undefined"&&process!==null&&process.hrtime?(g.exports=function(){return(a()-c)/1e6},b=process.hrtime,a=function(){var a;a=b();return a[0]*1e9+a[1]},c=a()):Date.now?(g.exports=function(){return Date.now()-c},c=Date.now()):(g.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case void 0:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fbjs-0.8.16",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){throw new Error("The fbjs package should not be required without a full path.")}var i=!1,j=function(){i||(i=!0,h());return g.exports};b={};var k={exports:b};function l(){__p&&__p();function a(a){return function(){return a}}var b=function(){};b.thatReturns=a;b.thatReturnsFalse=a(!1);b.thatReturnsTrue=a(!0);b.thatReturnsNull=a(null);b.thatReturnsThis=function(){return this};b.thatReturnsArgument=function(a){return a};k.exports=b}var m=!1,n=function(){m||(m=!0,l());return k.exports};c={};var o={exports:c};function p(){var a={};o.exports=a}var q=!1,r=function(){q||(q=!0,p());return o.exports};d={};var s={exports:d};function t(){__p&&__p();function a(a,b,c,d,e,f,g,h){__p&&__p();if(!a){if(b===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[c,d,e,f,g,h],j=0;a=new Error(b.replace(/%s/g,function(){return i[j++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a}}s.exports=a}var u=!1,v=function(){u||(u=!0,t());return s.exports};f={};var w={exports:f};function x(){__p&&__p();var a=Object.prototype.hasOwnProperty;function b(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function c(c,d){__p&&__p();if(b(c,d))return!0;if(typeof c!=="object"||c===null||typeof d!=="object"||d===null)return!1;var e=Object.keys(c),f=Object.keys(d);if(e.length!==f.length)return!1;for(var f=0;f<e.length;f++)if(!a.call(d,e[f])||!b(c[e[f]],d[e[f]]))return!1;return!0}w.exports=c}var y=!1,z=function(){y||(y=!0,x());return w.exports};a={};var A={exports:a};function B(){var a=n();a=a;A.exports=a}var C=!1,D=function(){C||(C=!0,B());return A.exports};b=function(a){switch(a){case void 0:return j();case"/lib/emptyFunction":return n();case"/lib/emptyObject":return r();case"/lib/invariant":return v();case"/lib/shallowEqual":return z();case"/lib/warning":return D()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("object-assign-4.1.1",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();var a=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function d(a){if(a===null||a===void 0)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){__p&&__p();try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if(Object.getOwnPropertyNames(a)[0]==="5")return!1;var b={};for(var a=0;a<10;a++)b["_"+String.fromCharCode(a)]=a;a=Object.getOwnPropertyNames(b).map(function(a){return b[a]});if(a.join("")!=="0123456789")return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return Object.keys(Object.assign({},c)).join("")!=="abcdefghijklmnopqrst"?!1:!0}catch(a){return!1}}g.exports=e()?Object.assign:function(e,f){__p&&__p();var g,h=d(e),i;for(var j=1;j<arguments.length;j++){g=Object(arguments[j]);for(var k in g)b.call(g,k)&&(h[k]=g[k]);if(a){i=a(g);for(var l=0;l<i.length;l++)c.call(g,i[l])&&(h[i[l]]=g[i[l]])}}return h}}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case void 0:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("prop-types-15.6.0",["fbjs-0.8.16","object-assign-4.1.1"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("fbjs-0.8.16"));a(b("object-assign-4.1.1"));c={};var h={exports:c};function i(){var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";h.exports=a}var j=!1,k=function(){j||(j=!0,i());return h.exports};d={};var l={exports:d};function m(){function a(a,b,c,d,e){}l.exports=a}var n=!1,o=function(){n||(n=!0,m());return l.exports};f={};var p={exports:f};function q(){__p&&__p();var a=g("/lib/emptyFunction"),b=g("/lib/invariant"),c=k();p.exports=function(){__p&&__p();function d(a,d,e,f,g,h){if(h===c)return;b(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}d.isRequired=d;function e(){return d}e={array:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:e,element:d,instanceOf:e,node:d,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};e.checkPropTypes=a;e.PropTypes=e;return e}}var r=!1,s=function(){r||(r=!0,q());return p.exports};a={};var t={exports:a};function u(){t.exports=s()()}var v=!1,w=function(){v||(v=!0,u());return t.exports};b=function(a){switch(a){case void 0:return w();case"/checkPropTypes":return o()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("performance-now-2.1.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={};var g={exports:a};function h(){__p&&__p();(function(){var a,b,c,d,e,f;typeof performance!=="undefined"&&performance!==null&&performance.now?g.exports=function(){return performance.now()}:typeof process!=="undefined"&&process!==null&&process.hrtime?(g.exports=function(){return(a()-e)/1e6},b=process.hrtime,a=function(){var a;a=b();return a[0]*1e9+a[1]},d=a(),f=process.uptime()*1e9,e=d-f):Date.now?(g.exports=function(){return Date.now()-c},c=Date.now()):(g.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}var i=!1,j=function(){i||(i=!0,h());return g.exports};b=function(a){switch(a){case void 0:return j()}};e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("raf-3.4.0",["performance-now-2.1.0"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=c(b("performance-now-2.1.0"));d={};var h={exports:d};function i(){__p&&__p();var b=g(),c=typeof window==="undefined"?a:window,d=["moz","webkit"],e="AnimationFrame",f=c["request"+e],i=c["cancel"+e]||c["cancelRequest"+e];for(var j=0;!f&&j<d.length;j++)f=c[d[j]+"Request"+e],i=c[d[j]+"Cancel"+e]||c[d[j]+"CancelRequest"+e];if(!f||!i){var k=0,l=0,m=[],n=1e3/60;f=function(a){__p&&__p();if(m.length===0){var c=b(),d=Math.max(0,n-(c-k));k=d+c;setTimeout(function(){var b=m.slice(0);m.length=0;for(var a=0;a<b.length;a++)if(!b[a].cancelled)try{b[a].callback(k)}catch(a){setTimeout(function(){throw a},0)}},Math.round(d))}m.push({handle:++l,callback:a,cancelled:!1});return l};i=function(b){for(var a=0;a<m.length;a++)m[a].handle===b&&(m[a].cancelled=!0)}}h.exports=function(a){return f.call(c,a)};h.exports.cancel=function(){i.apply(c,arguments)};h.exports.polyfill=function(a){a||(a=c),a.requestAnimationFrame=f,a.cancelAnimationFrame=i}}var j=!1,k=function(){j||(j=!0,i());return h.exports};f=function(a){switch(a){case void 0:return k()}};e.exports=f}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("react-motion-0.5.2",["performance-now-0.2.0","raf-3.4.0","react-0.0.0","prop-types-15.6.0"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("performance-now-0.2.0")),h=a(b("raf-3.4.0")),i=a(b("react-0.0.0")),j=a(b("prop-types-15.6.0")),k={},l={exports:k};function m(){k.__esModule=!0;k["default"]=a;function a(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=0);return b}l.exports=k["default"]}var n=!1,o=function(){n||(n=!0,m());return l.exports},p={},q={exports:p};function r(){__p&&__p();p.__esModule=!0;p["default"]=a;function a(a){var b={};for(var c in a){if(!Object.prototype.hasOwnProperty.call(a,c))continue;b[c]=typeof a[c]==="number"?a[c]:a[c].val}return b}q.exports=p["default"]}var s=!1,t=function(){s||(s=!0,r());return q.exports},u={},v={exports:u};function w(){__p&&__p();u.__esModule=!0;u["default"]=b;var a=[0,0];function b(b,c,d,e,f,g,h){__p&&__p();f=-f*(c-e);g=-g*d;f=f+g;g=d+f*b;d=c+g*b;if(Math.abs(g)<h&&Math.abs(d-e)<h){a[0]=e;a[1]=0;return a}a[0]=d;a[1]=g;return a}v.exports=u["default"]}var x=!1,y=function(){x||(x=!0,w());return v.exports},z={},A={exports:z};function aa(){__p&&__p();z.__esModule=!0;z["default"]=a;function a(a,b,c){__p&&__p();for(var d in b){if(!Object.prototype.hasOwnProperty.call(b,d))continue;if(c[d]!==0)return!1;var e=typeof b[d]==="number"?b[d]:b[d].val;if(a[d]!==e)return!1}return!0}A.exports=z["default"]}var B=!1,C=function(){B||(B=!0,aa());return A.exports},D={},E={exports:D};function ba(){__p&&__p();D.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=g();var n=c(f);f=h();var p=c(f);f=C();var q=c(f);f=i();var r=c(f);f=j();var s=c(f),u=1e3/60;c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyle:s["default"].objectOf(s["default"].number),style:s["default"].objectOf(s["default"].oneOfType([s["default"].number,s["default"].object])).isRequired,children:s["default"].func.isRequired,onRest:s["default"].func},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.wasAnimating=!1;this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyle=null;this.clearUnreadPropStyle=function(b){var c=!1,d=e.state,f=d.currentStyle,g=d.currentVelocity,h=d.lastIdealStyle;d=d.lastIdealVelocity;for(var i in b){if(!Object.prototype.hasOwnProperty.call(b,i))continue;var j=b[i];typeof j==="number"&&(c||(c=!0,f=a({},f),g=a({},g),h=a({},h),d=a({},d)),f[i]=j,g[i]=0,h[i]=j,d[i]=0)}c&&e.setState({currentStyle:f,currentVelocity:g,lastIdealStyle:h,lastIdealVelocity:d})};this.startAnimationIfNecessary=function(){__p&&__p();e.animationID=p["default"](function(a){__p&&__p();var b=e.props.style;if(q["default"](e.state.currentStyle,b,e.state.currentVelocity)){e.wasAnimating&&e.props.onRest&&e.props.onRest();e.animationID=null;e.wasAnimating=!1;e.accumulatedTime=0;return}e.wasAnimating=!0;a=a||n["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>u*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/u)*u)/u;c=Math.floor(e.accumulatedTime/u);var d={},f={},g={},h={};for(var i in b){if(!Object.prototype.hasOwnProperty.call(b,i))continue;var j=b[i];if(typeof j==="number")g[i]=j,h[i]=0,d[i]=j,f[i]=0;else{var k=e.state.lastIdealStyle[i],l=e.state.lastIdealVelocity[i];for(var o=0;o<c;o++){var p=m["default"](u/1e3,k,l,j.val,j.stiffness,j.damping,j.precision);k=p[0];l=p[1]}p=m["default"](u/1e3,k,l,j.val,j.stiffness,j.damping,j.precision);o=p[0];j=p[1];g[i]=k+(o-k)*a;h[i]=l+(j-l)*a;d[i]=k;f[i]=l}}e.animationID=null;e.accumulatedTime-=c*u;e.unreadPropStyle=null;e.startAnimationIfNecessary();e.setState({currentStyle:g,currentVelocity:h,lastIdealStyle:d,lastIdealVelocity:f})})};this.state=this.defaultState()}f.prototype.defaultState=function(){var a=this.props,b=a.defaultStyle;a=a.style;b=b||l["default"](a);a=k["default"](b);return{currentStyle:b,currentVelocity:a,lastIdealStyle:b,lastIdealVelocity:a}};f.prototype.componentDidMount=function(){this.prevTime=n["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyle!=null&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=a.style,this.animationID==null&&(this.prevTime=n["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.animationID!=null&&(p["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=this.props.children(this.state.currentStyle);return a&&r["default"].Children.only(a)};return f}(r["default"].Component);D["default"]=c;E.exports=D["default"]}var F=!1,ca=function(){F||(F=!0,ba());return E.exports},G={},H={exports:G};function da(){__p&&__p();G.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=g();var n=c(f);f=h();var p=c(f);f=C();var q=c(f);f=i();var r=c(f);f=j();var s=c(f),u=1e3/60;function v(a,b,c){for(var d=0;d<a.length;d++)if(!q["default"](a[d],b[d],c[d]))return!1;return!0}c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyles:s["default"].arrayOf(s["default"].objectOf(s["default"].number)),styles:s["default"].func.isRequired,children:s["default"].func.isRequired},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyles=null;this.clearUnreadPropStyle=function(b){__p&&__p();var c=e.state,d=c.currentStyles,f=c.currentVelocities,g=c.lastIdealStyles;c=c.lastIdealVelocities;var h=!1;for(var i=0;i<b.length;i++){var j=b[i],k=!1;for(var l in j){if(!Object.prototype.hasOwnProperty.call(j,l))continue;var m=j[l];typeof m==="number"&&(k||(k=!0,h=!0,d[i]=a({},d[i]),f[i]=a({},f[i]),g[i]=a({},g[i]),c[i]=a({},c[i])),d[i][l]=m,f[i][l]=0,g[i][l]=m,c[i][l]=0)}}h&&e.setState({currentStyles:d,currentVelocities:f,lastIdealStyles:g,lastIdealVelocities:c})};this.startAnimationIfNecessary=function(){__p&&__p();e.animationID=p["default"](function(a){__p&&__p();var b=e.props.styles(e.state.lastIdealStyles);if(v(e.state.currentStyles,b,e.state.currentVelocities)){e.animationID=null;e.accumulatedTime=0;return}a=a||n["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>u*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/u)*u)/u;c=Math.floor(e.accumulatedTime/u);var d=[],f=[],g=[],h=[];for(var i=0;i<b.length;i++){var j=b[i],k={},l={},o={},p={};for(var q in j){if(!Object.prototype.hasOwnProperty.call(j,q))continue;var r=j[q];if(typeof r==="number")k[q]=r,l[q]=0,o[q]=r,p[q]=0;else{var s=e.state.lastIdealStyles[i][q],t=e.state.lastIdealVelocities[i][q];for(var w=0;w<c;w++){var x=m["default"](u/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);s=x[0];t=x[1]}x=m["default"](u/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);w=x[0];r=x[1];k[q]=s+(w-s)*a;l[q]=t+(r-t)*a;o[q]=s;p[q]=t}}g[i]=k;h[i]=l;d[i]=o;f[i]=p}e.animationID=null;e.accumulatedTime-=c*u;e.unreadPropStyles=null;e.startAnimationIfNecessary();e.setState({currentStyles:g,currentVelocities:h,lastIdealStyles:d,lastIdealVelocities:f})})};this.state=this.defaultState()}f.prototype.defaultState=function(){var a=this.props,b=a.defaultStyles;a=a.styles;b=b||a().map(l["default"]);a=b.map(function(a){return k["default"](a)});return{currentStyles:b,currentVelocities:a,lastIdealStyles:b,lastIdealVelocities:a}};f.prototype.componentDidMount=function(){this.prevTime=n["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyles!=null&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=a.styles(this.state.lastIdealStyles),this.animationID==null&&(this.prevTime=n["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.animationID!=null&&(p["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=this.props.children(this.state.currentStyles);return a&&r["default"].Children.only(a)};return f}(r["default"].Component);G["default"]=c;H.exports=G["default"]}var I=!1,ea=function(){I||(I=!0,da());return H.exports},J={},K={exports:J};function fa(){__p&&__p();J.__esModule=!0;J["default"]=a;function a(a,b,c){__p&&__p();var d={};for(var e=0;e<a.length;e++)d[a[e].key]=e;var f={};for(var e=0;e<b.length;e++)f[b[e].key]=e;var g=[];for(var e=0;e<b.length;e++)g[e]=b[e];for(var e=0;e<a.length;e++)if(!Object.prototype.hasOwnProperty.call(f,a[e].key)){var h=c(e,a[e]);h!=null&&g.push(h)}return g.sort(function(a,c){__p&&__p();var e=f[a.key],g=f[c.key],h=d[a.key],i=d[c.key];if(e!=null&&g!=null)return f[a.key]-f[c.key];else if(h!=null&&i!=null)return d[a.key]-d[c.key];else if(e!=null){for(var a=0;a<b.length;a++){c=b[a].key;if(!Object.prototype.hasOwnProperty.call(d,c))continue;if(e<f[c]&&i>d[c])return-1;else if(e>f[c]&&i<d[c])return 1}return 1}for(var a=0;a<b.length;a++){c=b[a].key;if(!Object.prototype.hasOwnProperty.call(d,c))continue;if(g<f[c]&&h>d[c])return 1;else if(g>f[c]&&h<d[c])return-1}return-1})}K.exports=J["default"]}var L=!1,ga=function(){L||(L=!0,fa());return K.exports},M={},N={exports:M};function ha(){__p&&__p();M.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b=function(){__p&&__p();function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=o(),k=c(f);f=t();var l=c(f);f=y();var m=c(f);f=ga();var n=c(f);f=g();var p=c(f);f=h();var q=c(f);f=C();var r=c(f);f=i();var s=c(f);f=j();var u=c(f),v=1e3/60;function w(a,b,c){var d=b;return d==null?a.map(function(a,b){return{key:a.key,data:a.data,style:c[b]}}):a.map(function(a,b){for(var e=0;e<d.length;e++)if(d[e].key===a.key)return{key:d[e].key,data:d[e].data,style:c[b]};return{key:a.key,data:a.data,style:c[b]}})}function x(a,b,c,d){if(d.length!==b.length)return!1;for(var e=0;e<d.length;e++)if(d[e].key!==b[e].key)return!1;for(var e=0;e<d.length;e++)if(!r["default"](a[e],b[e].style,c[e]))return!1;return!0}function z(a,b,c,d,e,f,g,h,i){__p&&__p();e=n["default"](d,e,function(a,d){__p&&__p();var e=b(d);if(e==null){c({key:d.key,data:d.data});return null}if(r["default"](f[a],e,g[a])){c({key:d.key,data:d.data});return null}return{key:d.key,data:d.data,style:e}});var j=[],l=[],m=[],o=[];for(var p=0;p<e.length;p++){var q=e[p],s=null;for(var t=0;t<d.length;t++)if(d[t].key===q.key){s=t;break}if(s==null){t=a(q);j[p]=t;m[p]=t;t=k["default"](q.style);l[p]=t;o[p]=t}else j[p]=f[s],m[p]=h[s],l[p]=g[s],o[p]=i[s]}return[e,j,l,m,o]}c=function(c){__p&&__p();e(f,c);b(f,null,[{key:"propTypes",value:{defaultStyles:u["default"].arrayOf(u["default"].shape({key:u["default"].string.isRequired,data:u["default"].any,style:u["default"].objectOf(u["default"].number).isRequired})),styles:u["default"].oneOfType([u["default"].func,u["default"].arrayOf(u["default"].shape({key:u["default"].string.isRequired,data:u["default"].any,style:u["default"].objectOf(u["default"].oneOfType([u["default"].number,u["default"].object])).isRequired}))]).isRequired,children:u["default"].func.isRequired,willEnter:u["default"].func,willLeave:u["default"].func,didLeave:u["default"].func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(a){return l["default"](a.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]);function f(b){__p&&__p();var e=this;d(this,f);c.call(this,b);this.unmounting=!1;this.animationID=null;this.prevTime=0;this.accumulatedTime=0;this.unreadPropStyles=null;this.clearUnreadPropStyle=function(b){__p&&__p();var c=z(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,b,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),d=c[0],f=c[1],g=c[2],h=c[3];c=c[4];for(var i=0;i<b.length;i++){var j=b[i].style,k=!1;for(var l in j){if(!Object.prototype.hasOwnProperty.call(j,l))continue;var m=j[l];typeof m==="number"&&(k||(k=!0,f[i]=a({},f[i]),g[i]=a({},g[i]),h[i]=a({},h[i]),c[i]=a({},c[i]),d[i]={key:d[i].key,data:d[i].data,style:a({},d[i].style)}),f[i][l]=m,g[i][l]=0,h[i][l]=m,c[i][l]=0,d[i].style[l]=m)}}e.setState({currentStyles:f,currentVelocities:g,mergedPropsStyles:d,lastIdealStyles:h,lastIdealVelocities:c})};this.startAnimationIfNecessary=function(){__p&&__p();if(e.unmounting)return;e.animationID=q["default"](function(a){__p&&__p();if(e.unmounting)return;var b=e.props.styles;b=typeof b==="function"?b(w(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):b;if(x(e.state.currentStyles,b,e.state.currentVelocities,e.state.mergedPropsStyles)){e.animationID=null;e.accumulatedTime=0;return}a=a||p["default"]();var c=a-e.prevTime;e.prevTime=a;e.accumulatedTime=e.accumulatedTime+c;e.accumulatedTime>v*10&&(e.accumulatedTime=0);if(e.accumulatedTime===0){e.animationID=null;e.startAnimationIfNecessary();return}a=(e.accumulatedTime-Math.floor(e.accumulatedTime/v)*v)/v;c=Math.floor(e.accumulatedTime/v);b=z(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,b,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities);var d=b[0],f=b[1],g=b[2],h=b[3];b=b[4];for(var i=0;i<d.length;i++){var j=d[i].style,k={},l={},n={},o={};for(var q in j){if(!Object.prototype.hasOwnProperty.call(j,q))continue;var r=j[q];if(typeof r==="number")k[q]=r,l[q]=0,n[q]=r,o[q]=0;else{var s=h[i][q],t=b[i][q];for(var u=0;u<c;u++){var y=m["default"](v/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);s=y[0];t=y[1]}y=m["default"](v/1e3,s,t,r.val,r.stiffness,r.damping,r.precision);u=y[0];r=y[1];k[q]=s+(u-s)*a;l[q]=t+(r-t)*a;n[q]=s;o[q]=t}}h[i]=n;b[i]=o;f[i]=k;g[i]=l}e.animationID=null;e.accumulatedTime-=c*v;e.unreadPropStyles=null;e.startAnimationIfNecessary();e.setState({currentStyles:f,currentVelocities:g,lastIdealStyles:h,lastIdealVelocities:b,mergedPropsStyles:d})})};this.state=this.defaultState()}f.prototype.defaultState=function(){__p&&__p();var a=this.props,b=a.defaultStyles,c=a.styles,d=a.willEnter,e=a.willLeave;a=a.didLeave;var f=typeof c==="function"?c(b):c;c=void 0;b==null?c=f:c=b.map(function(a){for(var b=0;b<f.length;b++)if(f[b].key===a.key)return f[b];return a});var g=b==null?f.map(function(a){return l["default"](a.style)}):b.map(function(a){return l["default"](a.style)});b=b==null?f.map(function(a){return k["default"](a.style)}):b.map(function(a){return k["default"](a.style)});d=z(d,e,a,c,f,g,b,g,b);e=d[0];a=d[1];c=d[2];g=d[3];b=d[4];return{currentStyles:a,currentVelocities:c,lastIdealStyles:g,lastIdealVelocities:b,mergedPropsStyles:e}};f.prototype.componentDidMount=function(){this.prevTime=p["default"](),this.startAnimationIfNecessary()};f.prototype.componentWillReceiveProps=function(a){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);a=a.styles;typeof a==="function"?this.unreadPropStyles=a(w(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):this.unreadPropStyles=a;this.animationID==null&&(this.prevTime=p["default"](),this.startAnimationIfNecessary())};f.prototype.componentWillUnmount=function(){this.unmounting=!0,this.animationID!=null&&(q["default"].cancel(this.animationID),this.animationID=null)};f.prototype.render=function(){var a=w(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles);a=this.props.children(a);return a&&s["default"].Children.only(a)};return f}(s["default"].Component);M["default"]=c;N.exports=M["default"]}var O=!1,ia=function(){O||(O=!0,ha());return N.exports},P={},Q={exports:P};function ja(){P.__esModule=!0,P["default"]={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},Q.exports=P["default"]}var R=!1,S=function(){R||(R=!0,ja());return Q.exports},T={},U={exports:T};function ka(){__p&&__p();T.__esModule=!0;var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};T["default"]=d;function b(a){return a&&a.__esModule?a:{"default":a}}d=S();b=b(d);var c=a({},b["default"].noWobble,{precision:.01});function d(b,d){return a({},c,d,{val:b})}U.exports=T["default"]}var V=!1,la=function(){V||(V=!0,ka());return U.exports},W={},X={exports:W};function ma(){W.__esModule=!0;W["default"]=a;function a(){}X.exports=W["default"]}var Y=!1,na=function(){Y||(Y=!0,ma());return X.exports},Z={},oa={exports:Z};function pa(){__p&&__p();Z.__esModule=!0;function a(a){return a&&a.__esModule?a["default"]:a}var b=ca();Z.Motion=a(b);b=ea();Z.StaggeredMotion=a(b);b=ia();Z.TransitionMotion=a(b);b=la();Z.spring=a(b);b=S();Z.presets=a(b);b=t();Z.stripStyle=a(b);b=na();Z.reorderKeys=a(b)}var $=!1,qa=function(){$||($=!0,pa());return oa.exports};c=function(a){switch(a){case void 0:return qa()}};e.exports=c}),null);
__d("react-motion",["react-motion-0.5.2"],(function(a,b,c,d,e,f){e.exports=b("react-motion-0.5.2")()}),null);
__d("ReactMotion",["react-motion"],(function(a,b,c,d,e,f){e.exports=b("react-motion")}),null);
__d("RTCSelfViewTile.react",["cx","React","ReactMotion","RTCElementResizeListener.react","RTCSelfViewAnimationConfig","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReactMotion").Motion,i=b("ReactMotion").spring,j=b("RTCSelfViewAnimationConfig").springConfig;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={width:0},c.$1=function(a){c.setState({width:a.width})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;return b("React").jsx(h,{defaultStyle:{x:0},style:{x:i(this.state.width-k(this.props,this.state),j)},children:function(c){return b("React").jsxs("div",{className:b("joinClasses")("_drs"+(a.props.focused?" focused":"")+(a.props.hovered?" hovered":""),a.props.className),"data-testid":"RTCSelfView",style:babelHelpers["extends"]({width:k(a.props,a.state)},a.props.style),children:[b("React").jsx("div",{className:"_drt",style:{width:a.state.width},children:b("React").jsx(b("RTCElementResizeListener.react"),{className:"_dru",onResize:a.$1,style:{transform:"translateX("+c.x+"px)"},children:a.props.children})}),b("React").jsx("button",{className:"_drv",onClick:a.props.onClick})]})}})};d.componentDidUpdate=function(a,b){var c=k(this.props,this.state);c!==k(a,b)&&this.props.onResize({width:c,height:0})};return c}(b("React").PureComponent);a.defaultProps={collapsed:!1,focused:!1,hovered:!1};function k(a,b){return a.collapsed?a.focused||a.hovered?30:22:b.width}e.exports=a}),null);
__d("RTCSelfViewTileLayer.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className,e=a.renderBackground;e=e===void 0?!1:e;var f=a.visible;f=f===void 0?!0:f;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","renderBackground","visible"]);return b("React").jsx("div",babelHelpers["extends"]({className:b("joinClasses")("_drw"+(f?" _drx":"")+(e?" _dry":""),d)},a,{children:c}))};e.exports=a}),null);
__d("RTCSelfViewCameraStream.react",["cx","fbt","CssBackgroundImage.react","Image.react","React","RTCSelfViewTile.react","RTCSelfViewTileLayer.react","RTCSVGIcon.react","RTCUIMicrophoneIcon.react","RTCUIVideo.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.collapsed,d=a.focused,e=a.isCollapsible,f=a.isFilterMode,g=a.hovered,i=a.user;a=babelHelpers.objectWithoutPropertiesLoose(a,["collapsed","focused","isCollapsible","isFilterMode","hovered","user"]);var j=i.isAudioMuted(),k=i.getStream(),l=i.isVideoMuted();return b("React").jsxs(b("RTCSelfViewTile.react"),{className:a.className,collapsed:c,focused:d,hovered:g,onClick:a.onClick,onResize:a.onResize,style:a.style,children:[b("React").jsx(b("RTCUIVideo.react"),{className:"_88q"+(i.isVideoMuted()||k==null?" muted":""),"data-testid":"SelfViewCameraVideo",mirror:!0,muted:!0,onReady:a.onVideoReady,stream:k}),b("React").jsxs(b("RTCSelfViewTileLayer.react"),{renderBackground:j||l,visible:l,children:[b("RTWebClientFeatureGating").callUnification()?b("React").jsx(b("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6qn8",height:"100%",imageURI:i.profilePictureUrl,width:"100%"}):null,b("React").jsx(b("Image.react"),{alt:h._("Foto del perfil"),className:"_6m1b",src:i.profilePictureUrl})]}),b("React").jsx(b("RTCSelfViewTileLayer.react"),{renderBackground:!1,visible:j,children:b("React").jsx(b("RTCUIMicrophoneIcon.react"),{className:"_drz _7do8",shadow:!0,strikeThrough:!0})}),f||!e?null:b("React").jsx(b("RTCSelfViewTileLayer.react"),{renderBackground:d||g,children:b("React").jsx(b("RTCSVGIcon.react"),{children:b("React").jsx("svg",{className:"_drz _dr_",viewBox:"0 0 8 28",children:b("React").jsx("path",{d:c?"M6 2L2 14L6 26":"M2 2L6 14L2 26",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3})})})})]})};e.exports=a}),null);
__d("RTCSelfViewScreenStream.react",["cx","fbt","FBRTCVideo.react","React","RTCSelfViewTile.react","RTCSelfViewTileLayer.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){var a=c.props.user.getScreenStream();if(!a||!c.props.onStopSharing)return;c.props.onStopSharing(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.focused,d=a.hovered;a=a.user;a=a.getScreenStream();return!a?null:b("React").jsxs(b("RTCSelfViewTile.react"),{focused:c,hovered:d,onClick:this.$1,onResize:this.props.onResize,style:this.props.style,children:[b("React").jsx(b("FBRTCVideo.react"),{className:"_88q",mediaStream:a,muted:!0}),this.props.onStopSharing!=null?b("React").jsx(b("RTCSelfViewTileLayer.react"),{renderBackground:!0,visible:c||d,children:b("React").jsx("span",{className:"_dr-",children:h._("Detener")})}):null]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCSelfViewBase.react",["cx","FBRTCSupport","React","ReactMotion","RTCGroupCallEscalationStore","RTCSelfViewAnimationConfig","RTCSelfViewCameraStream.react","RTCSelfViewScreenStream.react","RTWebClientFeatureGating","RTWebUserActionLogger","joinClasses","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReactMotion").TransitionMotion,i=b("ReactMotion").spring,j=b("ReactMotion").stripStyle,k=b("RTCSelfViewAnimationConfig").springConfig,l=10,m=b("keyMirror")({CAMERA:null,SCREEN:null});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={cameraViewCollapsed:!1,filtersEnabled:!1,focused:!1,hovered:!1,showFilterOptions:!1,isVideoReady:!1,tiles:[],width:0},b)||babelHelpers.assertThisInitialized(c)}c.getDerivedStateFromProps=function(a,b){var c=p(a);return{filtersEnabled:c,showFilterOptions:c?b.showFilterOptions:!1,tiles:n(a,b.tiles)}};var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.className,e=c.user;if(!this.$1())return null;c=this.state;var f=c.cameraViewCollapsed,g=c.focused,l=c.hovered;return b("React").jsx(h,{styles:this.$2(),willEnter:function(a){a=a.style;return babelHelpers["extends"]({},j(a),{opacity:0})},willLeave:function(a){a=a.style;return babelHelpers["extends"]({},a,{opacity:i(0,k)})},children:function(c){__p&&__p();return b("React").jsx("div",{className:b("joinClasses")("_u2-"+(a.state.showFilterOptions?" filters":""),d),onBlur:function(){return a.setState({focused:!1})},onFocus:function(){return a.setState({focused:!0})},onMouseDown:a.props.onMouseDown,onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})},style:babelHelpers["extends"]({},a.props.style,{width:a.state.width}),children:c.map(function(c){__p&&__p();switch(c.key){case m.CAMERA:return b("React").jsx(b("RTCSelfViewCameraStream.react"),{className:a.state.isVideoReady?"":"invisible_elem",collapsed:f,focused:g,hovered:l,isCollapsible:a.props.isCollapsible,isFilterMode:a.state.showFilterOptions,onClick:function(){if(!a.props.isCollapsible)return;a.$3(!a.state.cameraViewCollapsed);a.setState(function(a){return{cameraViewCollapsed:!a.cameraViewCollapsed,showFilterOptions:!1}})},onResize:function(b){return a.$4(m.CAMERA,b.width)},onVideoReady:function(){a.setState({isVideoReady:!0})},style:a.$5(c.style),user:e},c.key);case m.SCREEN:return b("React").jsx(b("RTCSelfViewScreenStream.react"),{focused:g,hovered:l,onResize:function(b){return a.$4(m.SCREEN,b.width)},onStopSharing:a.props.onScreenSharingStop,style:a.$5(c.style),user:e},c.key);default:return null}})})}})};d.$1=function(){return this.props.user.hasVideo()||this.props.user.hasScreenStream()||b("RTWebClientFeatureGating").callUnification()||b("RTWebClientFeatureGating").answerCallWithThreeButtons()&&!this.props.isAudioCall};d.$2=function(){var a=this.state.tiles,b=a.map(function(a){return a.width});return a.map(function(a,c){var d=b.reduce(function(a,b,d){return b<=0||d<=c?a:a+b+l},0);return{key:a.type,style:{opacity:i(1,k),x:i(d,k)}}})};d.$4=function(a,b){this.setState(function(c){c=c.tiles;return{tiles:c.map(function(c){return c.type===a?o(a,b):c})}})};d.$5=function(a){var b=a.opacity;a=a.x;return{opacity:b,transform:"translateX(-"+a+"px)"}};d.$3=function(a){b("RTWebUserActionLogger").logClick({component:a?"self_view_minimize":"self_view_unminimize",surface:"call_container"})};d.componentDidMount=function(){b("RTWebUserActionLogger").logImpression({component:"self_view",surface:"call_container"})};d.componentDidUpdate=function(a,b){__p&&__p();if(b.tiles!==this.state.tiles){a=this.state.tiles.reduce(function(a,b,c){b=b.width;return b<=0?a:c>0?a+b+l:a+b},0);this.setState({width:a})}if(b.width!==this.state.width){a=this.props.onResize;a!=null&&a({height:0,width:this.state.width})}};return c}(b("React").PureComponent);a.defaultProps={hideCameraViewWhenScreenSharing:!1,isCollapsible:!0,isDominantSpeaker:!1};function n(a,b){__p&&__p();var c=a.user;b=b;var d=b.find(function(a){return a.type===m.CAMERA});c.hasStream()&&!(a.hideCameraViewWhenScreenSharing&&c.hasScreenStream())?d==null&&(b=[].concat(b,[o(m.CAMERA)])):d!=null&&(b=b.filter(function(a){return a.type!==m.CAMERA}));a=b.find(function(a){return a.type===m.SCREEN});c.hasScreenStream()?a==null&&(b=[o(m.SCREEN)].concat(b)):a&&(b=b.filter(function(a){return a.type!==m.SCREEN}));return b}function o(a,b){b===void 0&&(b=0);return{type:a,width:b}}function p(a){if(!b("FBRTCSupport").isVideoFilterEffectSupported()||a.hideCameraViewWhenScreenSharing&&a.user.hasScreenStream()||a.user.isVideoMuted())return!1;var c=b("RTCGroupCallEscalationStore").getState().readyToTransition;return a.isP2P?b("RTWebClientFeatureGating").canUseP2PVideoFilters():!c&&b("RTWebClientFeatureGating").canUseMWVideoFilters()}e.exports=a}),null);
__d("RTCDraggableSelfView.react",["React","Rect","RTCInCallFeaturesUtils","RTCSelfViewBase.react","getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RTCInCallFeaturesUtils").BOUNDING_BOX_MARGIN,h=b("RTCInCallFeaturesUtils").Corners,i=b("RTCInCallFeaturesUtils").SELF_VIEW_HEIGHT,j=b("RTCInCallFeaturesUtils").SELF_VIEW_WIDTH,k=b("RTCInCallFeaturesUtils").SETTINGS_HEIGHT;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={draggingEnabled:!1,snappedCorner:h.BOTTOM_RIGHT,isMouseDown:!1,offsetLeft:0,offsetTop:0,mouseInSelfViewX:0,mouseInSelfViewY:0,screenHeight:0,screenWidth:0,boundingBox:new(b("Rect"))(0,0,0,0)},d.$1=function(a){a.preventDefault();var b=a.clientX,c=a.clientY;d.setState(function(a){return{mouseInSelfViewX:a.offsetLeft-b,mouseInSelfViewY:a.offsetTop-c,isMouseDown:!0,snappedCorner:h.NO_CORNER}})},d.$4=function(){if(!d.state.isMouseDown)return;d.setState(function(a){return babelHelpers["extends"]({},b("RTCInCallFeaturesUtils").snapToCorner(a,a.screenWidth,a.screenHeight),{isMouseDown:!1})})},d.$5=function(a){if(!d.state.isMouseDown)return;var b=a.clientX,c=a.clientY;d.setState(function(a){return d.$2({offsetLeft:a.mouseInSelfViewX+b,offsetTop:a.mouseInSelfViewY+c},a.boundingBox)})},d.$6=function(){d.$3(),d.setState(function(a){return a.snappedCorner!==h.NO_CORNER?b("RTCInCallFeaturesUtils").getCornerPosition(a.screenWidth,a.screenHeight,a.snappedCorner):d.$2(a,a.boundingBox)})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("RTCSelfViewBase.react"),babelHelpers["extends"]({},this.props,{isCollapsible:!1,onMouseDown:this.$1,style:babelHelpers["extends"]({},this.props.style,{left:this.state.offsetLeft+"px",top:this.state.offsetTop+"px",position:"fixed"})}))};d.$2=function(a,c){var d=a.offsetLeft;a=a.offsetTop;a=new(b("Rect"))(a,d+j,a+i,d).boundWithin(c);return{offsetLeft:a.getLeft(),offsetTop:a.getTop()}};d.$3=function(){var a=b("getViewportDimensions").withoutScrollbars(),c=a.width;a=a.height;this.setState({screenWidth:c,screenHeight:a,boundingBox:new(b("Rect"))(g+k,c-g,a-g,g)})};d.$7=function(){var a=b("getViewportDimensions").withoutScrollbars(),c=a.width;a=a.height;this.setState({offsetLeft:c-j-g,offsetTop:a-i-g})};d.componentDidMount=function(){this.$7(),window.addEventListener("mousemove",this.$5),window.addEventListener("mouseup",this.$4),this.$3(),window.addEventListener("resize",this.$6)};d.componentDidUpdate=function(a,b){a=this.props.isDominantSpeaker!==!0||this.props.user.hasScreenStream();this.state.draggingEnabled&&a&&this.$7();this.setState({draggingEnabled:!a})};d.componentWillUnmount=function(){window.removeEventListener("mousemove",this.$5),window.removeEventListener("mouseup",this.$4),window.removeEventListener("resize",this.$6)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCSelfView.react",["React","RTCDraggableSelfView.react","RTCSelfViewBase.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("RTWebClientFeatureGating").draggableSelfView()?b("React").jsx(b("RTCDraggableSelfView.react"),babelHelpers["extends"]({},a)):b("React").jsx(b("RTCSelfViewBase.react"),babelHelpers["extends"]({},a))}e.exports=a}),null);
__d("MediaAccessErrorParser",["FBRTCLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={printUserMediaRequestError:function(a){__p&&__p();if(a==null)return"Unknown Error";switch(a.name){case"AbortError":return"Hardware Access aborted.";case"NotAllowedError":return"Access to Media Devices has been denied.";case"NotFoundError":return"Devices matching requirements were not found or were not accessible.";case"NotReadableError":return"Hardware Access Error.";case"OverconstrainedError":return"Media Constraints not met.";case"SecurityError":return"User media support is disabled.";case"TypeError":return"Media Constraints corrupted.";default:b("FBRTCLogger").getInstance().logErrorWithoutID(a);return a.message?a.message:"Unknown Error"}}};e.exports=a}),null);
__d("RTCUserMediaRequest",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({error:null,state:null});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("FBRTCGroupCallIncallVideo.react",["cx","fbt","Image.react","React","RTCIncallAudio.react","RTCIncallVideo.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){var c=a.displayNone;c=c===void 0?!1:c;var d=a.isAudioCall;d=d===void 0?!1:d;a=a.user;var e=a.getStream();return e&&!a.areAllTracksMuted(e.getVideoTracks())?b("React").jsx(b("RTCIncallVideo.react"),{className:"_5k9_"+(c?" none":""),mediaStream:e}):b("React").jsx("div",{className:"_5k9_"+(c?" none":"")+(d&&!b("RTWebClientFeatureGating").callUnification()?" hidden":""),children:b("React").jsxs("div",{className:"_2_gq",children:[b("React").jsx(b("Image.react"),{className:"_2_gr",src:a.profilePictureUrl}),b("React").jsx(b("Image.react"),{alt:h._("Foto del perfil"),className:"_2_gs",src:a.profilePictureUrl}),b("React").jsx("p",{className:"_5ka3",children:d?h._("{name}",[h._param("name",a.userName)]):h._("La c\u00e1mara de {name} est\u00e1 desactivada",[h._param("name",a.userShortName)])}),b("React").jsx(b("RTCIncallAudio.react"),{mediaStream:e})]})})};e.exports=a}),null);
__d("FBRTCGroupCallFixedHeightGridViewUtils",["FBRTCConstants","getViewportDimensions","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").Orientation,h=function(){this.users=[],this.numUnits=0};function a(a){return a.sort(function(a,b){return a.user.FBID.localeCompare(b.user.FBID)})}var i={FixedHeightGridRow:h,calculateContainerDimensions:function(){var a=b("getViewportDimensions").withoutScrollbars(),c=a.height-200;a=a.width;return{height:c,width:a}},calculateUnitDimensions:function(a,b,c){__p&&__p();var d=a.filter(function(a){return a.numUnits>0}).length;if(d===0)return{unitHeight:0,unitWidth:0};a=a[0].numUnits;var e=.91*c;c=c/d;d=Math.min(e,c);e=d*3/4;e*a>=b&&(e=b/a,d=e*4/3);return{unitHeight:d,unitWidth:e}},getWindowIsLandscape:function(){var a=b("getViewportDimensions").withoutScrollbars();return a.width>a.height},setUpGrid:function(a,b,c){__p&&__p();var d=[new h(),new h(),new h(),new h()];if(c){if(a.length+b.length<=3&&a.length!==3){d[0].users=[].concat(a,b);d[0].numUnits=a.length*2+b.length;return d}c=Math.ceil(a.length/2);d[0].users=a.slice(0,c);d[0].numUnits=c*2;d[1].users=a.slice(c);d[1].numUnits=(a.length-c)*2;b.forEach(function(a){d[1].numUnits<d[0].numUnits?(d[1].users.push(a),d[1].numUnits+=1):(d[0].users.push(a),d[0].numUnits+=1)});return d}else if(a.length*2+b.length<=6){a.forEach(function(a,b){d[b].users.push(a),d[b].numUnits=2});c=a.length;for(var e=0;e<b.length;e+=2)d[c].users.push(b[e]),d[c].numUnits+=1,b[e+1]&&(d[c].users.push(b[e+1]),d[c].numUnits+=1,c++);return d}else{e=0;for(var c=0;c<a.length;c+=2)d[e].users.push(a[c]),d[e].numUnits+=2,a[c+1]&&(d[e].users.push(a[c+1]),d[e].numUnits+=2,e++);for(var c=0;c<b.length;c++)d[e].numUnits>=4&&e++,d[e].users.push(b[c]),d[e].numUnits+=1;return d}},sortRTCUserAndOrientation:a,getFixedHeightGridRows:function(a){var b=[],c=[];a.forEach(function(a){a.orientation===g.LANDSCAPE?b.push(a):c.push(a)});return i.setUpGrid(i.sortRTCUserAndOrientation(b),i.sortRTCUserAndOrientation(c),i.getWindowIsLandscape())},getOrientationsForUsers:function(a,b){__p&&__p();var c=[],d=[];a.forEach(function(a){var e=b.find(function(b){return b.user.FBID===a.FBID});if(e!==void 0)c.push({orientation:e.orientation,user:a});else{e=a.getStream();e=e!==void 0&&e!==null&&!a.areAllTracksMuted(e.getVideoTracks());e?d.push(a):c.push({orientation:g.PORTRAIT,user:a})}});return{usersWithOrientation:c,usersWithoutOrientation:d}},onUserOrientationChanged:function(a,b){var c=b,d=a.orientation,e=a.user,f=b.findIndex(function(a){return a.user.FBID===e.FBID});f===-1?c=b.push(a):d!==b.get(f).orientation&&(c=b.splice(f,1,a));return c}};e.exports=i}),null);
__d("RTCIncallGridItem.react",["cx","fbt","Image.react","React","RTCIncallAudio.react","RTCRemoteViewPopoverMenuButton.react","RTCVideoWithUserAndOrientation.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=a.user,d=a.style,e=c.getActiveStream()||c.getStream(),f=e!==void 0&&e!==null&&!c.areAllTracksMuted(e.getVideoTracks());return f?b("React").jsxs("div",{className:"_74kp"+(a.isRoundedCorner?" _7akd":""),style:d,children:[b("React").jsx("div",{className:"_7q9p",children:b("React").jsx(b("RTCRemoteViewPopoverMenuButton.react"),{isGuestFromLink:a.isGuestFromLink,user:a.user})}),b("React").jsx(b("RTCVideoWithUserAndOrientation.react"),{audioSinkID:a.audioSinkID,className:"_6qk5","data-testid":"RTCIncallVideo",onOrientationChanged:a.onUserOrientationChanged,stream:e,user:c})]}):b("React").jsxs("div",{className:"_2_gq _74kp"+(a.isRoundedCorner?" _7akd":""),style:d,children:[b("React").jsx("div",{className:"_7q9p",children:b("React").jsx(b("RTCRemoteViewPopoverMenuButton.react"),{isGuestFromLink:a.isGuestFromLink,user:a.user})}),b("React").jsx(b("Image.react"),{className:"_2_gr",src:c.profilePictureUrl}),b("React").jsx(b("Image.react"),{alt:h._("Foto del perfil"),className:"_2_gs",src:c.profilePictureUrl}),b("React").jsx("p",{className:"_5ka3",children:h._("La c\u00e1mara de {name} est\u00e1 desactivada",[h._param("name",c.userShortName)])}),b("React").jsx(b("RTCIncallAudio.react"),{audioSinkID:a.audioSinkID,mediaStream:e})]})};e.exports=a}),null);
__d("RTCGridViewWithOrientation.react",["cx","FBRTCConstants","FBRTCGroupCallFixedHeightGridViewUtils","React","RTCIncallGridItem.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").Orientation,i=b("FBRTCGroupCallFixedHeightGridViewUtils").calculateUnitDimensions,j=b("FBRTCGroupCallFixedHeightGridViewUtils").getFixedHeightGridRows;function a(a){__p&&__p();var c=j(a.users),d=i(c,a.containerWidth,a.containerHeight),e=d.unitHeight,f=d.unitWidth,g={gridTemplateRows:e+"px"},k=a.users.length===1,l=[];c.forEach(function(c,d){if(c.users.length===0)return;var e=1;l.push(b("React").jsx("div",{className:"_6ppt",style:babelHelpers["extends"]({},g,{gridTemplateColumns:(f+"px ").repeat(c.numUnits),width:f*c.numUnits+"px"}),children:c.users.map(function(c){var d={};c.orientation===h.LANDSCAPE?(d={gridColumnStart:e.toString(),gridColumnEnd:(e+2).toString()},e+=2):e+=1;return b("React").jsx(b("RTCIncallGridItem.react"),{audioSinkID:a.audioSinkID,isGuestFromLink:a.isGuestFromLink,isRoundedCorner:k,onUserOrientationChanged:a.onUserOrientationChanged,style:d,user:c.user},c.user.FBID+"_"+c.orientation.toString()+"_"+e)})},d))});return l}e.exports=a}),null);
__d("FBRTCGroupCallFixedHeightGridView.react",["cx","FBRTCGroupCallFixedHeightGridViewUtils","React","RTCGridViewWithOrientation.react","RTCVideoWithUserAndOrientation.react","immutable","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={userAndOrientationList:b("immutable").List()},d.$1=b("throttle")(function(){d.forceUpdate()},300),d.$2=function(a){var c=d.state.userAndOrientationList;a=b("FBRTCGroupCallFixedHeightGridViewUtils").onUserOrientationChanged(a,c);d.setState({userAndOrientationList:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){window.addEventListener("resize",this.$1)};d.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};d.render=function(){var a=this,c=b("FBRTCGroupCallFixedHeightGridViewUtils").getOrientationsForUsers(this.props.remoteUsers.toArray(),this.state.userAndOrientationList.toArray()),d=c.usersWithOrientation;c=c.usersWithoutOrientation;var e=b("FBRTCGroupCallFixedHeightGridViewUtils").calculateContainerDimensions(),f=e.height;e=e.width;return b("React").jsxs("div",{className:"_6ots"+(this.props.hidden?" hide":""),children:[b("React").jsxs("div",{className:"hidden_elem",children:[c.map(function(c){var d=c.getStream();return b("React").jsx(b("RTCVideoWithUserAndOrientation.react"),{audioSinkID:a.props.audioSinkID,onOrientationChanged:a.$2,stream:d,user:c},c.FBID)}),";"]}),b("React").jsx(b("RTCGridViewWithOrientation.react"),{audioSinkID:this.props.audioSinkID,containerHeight:f,containerWidth:e,isGuestFromLink:this.props.isGuestFromLink,onUserOrientationChanged:this.$2,users:d})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBRTCGroupCallIncallView.react",["cx","FBRTCConstants","FBRTCGroupCallFixedHeightGridView.react","FBRTCGroupCallIncallVideo.react","FBRTCGroupCallStore","FluxContainer","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout,i=6;d=function(a){__p&&__p();var c=a.dominantSpeakerFBID,d=a.isAudioCall,e=a.isGuestFromLink;e=e===void 0?!1:e;var f=a.layout,g=a.pinnedSpeakerFBID;a=a.remoteUsers;switch(f){case h.DOMINANT_SPEAKER:f=a.find(function(a){return a.FBID===(g||c)});return f?b("React").jsx("div",{className:"_ncs",children:b("React").jsx(b("FBRTCGroupCallIncallVideo.react"),{isAudioCall:d,user:f})}):null;case h.GRID:return b("React").jsx(b("FBRTCGroupCallFixedHeightGridView.react"),{hidden:d,isGuestFromLink:e,remoteUsers:a});default:return b("React").jsx("div",{className:"_ncs",children:a.map(function(a,c){return b("React").jsx(b("FBRTCGroupCallIncallVideo.react"),{displayNone:c>=i,isAudioCall:d,user:a},a.FBID)})})}};function a(){return[b("FBRTCGroupCallStore")]}function c(a,c){a===void 0&&({});a=b("FBRTCGroupCallStore").getState();var d=a.dominantSpeakerFBID;a=a.pinnedSpeakerFBID;return babelHelpers["extends"]({dominantSpeakerFBID:d,pinnedSpeakerFBID:a},c)}e.exports=b("FluxContainer").createFunctional(d,a,c,{withProps:!0})}),null);
__d("RTCAppView.react",["cx","FBRTCSupport","React","RTCDialogProvider.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.isAudioCall;d=d===void 0?!1:d;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","isAudioCall"]);return b("React").jsx(b("RTCDialogProvider.react"),babelHelpers["extends"]({className:"_32ut"+(d&&!b("FBRTCSupport").isMobileDevice()&&!b("RTWebClientFeatureGating").callUnification()?" _32uu":"")},a,{children:c}))};e.exports=a}),null);
__d("RTCAppViewFooter.react",["cx","React","RTCElementResizeListener.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className"]);return b("React").jsx(b("RTCElementResizeListener.react"),babelHelpers["extends"]({className:b("joinClasses")("_u0t",d),component:"footer","data-testid":"footerView"},a,{children:c}))};e.exports=a}),null);
__d("RTCAppViewHeader.react",["cx","CurrentUser","React","RTCLogo.react","RTWebClientFeatureGating","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className;a.isAudioCall;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","isAudioCall"]);var e=b("CurrentUser").isWorkUser();e=e&&!b("RTWebClientFeatureGating").isChatEnabled()?b("React").jsx(b("RTCLogo.react"),{className:"_4key",mode:"mono"}):null;return b("React").jsxs("header",babelHelpers["extends"]({className:b("joinClasses")("_4keu",d),"data-testid":"headerView"},a,{children:[e,c]}))};e.exports=a}),null);
__d("RTCAppViewMain.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.children,d=a.className,e=a.fullBleed;e=e===void 0?!0:e;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","fullBleed"]);return b("React").jsx("section",babelHelpers["extends"]({className:b("joinClasses")("_3cb2"+(e?" fullBleed":""),d),"data-testid":"contentView"},a,{children:c}))};e.exports=a}),null);
__d("RTCCallUser.react",["cssVar","cx","fbt","AudioContextSingleton","DOM","FBRTCParticipantCallState","MessengerContactImage.react","React","ReactDOM","RTWebStrings","RTWebUserActionLogger","Tooltip"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PureComponent;var j="rgba(0, 132, 255, 0.5)",k=48,l=100;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={audioLevel:0},d.$1=b("DOM").create("div"),d.$2=!1,d.$3=null,d.$4=null,c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$5(),this.$6()};d.componentDidUpdate=function(a){a=a.user;var b=this.props.user.participantState;a=a.participantState;this.$5();if(!this.props.isP2PCall){if(!b||!a)return;b.state!==a.state&&this.$6()}};d.componentWillUnmount=function(){this.$7()};d.render=function(){return this.props.isP2PCall?this.$8():this.$9()};d.$8=function(){var a=this,c=this.props.meetingID!=null;c=c?i._("Uni\u00e9ndote a la reuni\u00f3n con el identificador {meetingID}",[i._param("meetingID",this.props.meetingID)]):this.props.user.userName;return b("React").jsxs("div",{className:"_6hu4",children:[b("React").jsx("div",{className:"_6hu5",style:{boxShadow:"0 0 0 "+this.state.audioLevel+"px "+j},children:b("React").jsx(b("MessengerContactImage.react"),{className:"_6hu6",ref:function(b){a.$4=b},size:l,src:this.props.user.profilePictureUrl})}),b("React").jsx("p",{className:"_dzt",children:c})]})};d.$9=function(){var a=this,c=this.props.user.participantState;return!this.props.isLocal&&!c?null:b("React").jsx("div",{className:"_6hu5",style:{boxShadow:"0 0 0 "+this.state.audioLevel+"px "+j},children:b("React").jsx(b("MessengerContactImage.react"),{className:"_6hu6"+(!this.props.isLocal&&c&&c.state!==b("FBRTCParticipantCallState").CONNECTED?" _6htk":""),ref:function(b){a.$4=b},size:k,src:this.props.user.profilePictureUrl})})};d.$6=function(){if(this.props.isP2PCall||this.props.isLocal)return;b("ReactDOM").render(b("React").jsxs("div",{className:"_6htl",children:[b("React").jsx("div",{className:"_6htm",children:this.props.user.userName}),b("React").jsx("div",{className:"_6htn",children:b("React").jsx(m,{isP2PCall:this.props.isP2PCall,participantState:this.props.user.participantState})})]}),this.$1);b("Tooltip").set(b("ReactDOM").findDOMNode(this.$4),this.$1,"above","center")};d.$5=function(){__p&&__p();var a=this.props.user;a=a.getStream();if(!this.$2&&a&&a.getAudioTracks().length>0)try{var c=b("AudioContextSingleton").get();a=c.createMediaStreamSource(a);c=c.createAnalyser();var d=new Uint8Array(c.frequencyBinCount);a.connect(c);this.$2=!0;this.$10(c,d)}catch(a){this.$7(),b("RTWebUserActionLogger").logErrorOnceforDomain("RTCCallUser__startAnimation_failed",a)}};d.$7=function(){this.$2=!1,window.cancelAnimationFrame(this.$3)};d.$10=function(a,c){__p&&__p();var d=this;this.$3=window.requestAnimationFrame(function(){__p&&__p();if(d.$2){a.getByteFrequencyData(c);try{var e=0;c.forEach(function(a){e+=a});d.setState({audioLevel:Math.floor(e/a.frequencyBinCount/256*40)});d.$10(a,c)}catch(a){b("RTWebUserActionLogger").logErrorOnceforDomain("RTCCallUser_animate_failure",a),d.$7()}}})};return c}(a);var m=function(a){__p&&__p();if(a.isP2PCall)return null;if(a.participantState==null)return null;switch(a.participantState.state){case b("FBRTCParticipantCallState").CONTACTING:return b("RTWebStrings").contacting;case b("FBRTCParticipantCallState").RINGING:return b("RTWebStrings").ringing;case b("FBRTCParticipantCallState").CONNECTING:return b("RTWebStrings").connecting;case b("FBRTCParticipantCallState").CONNECTED:return b("RTWebStrings").connected;default:return null}};e.exports=c}),null);
__d("RTCMediaDeniedPrompt.react",["cx","fbt","React","UserAgent","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){return b("UserAgent").isBrowser("Chrome")?"right":"left"};d.render=function(){var a=this,c=this.props.isAudioCall?h._("Permitir el acceso al micr\u00f3fono"):h._("Permitir el acceso a la c\u00e1mara y al micr\u00f3fono"),d=this.props.isAudioCall?h._("Debes permitir el acceso al micr\u00f3fono para realizar llamadas."):h._("Debes permitir el acceso al micr\u00f3fono y la c\u00e1mara para hablar por videochat.");return b("React").jsxs("span",{className:"_173p",children:[b("React").jsx("div",{className:"_3wrz",ref:"mpTarget"}),b("React").jsxs(b("XUIContextualDialog.react"),{alignment:this.$1(),contextRef:function(){return a.refs.mpTarget},position:"below",shown:!0,width:b("XUIContextualDialog.react").WIDTH.NORMAL,children:[b("React").jsx(b("XUIContextualDialogTitle.react"),{children:c}),b("React").jsx(b("XUIContextualDialogBody.react"),{children:d})]},"popover")]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTCGrantUserMediaAccessView.react",["cx","fbt","FBRTCConfig","Link.react","MediaAccessErrorParser","React","RTCMediaDeniedPrompt.react","RTCSVGIcon.react","RTCSVGIconCatalog","RTCUserMediaRequestState","RTWebClientFeatureGating","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){a.children;var c=a.className,d=a.isAudioCall;d=d===void 0?!1:d;var e=a.userMediaRequest;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","isAudioCall","userMediaRequest"]);return b("React").jsxs(b("React").Fragment,{children:[e.state===b("RTCUserMediaRequestState").REJECTED?b("React").jsx(b("RTCMediaDeniedPrompt.react"),{isAudioCall:d}):null,b("React").jsxs("div",babelHelpers["extends"]({className:b("joinClasses")(c,"_5ajm"+(d?" _4w_w":""))},a,{children:[b("React").jsx(i,{isAudioCall:d,userMediaRequest:e}),b("React").jsx(k,{isAudioCall:d})]}))]})};var i=function(a){var c=a.isAudioCall;a=a.userMediaRequest;return b("React").jsxs("header",{className:"_5ajs",children:[b("React").jsxs("div",{className:"_5b02",children:[c?null:b("React").jsx(b("RTCSVGIcon.react"),{className:"_5b34"+(a.state===b("RTCUserMediaRequestState").REJECTED?" _4w_y":""),children:b("RTCSVGIconCatalog").noCameraIcon}),b("React").jsx(b("RTCSVGIcon.react"),{className:"_5b34"+(a.state===b("RTCUserMediaRequestState").REJECTED?" _4w_y":""),children:b("RTCSVGIconCatalog").noMicIcon})]}),b("React").jsx(j,{isAudioCall:c,userMediaRequest:a})]})},j=function(a){var c=a.isAudioCall;a=a.userMediaRequest;return a.state===b("RTCUserMediaRequestState").REJECTED?b("RTWebClientFeatureGating").showMojavePermissionsWarning()?b("React").jsx(b("React").Fragment,{children:b("React").jsx("h1",{className:"_5b03",children:c?h._("Se produjo un error al intentar acceder al micr\u00f3fono."):h._("Se produjo un error al intentar acceder a la c\u00e1mara y el micr\u00f3fono.")})}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("h1",{className:"_5b03",children:c?h._("Se produjo un error al intentar acceder al micr\u00f3fono:"):h._("Se produjo un error al intentar acceder a la c\u00e1mara o el micr\u00f3fono:")}),b("React").jsx("p",{className:"_4x0t",children:b("MediaAccessErrorParser").printUserMediaRequestError(a.error)})]}):b("React").jsx("h1",{className:"_5b03",children:c?h._("Permite el acceso al micr\u00f3fono"):h._("Permite el acceso a la c\u00e1mara y al micr\u00f3fono")})},k=function(a){a=a.isAudioCall;var c=b("RTWebClientFeatureGating").showMojavePermissionsWarning()?b("React").jsx("p",{className:"_5b2y",children:h._("Si actualizaste el sistema operativo Mac a la versi\u00f3n Mojave, agrega Chrome a la lista de apps permitidas. Ve a \"Preferencias del sistema\", elige \"Seguridad y privacidad\" y agrega Chrome a tu lista de apps permitidas.")}):b("React").jsx("p",{className:"_5b2y",children:a?h._("Para realizar una llamada, debes activar el micr\u00f3fono. De este modo, las personas podr\u00e1n o\u00edrte durante la llamada."):h._("Para realizar una llamada, debes activar la c\u00e1mara y el micr\u00f3fono. De este modo, las personas podr\u00e1n verte y o\u00edrte durante la llamada.")});return b("React").jsxs(b("React").Fragment,{children:[c,b("React").jsxs("p",{className:"_5b2y",children:[a?h._("Puedes desactivarlo m\u00e1s tarde."):h._("Puedes desactivarlos m\u00e1s tarde.")," ",b("React").jsx(b("Link.react"),{href:b("FBRTCConfig").userMediaPermissionErrorUrl(),target:"_blank",children:h._("M\u00e1s informaci\u00f3n")})]})]})};e.exports=a}),null);
__d("RTCGroupCallPeerImage.react",["cx","CurrentUser","MercuryParticipantsConstants","MercuryParticipantsImage.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerProfileImageWrapperReact.bs").jsComponent,i=b("MessengerThreadImageReact.bs").jsComponent;function a(a){if(j(a))return null;var c=a.thread,d=a.participants,e=a.participants.filter(function(a,b){return!a.is_parties_user}),f=Array.from(d.filter(function(a,b){return a.is_parties_user}).map(function(a,b){return a.image_src}).values());return c&&c.image_src?b("React").jsx(i,{className:b("joinClasses")(a.className,"_4j_j"),participants:d,size:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE,thread:c,viewer:b("CurrentUser").getID()}):b("React").jsx(h,{className:"_4j_j",showBadge:!1,size:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE,children:b("React").jsx(b("MercuryParticipantsImage.react"),{participants:Object.keys(e.toJS()),partiesProfileImages:f,size:b("MercuryParticipantsConstants").WWW_INCALL_THUMBNAIL_SIZE})})}function j(a){return!!(a.participants.size<=1&&a.linkHash)}e.exports=a}),null);
__d("RTCGroupCallRosterRow.react",["cx","FBRTCGroupCallUserPopoverMenu.react","FBRTCParticipantCallState","React","RTCCallUser.react","RTCGroupCallDraggableComponent.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.localUser;a=a.remoteUsers;return b("React").jsxs(b("RTCGroupCallDraggableComponent.react"),{className:"_1a8c",children:[a.filter(function(a){return h(a.participantState)}).map(function(a){return b("React").jsx(b("FBRTCGroupCallUserPopoverMenu.react"),{user:a,children:b("React").jsx(b("RTCCallUser.react"),{isLocal:!1,isP2PCall:!1,user:a})},a.FBID)}),b("React").jsx(b("RTCCallUser.react"),{isLocal:!0,isP2PCall:!1,user:c})]})};function h(a){if(a)switch(a.state){case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:case b("FBRTCParticipantCallState").CONNECTED:return!0}return!1}e.exports=a}),null);
__d("RTCGroupCallStateInfo.react",["cx","fbt","CurrentUser","FBRTCCallTimer.react","FBRTCGuestUtils","FBRTCParticipantCallState","MercuryThreadTitle_DEPRECATED.react","React","RTCAppSpinner.react","RTCCallTitle.react","RTCGroupCallPeerImage.react","RTCGroupCallRosterRow.react","RTWebClientFeatureGating","RTWebStrings","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PureComponent;var i=b("RTWebClientFeatureGating").callUnification();function j(a){__p&&__p();var c=a.thread,d=a.participants;if(a.conferenceState==="AWAITING_USER_START")return b("React").jsx("p",{className:(i?"":"_fjp")+(i?" _6to4":""),children:h._("\u00bfLlamar a {name}?",[h._param("name",c!=null&&c.name?b("React").jsx(b("MercuryThreadTitle_DEPRECATED.react"),{thread:c,viewer:b("CurrentUser").getID()}):b("React").jsx(b("RTCCallTitle.react"),{participants:d,viewer:b("CurrentUser").getID()}))])});else if(a.conferenceState==="NEW")return b("React").jsx("p",{className:(i?"":"_fjp")+(i?" _6to4":"")});a=null;if(c!=null){if(c.name!=null&&c.name!=="")a=b("React").jsx(b("MercuryThreadTitle_DEPRECATED.react"),{thread:c,viewer:b("CurrentUser").getID()});else if(c.participants!=null){c=b("FBRTCGuestUtils").fetchParticipantsInThread(c,d);a=b("React").jsx(b("RTCCallTitle.react"),{displayViewerName:!0,participants:c,viewer:b("CurrentUser").getID()})}}else a=b("React").jsx(b("RTCCallTitle.react"),{participants:d,viewer:b("CurrentUser").getID()});return b("React").jsx("p",{className:(i?"":"_fjp")+(i?" _6to4":""),children:a})}function k(a){var c=a.callMessage;return b("React").jsx("p",{className:(i?"":"_fjq")+(i?" _6to5":""),children:c||b("React").jsx(l,babelHelpers["extends"]({start:a.start},a))})}function l(a){switch(a.conferenceState){case"CONNECTING":return a.linkHash!=null||a.participants.size<=1?b("RTWebStrings").waitingForOthers:b("RTWebStrings").contacting;case"CONNECTED":return a.start>0?b("React").jsx(b("FBRTCCallTimer.react"),{start:a.start}):null;case"TERMINATING":return b("RTWebStrings").hangingUp;case"TERMINATED":return b("RTWebStrings").callEnded;case"NEW":return b("React").jsx(b("RTCAppSpinner.react"),{});default:return null}}function m(a){return a.conferenceState!=="CONNECTING"&&a.conferenceState!=="CONNECTED"?null:b("React").jsxs(b("React").Fragment,{children:[a.isAudioCall?b("React").jsx("div",{className:"_7i60",children:h._("EN ESTE CHAT:")}):null,b("React").jsx("div",{className:"_5-tc",children:b("React").jsx(b("RTCGroupCallRosterRow.react"),{localUser:a.localUser,remoteUsers:a.remoteUsers})})]})}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={start:0},b)||babelHelpers.assertThisInitialized(c)}c.getDerivedStateFromProps=function(a,b){var c=a.conferenceState;a=a.initialStartTime;a=a||Date.now();return b.start===0&&c==="CONNECTED"?babelHelpers["extends"]({},b,{start:Math.floor(a/1e3)}):null};var d=c.prototype;d.render=function(){var a=this.props,c=a.remoteUsers.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});c=b("RTWebClientFeatureGating").callUnification()?c.size>=1:!a.isAudioCall&&a.conferenceState!=="TERMINATED";return c?null:b("React").jsxs("div",{className:"_4j_i",children:[b("React").jsx(b("RTCGroupCallPeerImage.react"),babelHelpers["extends"]({},a)),b("React").jsx(j,babelHelpers["extends"]({},a)),b("React").jsx(k,babelHelpers["extends"]({start:this.state.start},a)),b("React").jsx(m,babelHelpers["extends"]({},a))]})};return c}(a);e.exports=c}),null);
__d("FlexboxStyles",[],(function(a,b,c,d,e,f){"use strict";a={alignItems:!0,flexDirection:!0,justifyContent:!0};e.exports=a}),null);
__d("LayoutStyles",["FlexboxStyles"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("FlexboxStyles"),{borderBottomWidth:!0,borderLeftWidth:!0,borderRightWidth:!0,borderTopWidth:!0,borderWidth:!0,bottom:!0,height:!0,left:!0,margin:!0,marginBottom:!0,marginLeft:!0,marginRight:!0,marginTop:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,opacity:!0,overflow:!0,padding:!0,paddingBottom:!0,paddingLeft:!0,paddingRight:!0,paddingTop:!0,position:!0,top:!0,transform:!0,transformOrigin:!0,width:!0});e.exports=a}),null);
__d("ImageStyles",["LayoutStyles"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("LayoutStyles"),{backgroundColor:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderColor:!0,borderRadius:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderWidth:!0,height:!0,opacity:!0,overflow:!0,width:!0});e.exports=a}),null);
__d("flattenStyle",["mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(!a)return null;if(!Array.isArray(a))return b("mapObject").untyped(a,function(b,a){return h(b,a)});var c={};for(var d=0,e=a.length;d<e;++d){var f=g(a[d]);if(f)for(var i in f)c[i]=f[i]}return c}function h(a,b){return b==="lineHeight"&&typeof a==="number"?a+"px":a}e.exports=g}),null);
__d("getValidatedStyle",["filterObject","flattenStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={textDecorationLine:"textDecoration"};function a(a,c){if(!a)return null;a=b("flattenStyle")(a);return h(b("filterObject")(a,function(a,b){return!!c[b]}),g)}function h(a,b){var c=babelHelpers["extends"]({},a);Object.keys(b).forEach(function(a){if(Object.prototype.hasOwnProperty.call(c,a)){var d=b[a];c[d]=c[a];delete c[a]}});return c}e.exports=a}),null);
__d("pluckClassNames",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=[],c=[];Array.isArray(a)?a.forEach(function(a){a=g(a);var d=a.classNames;a=a.styles;b=b.concat(d);c=c.concat(a)}):typeof a==="string"?b.push(a):c.push(a);return{classNames:b,styles:c}}e.exports=g}),null);
__d("Image",["cx","CssBackgroundImage.react","Image.react","ImageStyles","React","getValidatedStyle","joinClasses","pluckClassNames"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={cover:"cover",contain:"contain",stretch:"fill",center:"none"},i={cover:"cover",contain:"contain",stretch:"100% 100%",center:"auto"},j=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.source,d=a.style,e=a.resizeMode;a=babelHelpers.objectWithoutPropertiesLoose(a,["source","style","resizeMode"]);d=b("pluckClassNames")(d);var f=d.classNames;d=d.styles;d=b("getValidatedStyle")(d,b("ImageStyles"));var g=e&&i[e]||"cover";e=e&&h[e]||"cover";var j=c.scale!=null?Math.max(c.scale,1):1;return b("React").jsxs("div",babelHelpers["extends"]({className:b("joinClasses").apply(void 0,["_b5a"].concat(f)),src:c,style:d},a,{children:[b("React").jsx(b("CssBackgroundImage.react"),{className:b("joinClasses")("_b5a _6jm9"),imageURI:c.uri,backgroundPosition:"center center",style:{backgroundSize:g,transform:"scale("+j+", "+j+")"}}),b("React").jsx(b("Image.react"),{className:b("joinClasses")("_b5a _6jma"),src:c,style:{transform:"scale("+j+", "+j+")",objectFit:e}})]}))};return a}(b("React").PureComponent);j.defaultProps={resizeMode:"cover"};function a(a){var c=a.source,d=a.style;a=babelHelpers.objectWithoutPropertiesLoose(a,["source","style"]);if(typeof c==="object"&&c.uri&&c.sprited===void 0)return b("React").jsx(j,babelHelpers["extends"]({source:c,style:d},a));d=b("pluckClassNames")(d);var e=d.classNames;d=d.styles;d=b("getValidatedStyle")(d,b("ImageStyles"));return b("React").jsx(b("Image.react"),babelHelpers["extends"]({className:b("joinClasses").apply(void 0,["_b5a"].concat(e)),src:c,style:d},a))}e.exports=a}),null);
__d("XVideoCallQPController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/incall/qp/",{})}),null);
__d("RTCEndCallQPUtils",["Promise","AsyncRequest","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","XVideoCallQPController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={fetchPromotionData:function(){return new(b("Promise"))(function(a,c){new(b("AsyncRequest"))().setIsBackgroundRequest(!0).setURI(b("XVideoCallQPController").getURIBuilder().getURI()).setPayloadHandler(function(b){if(b!=null&&b.length>0)return a(b[0]);a(null)}).setErrorHandler(function(a){return c(new Error(a.getErrorDescriptionString()||a.error.toString()))}).send()})},logPromotionAsSeen:function(a){return new(b("Promise"))(function(c,d){new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",a.promotionID).setStringToStringMap("instance_log_data",a.instanceLogData).getURI()).setPayloadHandler(function(a){return c()}).setErrorHandler(function(a){return d(new Error(a.getErrorDescriptionString()||a.error.toString()))}).send()})},logPromotionPrimaryAction:function(a){return new(b("Promise"))(function(c,d){new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",a.instanceLogData).getURI()).setPayloadHandler(function(a){return c()}).setErrorHandler(function(a){return d(new Error(a.getErrorDescriptionString()||a.error.toString()))}).send()})},logPromotionDismissAction:function(a){return new(b("Promise"))(function(c,d){new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",a.instanceLogData).getURI()).setErrorHandler(function(a){return d(new Error(a.getErrorDescriptionString()||a.error.toString()))}).send()})}};e.exports=a}),null);
__d("RTCEndCallQPSurface.react",["cx","invariant","Image","React","RTCCallStore","RTCEndCallQPUtils","RTCP2PCallStore","RTCTextButton.react","VFWebLogger","joinClasses","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=850;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={isDismissed:!1,isEnoughSpace:!1,isMarkedAsSeen:!1,promotionData:null},c.$2=function(){c.setState({isEnoughSpace:document.body!=null&&document.body.getBoundingClientRect().width>i})},c.$4=function(a){a!=null&&c.setState({promotionData:a,isDismissed:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$3=function(){var a=b("RTCCallStore").getState();a=a.callSummary;a=a?a.getCallDuration():0;return a!=null&&a>0&&this.props.visible&&this.state.promotionData!=null&&!this.state.isDismissed&&this.state.isEnoughSpace};d.componentDidMount=function(){window!=null&&window.addEventListener!=null&&(window.addEventListener("resize",this.$2),this.$2())};d.componentWillUnmount=function(){window!=null&&window.removeEventListener!=null&&window.removeEventListener("resize",this.$2)};d.componentDidUpdate=function(a){var c=this;a=this.state;var d=a.isMarkedAsSeen;a=a.promotionData;!this.$1&&this.props.conferenceState==="CONNECTED"&&(this.$1=!0,b("promiseDone")(b("RTCEndCallQPUtils").fetchPromotionData().then(this.$4)["catch"](function(a){return b("VFWebLogger").logError(null,"EndCallQP_fetchDataError",a.message)})));!d&&this.$3()&&(a!=null||h(0,14440),b("promiseDone")(b("RTCEndCallQPUtils").logPromotionAsSeen(a).then(function(a){return c.setState({isMarkedAsSeen:!0})})["catch"](function(a){return b("VFWebLogger").logError(null,"EndCallQP_logImpressionError",a.message)})))};d.render=function(){var a=this;if(!this.$3())return null;var c=this.props.className,d=this.state.promotionData;d!=null||h(0,14438);var e=this.props.darkMode!=null?this.props.darkMode:!b("RTCP2PCallStore").isAudioOnly();return b("React").jsx("div",{className:b("joinClasses")("_7q_0"+(e?" _7q-q":""),c),children:b("React").jsx(j,{onClose:function(b){return a.setState({isDismissed:!0})},promotionData:d})})};return c}(b("React").PureComponent);function j(a){var c=a.onClose,d=a.promotionData;a=function(){b("promiseDone")(b("RTCEndCallQPUtils").logPromotionPrimaryAction(d)["catch"](function(a){return b("VFWebLogger").logError(null,"EndCallQP_primaryActionError",a.message)})),window.open(d.primaryActionURI)};(function(){b("promiseDone")(b("RTCEndCallQPUtils").logPromotionDismissAction(d)["catch"](function(a){return b("VFWebLogger").logError(null,"EndCallQP_dismissActionError",a.message)})),c()});return b("React").jsxs("div",{className:"_7q-r",children:[b("React").jsx("div",{className:"_7q-s",children:d.promotionTitle}),b("React").jsx("div",{className:"_7q-t",children:d.promotionContent}),b("React").jsx("div",{className:"_7q_1",children:b("React").jsx(b("RTCTextButton.react"),{className:"blue",label:d.primaryActionTitle,onClick:a})}),b("React").jsx("div",{className:"_7q_2",children:b("React").jsx(b("Image"),{className:"_7q_3",source:d.promotionImageURI})})]})}e.exports=a}),null);
__d("RTCMWAppViewContent.react",["cx","fbt","CurrentUser","FBRTCConstants","FBRTCEndCallWarningOverlayContainer.react","FBRTCGroupCallIncallView.react","FBRTCGroupCallStore","FBRTCLogger","FBRTCParticipantCallState","MessengerRTCGroupCallParticipantsPickerDialogController","React","RTCAppViewMain.react","RTCCallConnectionStatus.react","RTCCallStateInfo.react","RTCGroupCallEscalationStore","RTCGroupCallStateInfo.react","RTCRingBackTone.react","RTCStarRating.react","RTCTextButton.react","RTCThreadInfo.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FBRTCConstants").GroupVideoViewLayout,j=b("FBRTCLogger").Trigger;a=b("React").PureComponent;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={wasStarRatingDone:!1},c.$3=function(){c.setState({wasStarRatingDone:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c,d=this.props,e=d.endCallReason,f=d.remoteUsers;d=babelHelpers.objectWithoutPropertiesLoose(d,["endCallReason","remoteUsers"]);switch(this.props.conferenceState){case"AWAITING_USER_START":var g=h._("Unirte a la llamada"),j=(c=this.props)!=null?(c=c.thread)!=null?(c=c.rtc_call_data)!=null?c.server_info_data:c:c:c,k=(c=this.props)!=null?(c=c.thread)!=null?(c=c.rtc_call_data)!=null?c.call_state:c:c:c;k&&k==="NO_ONGOING_CALL"&&(g=h._("Iniciar llamada"));return b("React").jsx(b("RTCAppViewMain.react"),{fullBleed:!1,children:b("React").jsxs(b("RTCCallStateInfo.react"),{children:[b("React").jsx(b("RTCThreadInfo.react"),{participants:this.props.participants,thread:this.props.thread}),b("React").jsx(b("RTCCallConnectionStatus.react"),{children:h._("\u00bfListo para llamar?")}),b("React").jsx(b("RTCTextButton.react"),{className:"green _2fst","data-testid":"RTCAppViewStartCallButton",label:g,onClick:function(){return a.$1(k,j)}})]})});case"NEW":case"CONNECTING":case"CONNECTED":case"TERMINATING":c=f.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});g=this.props.layout!==i.GRID;return b("React").jsxs(b("RTCAppViewMain.react"),{fullBleed:g,children:[b("React").jsx(b("FBRTCGroupCallIncallView.react"),babelHelpers["extends"]({remoteUsers:c},d)),this.props.conferenceState==="CONNECTING"&&this.props.linkHash===null?b("React").jsx(b("RTCRingBackTone.react"),{active:!0}):null,this.$2(),b("React").jsx(b("FBRTCEndCallWarningOverlayContainer.react"),{})]});case"TERMINATED":if(this.props.wasConnected&&!this.state.wasStarRatingDone)return b("React").jsx(b("RTCAppViewMain.react"),{fullBleed:!0,children:b("React").jsx(b("RTCStarRating.react"),{isAudioCall:!b("FBRTCGroupCallStore").hadVideoDuration(),isGroupCall:!0,onDone:this.$3})});else return b("React").jsx(b("RTCAppViewMain.react"),{fullBleed:!0,children:this.$2(e?e.toString():null)});default:return null}};d.$2=function(a){var c=b("RTCGroupCallEscalationStore").getState();c=c.p2pCallSummary;c=c?c.getConnectedStartTime():0;return b("React").jsx(b("RTCGroupCallStateInfo.react"),babelHelpers["extends"]({callMessage:a,initialStartTime:c},this.props))};d.$1=function(a,c){var d=this;a=a!=="NO_ONGOING_CALL";a?this.props.onStartCallClick(this.props.remoteUsers.toArray().map(function(a){return a.FBID}),j.MULTIWAY_POPUP_START_CALL_BUTTON):b("MessengerRTCGroupCallParticipantsPickerDialogController").render({conferenceName:this.props.conferenceName,handleCall:function(a){return d.props.onStartCallClick(a,j.MULTIWAY_POPUP_START_CALL_BUTTON,c)},hasVideo:!0,participants:this.props.participants.filter(function(a){a=a.fbid;return a!==b("CurrentUser").getID()}),thread:this.props.thread,trigger:j.MULTIWAY_POPUP_START_CALL_BUTTON,viewerID:b("CurrentUser").getID()})};return c}(a);e.exports=c}),null);
__d("RTCMWAppViewFooter.react",["cx","Promise","CollabRTCChromeScreenSharingExtension","FBRTCConstants","FBRTCHangupReason","FBRTCParticipantCallState","FBRTCScreenSharingUtils","React","RTCAnonGuestPostCallMessengerUpsellFooter.react","RTCAppViewFooter.react","RTCCallControls.react","RTCCallControlsAddGroupMembersButton.react","RTCCallControlsCloseWindowButton.react","RTCCallControlsEndCallButton.react","RTCCallControlsParticipantsRosterButton.react","RTCCallControlsToggleAudioButton.react","RTCCallControlsToggleScreenSharingWithFunnelButton.react","RTCCallControlsToggleVideoButton.react","RTCCallControlsVideoEscalationButton.react","RTCCallStore","RTCChromeScreenSharingUtils","RTCGroupCallRemoteView.react","RTCMWProtocolHandler","RTCSelfView.react","RTWebClientFeatureGating","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout;a=b("React").PureComponent;var i=b("RTCChromeScreenSharingUtils").getMediaRequestSourceAppId;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=0,d.$2=0,d.$3=0,d.$5=0,d.$6=null,d.$9=function(){b("RTCMWProtocolHandler").endCall(d.props.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL)},d.$7=function(a){a=a.width;if(d.$1===a)return;d.$1=a;d.$12()},d.$8=function(a){a=a.width;if(d.$3===a)return;d.$3=a;d.$12()},d.$10=function(a){a=a.width;if(d.$2===a)return;d.$2=a;d.$12()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.hasVideoInput,e=c.isAudioCall,f=c.layout,g=c.localUser;c=c.isGuestFromLink;c=c===void 0?!1:c;switch(this.props.conferenceState){case"CONNECTING":case"CONNECTED":var j=g&&g.getScreenStream();f=f===h.DOMINANT_SPEAKER;f=(!e||b("RTWebClientFeatureGating").callUnification())&&f;var k=null;g.isGuestUser||c?k=b("React").jsx(b("RTCCallControlsParticipantsRosterButton.react"),{}):k=b("React").jsx(b("RTCCallControlsAddGroupMembersButton.react"),{className:f?"addMember":"",conferenceName:this.props.conferenceName,conferenceState:this.props.conferenceState,isP2P:!1,localUser:g,participants:this.props.participants,remoteUsers:this.props.remoteUsers,thread:this.props.thread});return b("React").jsxs(b("RTCAppViewFooter.react"),{onResize:this.$7,children:[b("React").jsxs(b("RTCCallControls.react"),{autoHide:!e,className:"_5rdt"+(f?" video":""),onResize:this.$8,ref:function(b){return a.$4=b?b.getDOMNode():b},children:[g.hasLiveVideoTracks()?b("React").jsx(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:this.props.conferenceState,disabled:!!j,initializeVideo:!0,isP2P:!1,videoMuted:g.isVideoMuted()}):b("React").jsx(b("RTCCallControlsVideoEscalationButton.react"),{disabled:!d,onClick:function(){return b("RTCMWProtocolHandler").escalateLocalStream()}}),b("React").jsx(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:g.isAudioMuted()}),b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()?b("React").jsx(b("RTCCallControlsToggleScreenSharingWithFunnelButton.react"),{conferenceState:this.props.conferenceState,disabled:!g.hasScreenStream()&&(e||g.isVideoMuted()),isP2P:!1,onExtensionInstallStart:function(){return b("UserAgent").isBrowser("Chrome")?b("CollabRTCChromeScreenSharingExtension").install(i()):b("Promise").reject("unexpected browser")},onShareStarted:b("RTCMWProtocolHandler").startScreenStream,onShareStop:b("RTCMWProtocolHandler").stopScreenStream,onShareStreamUpdate:b("RTCMWProtocolHandler").updateScreenStream,stream:j}):null,f&&!c?null:k,b("React").jsx(b("RTCCallControlsEndCallButton.react"),{onClick:this.$9,showNux:this.props.conferenceState==="CONNECTED"&&g.isGuestUser})]}),f&&!c?k:null,f?b("React").jsx(b("RTCGroupCallRemoteView.react"),{remoteUsers:this.props.remoteUsers.filter(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED})}):null,b("React").jsx(b("RTCSelfView.react"),{className:"_3kqh"+(f?" video":""),hideCameraViewWhenScreenSharing:!0,isAudioCall:e,isDominantSpeaker:f,isP2P:!1,onResize:this.$10,onScreenSharingStop:b("RTCMWProtocolHandler").stopScreenStream,user:g})]});case"TERMINATING":return b("React").jsx(b("RTCAppViewFooter.react"),{onResize:this.$7,children:b("React").jsxs(b("RTCCallControls.react"),{autoHide:!1,className:"_5rdt",onResize:this.$8,ref:function(b){return a.$4=b?b.getDOMNode():b},children:[b("React").jsx(b("RTCCallControlsToggleVideoButton.react"),{conferenceState:this.props.conferenceState,disabled:!0,initializeVideo:!0,isP2P:!1,videoMuted:!0}),b("React").jsx(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:!0,disabled:!0}),b("React").jsx(b("RTCCallControlsEndCallButton.react"),{disabled:!0})]})});case"TERMINATED":return b("React").jsx(b("RTCAppViewFooter.react"),{onResize:this.$7,children:g.isGuestUser?b("React").jsx(b("RTCAnonGuestPostCallMessengerUpsellFooter.react"),{}):b("React").jsx(b("RTCCallControls.react"),{autoHide:!1,className:"_5rdt",onResize:this.$8,ref:function(b){return a.$4=b?b.getDOMNode():b},children:this.$11()?null:b("React").jsx(b("RTCCallControlsCloseWindowButton.react"),{})})});default:return b("React").jsx(b("RTCAppViewFooter.react"),{})}};d.$12=function(){__p&&__p();var a=this;if(this.$1===0||this.$3===0)return;var b=Math.min(0,this.$1/2-(this.$3/2+this.$2));if(b===this.$5)return;this.$5=b;if(this.$4){var c=this.$4.style;c.transition="none";this.$6=window.requestAnimationFrame(function(){c.transform="translateX("+a.$5+"px)",c.transition=""})}};d.$11=function(){return!window.opener};d.componentWillUnmount=function(){window.cancelAnimationFrame(this.$6)};return c}(a);e.exports=c}),null);
__d("RTCMWAppViewHeader.react",["FBRTCConstants","React","RTCAppViewHeader.react","RTCCallControls.react","RTCCallControlsChatButton.react","RTCCallControlsDominantSpeakerSwitchButton.react","RTCCallControlsGridSwitchButton.react","RTCCallControlsToggleFullScreenButton.react","RTCCallControlsVideoChatLinkButton.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").GroupVideoViewLayout;a=function(a){var c=a.conferenceState,d=a.hideLayoutSwitchButton,e=a.isAudioCall,f=a.layout;a=a.showChatButton;switch(c){case"CONNECTED":var h=!e||b("RTWebClientFeatureGating").callUnification();a=a?b("React").jsx(b("RTCCallControlsChatButton.react"),{conferenceState:c,isP2P:!1}):null;return b("React").jsx(b("RTCAppViewHeader.react"),{isAudioCall:e,children:b("React").jsxs(b("RTCCallControls.react"),{autoHide:h,compact:!0,children:[h&&b("RTWebClientFeatureGating").shouldShowCreateVCLButton()?b("React").jsx(b("RTCCallControlsVideoChatLinkButton.react"),{}):null,h&&!d&&f!==g.DOMINANT_SPEAKER?b("React").jsx(b("RTCCallControlsDominantSpeakerSwitchButton.react"),{}):null,h&&!d&&f!==g.GRID?b("React").jsx(b("RTCCallControlsGridSwitchButton.react"),{}):null,b("React").jsx(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:e}),a]})});default:return b("React").jsx(b("RTCAppViewHeader.react"),{isAudioCall:e,children:b("React").jsx(b("RTCCallControls.react"),{autoHide:!e,compact:!0,children:b("React").jsx(b("RTCCallControlsToggleFullScreenButton.react"),{isAudioOnly:e})})})}};e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewContent.react",["cx","FacepileRounded.react","FBRTCEnterRoomLinkButton.react","FBRTCGroupCallStore","FBRTCMobileBrowserInCallView.react","MessengerChatLinksFunnelLogger","React","RTCAppViewMain.react","RTCRingBackTone.react","RTCStarRating.react","RTWebRTCUserUtils","RTWebStrings","emptyFunction","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=64;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isRejoining:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c=this.props,d=c.conferenceState,e=c.isP2P,f=c.layout,g=c.localUser,j=c.participants,k=c.rejoinCall;c=c.remoteUsers;switch(d){case"NEW":case"CONNECTING":case"CONNECTED":case"TERMINATING":c=e?b("RTWebRTCUserUtils").getRemoteUsers(c):b("RTWebRTCUserUtils").combineLocalAndRemoteUsers(g,b("RTWebRTCUserUtils").getAllConnectedUsers(c));return b("React").jsxs(b("RTCAppViewMain.react"),{fullBleed:!0,children:[b("React").jsx(b("FBRTCMobileBrowserInCallView.react"),{conferenceState:d,isP2P:e,layout:f,localUser:g,rtcUsers:c}),d==="CONNECTING"&&e?b("React").jsx(b("RTCRingBackTone.react"),{active:!0}):null]});case"TERMINATED":if(!e)return j==null||k==null?null:b("React").jsx(b("RTCAppViewMain.react"),{className:"_6qx6",fullBleed:!0,children:b("React").jsxs("div",{className:"_70y3",children:[b("React").jsx(b("FacepileRounded.react"),{direction:"descending",imageSize:h,numProfilesToDisplay:2,profiles:i(j)}),b("React").jsx("p",{className:"_73-l",children:b("RTWebStrings").chatLinksLeftVideoChat}),b("React").jsx(b("RTCStarRating.react"),{isAudioCall:!b("FBRTCGroupCallStore").hadVideoDuration(),isGroupCall:!0,onDone:b("emptyFunction")}),b("gkx")("825725")?b("React").jsx(b("FBRTCEnterRoomLinkButton.react"),{isLoading:this.state.isRejoining,isRejoin:!0,onClick:function(){b("MessengerChatLinksFunnelLogger").appendAction("click_rejoin_call"),a.setState({isRejoining:!0}),k(function(){a.setState({isRejoining:!1})})}}):null]})});else return b("React").jsx(b("RTCAppViewMain.react"),{fullBleed:!0});case"AWAITING_USER_START":return null;default:return null}};return c}(b("React").PureComponent);function i(a,b){b===void 0&&(b=h);a=a.map(function(a){return{image_src:a.image_src,glyph_size:b,name:a.short_name}});return a.toArray()}e.exports=a}),null);
__d("RTCP2PRedialButton.react",["cx","Bootloader","FBRTCConfig","FBRTCConsoleLogger","FBRTCLogger","React","RTCCallActions","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCP2PCallStore","RTCP2PProtocolHandler","RTCUICameraIcon.react","RTCUIPhoneIcon.react","RTCUserSettingsStore","RTWebUserActionLogger","generateRTCCallID","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d,e){if(!b("FBRTCConfig").isVCEndpointCall())return;b("Bootloader").loadModules(["CollabMessengerLogger"],function(b){return b.log(a,{peerID:e.FBID,callID:Number(d),eventDetails:c})},"RTCP2PRedialButton.react")}function i(){__p&&__p();var a=b("generateRTCCallID")().toString();b("RTCCallActions").resetForRedial(a,a);a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logClick(babelHelpers["extends"]({},a,{callType:"p2p",component:"redial",surface:"call_container"}));a=b("RTCUserSettingsStore").getState();var c=a.audioInput;a=a.videoInput;var d=b("RTCP2PCallStore").isAudioOnly();b("RTCP2PProtocolHandler").initStream(!d,c,a).then(function(a){b("RTCCallActions").addLocalStream(a),b("RTCP2PCallStore").getState().protocolHandler.startCall(b("FBRTCLogger").Trigger.REDIAL_BUTTON)})["catch"](function(a){var c=b("RTCCallStore").getState(),d=c.callInfo.conferenceName;c=c.remoteUsers;h("get user media: error",JSON.stringify({error:a.name,constraint:a.constraint,trigger:"redial"}),d,c.first())})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!1),component:"redial",surface:"call_container"}))};d.render=function(){var a=this.props,c=a.className,d=a.icon;a=a.title;return b("React").jsx(b("RTCCallControlsButtonWithLabel.react"),{className:b("joinClasses")("semiopaque icon-48",c),"data-testid":"rediallButton",onClick:i,title:a,children:d})};return c}(b("React").Component);e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewFooter.react",["cx","AlignmentEnum","FBRTCHangupReason","React","RTCAppViewFooter.react","RTCCallControls.react","RTCCallControlsCloseWindowButton.react","RTCCallControlsEndCallButton.react","RTCCallControlsRosterButton.react","RTCCallControlsToggleAudioButton.react","RTCCallControlsToggleVideoButton.react","RTCCallControlsVideoEscalationButton.react","RTCCallStore","RTCMWebSwitchCameraButton.react","RTCMWProtocolHandler","RTCP2PRedialButton.react","RTCUICameraIcon.react","RTWebStrings","UserAgent","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={autoHideControls:!1,currentCameraMode:"environment"},d.$3=function(){var a=d.props,c=a.isP2P,e=a.protocolHandler;a=a.conferenceName;var f=b("RTCCallStore").getState().callInfo.serverInfoData;c&&e?e.endCall():a!=null&&f!=null&&b("RTCMWProtocolHandler").endCall(a,f,b("FBRTCHangupReason").HANGUP_CALL)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){var b=this;a.conferenceState!==this.props.conferenceState&&this.props.conferenceState==="CONNECTED"&&(this.$1=window.setTimeout(function(){b.setState({autoHideControls:!0})},3500))};d.componentWillUnmount=function(){window.clearTimeout(this.$1),this.$1=null};d.render=function(){var a=this;switch(this.props.conferenceState){case"TERMINATED":return this.props.linkHash==null?b("React").jsx(b("RTCAppViewFooter.react"),{children:b("React").jsxs(b("RTCCallControls.react"),{autoHide:!1,className:"_7f4o",children:[b("React").jsx(b("RTCCallControlsCloseWindowButton.react"),{className:"_7f4p",label:b("RTWebStrings").dismiss}),b("React").jsx(b("RTCP2PRedialButton.react"),{className:"_7f4q",icon:b("React").jsx(b("RTCUICameraIcon.react"),{}),title:b("RTWebStrings").callAgain})]})}):b("React").jsx(b("RTCAppViewFooter.react"),{});default:return b("React").jsx(b("RTCAppViewFooter.react"),{children:b("React").jsxs(b("RTCCallControls.react"),{autoHide:this.state.autoHideControls,className:"_5rdt _86ef",children:[this.props.conferenceState==="CONNECTED"?b("React").jsx(b("RTCCallControlsRosterButton.react"),{className:"mweb",connectedRemoteUsersSize:this.props.connectedRemoteUsersSize,isP2P:this.props.isP2P,layout:this.props.layout}):null,this.props.localUser.hasVideo()?b("React").jsx(b("RTCCallControlsToggleVideoButton.react"),{className:"mweb",conferenceState:this.props.conferenceState,initializeVideo:!0,isM4:!0,isP2P:this.props.isP2P,videoMuted:this.props.localUser.isVideoMuted()}):b("React").jsx(b("RTCCallControlsVideoEscalationButton.react"),{className:"mweb",disabled:!this.props.hasVideoInput,isM4:!0,onClick:function(){return b("RTCMWProtocolHandler").escalateLocalStream()}}),this.$2()?b("React").jsx(b("RTCMWebSwitchCameraButton.react"),{className:"mweb",currentCameraMode:this.state.currentCameraMode,onToggleCameraMode:function(){return a.setState(function(a){return{currentCameraMode:a.currentCameraMode==="user"?"environment":"user"}})}}):null,b("React").jsx(b("RTCCallControlsToggleAudioButton.react"),{audioMuted:this.props.localUser.isAudioMuted(),className:"mweb",isM4:!0}),b("React").jsx(b("RTCCallControlsEndCallButton.react"),{nuxAlignment:b("AlignmentEnum").right,onClick:this.$3,showNux:this.props.conferenceState==="CONNECTED"&&this.props.localUser.isGuestUser})]})})}};d.$2=function(){var a=navigator;a=a.mediaDevices;return b("gkx")("1124860")&&a!=null&&a.getSupportedConstraints().facingMode&&this.props.localUser.hasVideo()&&b("UserAgent").isPlatform("Android")};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FBRTCMobileBrowserAppViewHeader.react",["cx","FBRTCConstants","Link.react","React","RTCAppViewHeader.react","RTCCallControls.react","RTCCallControlsToggleFullScreenButton.react","RTCInCallSlidingLogoContainer.react","RTCMessengerM4LogoIcon.react","RTCMobileBrowserUtils","RTCMobilePostCallHeaderBanner.react","UserAgent","VideoChatLinksUserActionsTypedLogger","goURI","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").GroupVideoViewLayout,i=4e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={slideBanner:!1,displayHeader:!1},d.$3=function(){return new(b("VideoChatLinksUserActionsTypedLogger"))().setSurface(d.props.conferenceState==="TERMINATED"?"www_postcall":"www_incall").setComponent("messenger_app_store_link").setVideoCallLinkHashRaw(d.props.linkHash)},d.$2=function(){d.setState({slideBanner:!0}),d.$1=window.setTimeout(function(){d.setState({slideBanner:!1,displayHeader:!1})},i)},d.onLinkClick=function(){d.$3().setEvent("tap").log(),b("goURI")(d.props.appstoreLink!==null&&d.props.appstoreLink!==void 0?d.props.appstoreLink:b("RTCMobileBrowserUtils").getDefaultDownloadAppLink())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){a.layout===h.GRID&&this.props.layout===h.DOMINANT_SPEAKER&&(this.setState({displayHeader:!0}),this.$2())};d.componentDidMount=function(){this.$3().setEvent("impression").log()};d.componentWillUnmount=function(){window.clearTimeout(this.$1)};d.render=function(){var a=this.props,c=a.isAudioCall,d=a.layout,e=a.connectedRemoteUsersSize,f=a.linkHash;a=a.conferenceState;switch(a){case"TERMINATING":return b("React").jsx(b("RTCAppViewHeader.react"),{isAudioCall:c});case"TERMINATED":if(f!=null)return b("React").jsx(b("RTCAppViewHeader.react"),{isAudioCall:c,children:b("React").jsx(b("RTCMobilePostCallHeaderBanner.react"),{onClick:this.onLinkClick,userActionsLogger:this.$3})});case"AWAITING_USER_START":case"CONNECTED":case"CONNECTING":case"NEW":case"RENEGOTIATING":default:return b("React").jsxs(b("RTCAppViewHeader.react"),{className:this.state.slideBanner?"_7238":"",isAudioCall:c,children:[b("React").jsx(b("RTCInCallSlidingLogoContainer.react"),{connectedRemoteUsersSize:e,layout:d,onClick:this.onLinkClick,userActionsLogger:this.$3}),b("React").jsxs(b("RTCCallControls.react"),{autoHide:!this.state.displayHeader&&!this.state.slideBanner,compact:!0,children:[b("React").jsx(b("Link.react"),{className:"_7239",onClick:this.$2,children:b("React").jsx(b("RTCMessengerM4LogoIcon.react"),{className:"_7239"+(this.state.slideBanner?" _84bm":"")})}),b("UserAgent").isBrowser("Mobile Safari")?null:b("React").jsx(b("RTCCallControlsToggleFullScreenButton.react"),{className:b("joinClasses")("semiopaque mweb","_6tcw"),isM4:!0})]})]})}};return c}(b("React").PureComponent);e.exports=a}),null);
__d("RTWebMobileCallView.react",["FBRTCMobileBrowserAppViewContent.react","FBRTCMobileBrowserAppViewFooter.react","FBRTCMobileBrowserAppViewHeader.react","React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("FBRTCMobileBrowserAppViewHeader.react"),{conferenceState:a.conferenceState,connectedRemoteUsersSize:a.connectedRemoteUsersSize,isAudioCall:a.isAudioCall,layout:a.layout,linkHash:a.linkHash}),b("React").jsx(b("FBRTCMobileBrowserAppViewContent.react"),{conferenceState:a.conferenceState,isP2P:a.isP2P,layout:a.layout,localUser:a.localUser,participants:a.participants,rejoinCall:a.rejoinCall,remoteUsers:a.remoteUsers}),b("React").jsx(b("FBRTCMobileBrowserAppViewFooter.react"),{conferenceName:a.conferenceName,conferenceState:a.conferenceState,connectedRemoteUsersSize:a.connectedRemoteUsersSize,hasVideoInput:a.hasVideoInput,isP2P:a.isP2P,layout:a.layout,linkHash:a.linkHash,localUser:a.localUser,protocolHandler:a.protocolHandler})]})}e.exports=a}),null);
__d("RTCGroupCallView.react",["cx","fbt","invariant","Promise","FBRTCCallSummaryStore","FBRTCConsoleLogger","FBRTCConstants","FBRTCHangupReason","FBRTCSupport","React","RTCAppView.react","RTCCallStore","RTCChatViewWrapper.react","RTCEndCallQPSurface.react","RTCGrantUserMediaAccessView.react","RTCMWAppViewContent.react","RTCMWAppViewFooter.react","RTCMWAppViewHeader.react","RTCMWProtocolHandler","RTCPeerConnectionStats.react","RTCUserMediaRequestState","RTCUtils","RTWebClientFeatureGating","RTWebMobileCallView.react","RTWebUserActionLogger","Run","debounce"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("FBRTCConstants").GroupVideoViewLayout;a=b("React").PureComponent;var k=2,l=8;function m(a,b,c){if(b)return{hideLayoutSwitchButton:!0,remoteUsersLayout:a};b=c>l||c<k;c=c<k?j.GRID:b?j.DOMINANT_SPEAKER:a;return{hideLayoutSwitchButton:b,remoteUsersLayout:c}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={hasVideoInput:!1,wasConnected:!1},d.$1=b("debounce")(function(){b("RTWebUserActionLogger").logClick({component:"window_resize",surface:"call_container"})},2e3),c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,b){return{wasConnected:b.wasConnected||a.conferenceState==="CONNECTED"}};var d=c.prototype;d.render=function(){__p&&__p();var a=this.props.userMediaRequest;switch(a.state){case b("RTCUserMediaRequestState").PENDING:case b("RTCUserMediaRequestState").REJECTED:return b("React").jsx(b("RTCGrantUserMediaAccessView.react"),{isAudioCall:this.props.isAudioCall,userMediaRequest:a});default:a=this.props;var c=a.layout;a=babelHelpers.objectWithoutPropertiesLoose(a,["layout"]);var d=this.props.thread?this.props.thread.thread_id:"0";!this.props.chatWindowVisible||this.props.thread!=null||i(0,5576);var e=b("FBRTCSupport").isMobileDevice(),f=b("RTCCallStore").getConnectedRemoteUsersSize();c=m(c,e,f);var g=c.hideLayoutSwitchButton;c=c.remoteUsersLayout;return b("React").jsx(b("RTCChatViewWrapper.react"),{callerID:this.props.localUser.FBID,chatWindowVisible:this.props.chatWindowVisible,threadID:d,children:b("React").jsx("div",{className:"_38jq _li"+(this.props.conferenceState==="TERMINATED"?" _17cj":""),children:b("React").jsxs("div",{className:"_7q_4",children:[b("React").jsx("div",{className:"_7q_5",children:b("React").jsx(b("RTCAppView.react"),{className:"_32ut"+(this.props.isAudioCall&&!e&&!b("RTWebClientFeatureGating").callUnification()?" _32uu":"")+(e?" _7o1p":""),isAudioCall:this.props.isAudioCall,children:e?b("React").jsx(b("RTWebMobileCallView.react"),{conferenceName:this.props.conferenceName,conferenceState:this.props.conferenceState,connectedRemoteUsersSize:f,hasVideoInput:this.state.hasVideoInput,isAudioCall:this.props.isAudioCall,isP2P:!1,layout:c,linkHash:this.props.linkHash,localUser:this.props.localUser,participants:this.props.participants,rejoinCall:this.props.rejoinCall,remoteUsers:this.props.remoteUsers}):b("React").jsx(n,babelHelpers["extends"]({hasVideoInput:this.state.hasVideoInput,hideLayoutSwitchButton:g,layout:c,wasConnected:this.state.wasConnected},a))})}),this.props.linkHash==null&&b("RTWebClientFeatureGating").shouldShowEndCallQPs()?b("React").jsx(b("RTCEndCallQPSurface.react"),{className:"_7q_6",conferenceState:this.props.conferenceState,darkMode:!this.props.isAudioCall,visible:!this.props.chatWindowVisible&&this.props.conferenceState==="TERMINATED"}):null]})})})}};d.componentDidMount=function(){__p&&__p();var a=this;window.addEventListener("resize",this.$1);new(b("Promise"))(function(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?a(navigator.mediaDevices.enumerateDevices().then(function(a){return a.some(function(a){a=a.kind;return a==="videoinput"})})):a(!0)}).then(function(b){return a.setState({hasVideoInput:b})})["catch"](function(a){});b("Run").onBeforeUnload(function(){var b=a.props.conferenceState;switch(b){case"CONNECTING":case"CONNECTED":case"TERMINATING":return h._("Al salir de esta p\u00e1gina terminar\u00e1 la llamada.")}return void 0},!1);b("Run").onUnload(function(){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"window_unload"});var c=a.props,d=c.conferenceState;c=c.linkHash;d!=="TERMINATED"&&b("RTCMWProtocolHandler").endCall(a.props.conferenceName,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL,"BrowserClosed");if(c!=null){d=b("RTCCallStore").getState();c=d.callSummary;c.logThisSummary(b("FBRTCCallSummaryStore").getInstance())}})};d.componentDidUpdate=function(a){var c=this.props,d=c.conferenceState;c=c.linkHash;if(c!=null&&d==="TERMINATED"&&a.conferenceState!=="TERMINATED"){b("FBRTCSupport").isMobileDevice()&&b("RTCUtils").isFullScreen()&&b("RTCUtils").exitFullScreen();c=b("RTCCallStore").getState();d=c.callSummary;d.logThisSummary(b("FBRTCCallSummaryStore").getInstance())}};d.componentWillUnmount=function(){window.removeEventListener("resize",this.$1)};return c}(a);function n(a){return b("React").jsxs(b("React").Fragment,{children:[b("React").jsx(b("RTCMWAppViewHeader.react"),babelHelpers["extends"]({showChatButton:a.thread!=null},a)),b("React").jsx(b("RTCMWAppViewContent.react"),babelHelpers["extends"]({},a)),b("React").jsx(b("RTCMWAppViewFooter.react"),babelHelpers["extends"]({},a)),b("React").jsx(b("RTCPeerConnectionStats.react"),{connection:a.connection,style:{marginBottom:40}})]})}e.exports=c}),null);