<body>
  <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {
        return;
      }
      js = d.createElement(s);
      js.id = id;
      js.src = "https://connect.facebook.com/en_US/messenger.Extensions.js";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'Messenger'));

    window.extAsyncInit = function() {
      alert('loaded sdk');
    };


/* Antes habilitar messenger extension y white list */
    function getContext() {
      MessengerExtensions.getContext('2482430665201465',function success(thread_context) {
        var psid = thread_context.psid;
        alert(JSON.stringify(psid));
      }, function error(err, errorMessage) {
        alert(JSON.stringify(errorMessage));
      });
    }


  </script>
  <input type="button" onclick="getContext()" value="Obtener User ID" />
</body>


